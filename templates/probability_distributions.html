<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>概率分布探索 - 概率统计可视化</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/1.4.0/chartjs-plugin-annotation.min.js"></script>
    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>

    <!-- KaTeX for LaTeX rendering -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"
      integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"
      integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"
      integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
          delimiters: [
            { left: "$$", right: "$$", display: true },
            { left: "$", right: "$", display: false },
            { left: "\\[", right: "\\]", display: true },
            { left: "\\(", right: "\\)", display: false },
          ],
        });
      });
    </script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap");

      :root {
        --dark-bg: #0f172a;
        --dark-card: #1e293b;
        --neon-blue: #00f3ff;
        --neon-purple: #bf00ff;
        --neon-green: #00ff66;
        --neon-orange: #ff6600;
        --neon-pink: #ff0080;
        --neon-cyan: #00f3ff;
        --neon-yellow: #ffff00;
        --neon-red: #ff0040;
        --neon-indigo: #6366f1;
        --neon-teal: #14b8a6;
        --neon-lime: #84cc16;
      }

      body {
        font-family: "Roboto", sans-serif;
        background-color: var(--dark-bg);
        color: #fff;
        overflow-x: hidden;
      }

      .font-future {
        font-family: "Roboto", sans-serif;
        letter-spacing: 0.05em;
      }

      .text-neon-blue {
        color: var(--neon-blue);
      }

      .text-neon-purple {
        color: var(--neon-purple);
      }

      .text-neon-green {
        color: var(--neon-green);
      }

      .text-neon-orange {
        color: var(--neon-orange);
      }

      .text-neon-pink {
        color: var(--neon-pink);
      }

      .text-neon-cyan {
        color: var(--neon-cyan);
      }

      .text-neon-yellow {
        color: var(--neon-yellow);
      }

      .text-neon-red {
        color: var(--neon-red);
      }

      .text-neon-indigo {
        color: var(--neon-indigo);
      }

      .text-neon-teal {
        color: var(--neon-teal);
      }

      .text-neon-lime {
        color: var(--neon-lime);
      }

      .bg-neon-blue {
        background-color: var(--neon-blue);
      }

      .bg-neon-purple {
        background-color: var(--neon-purple);
      }

      .bg-neon-green {
        background-color: var(--neon-green);
      }

      .bg-neon-orange {
        background-color: var(--neon-orange);
      }

      .bg-neon-pink {
        background-color: var(--neon-pink);
      }

      .bg-neon-cyan {
        background-color: var(--neon-cyan);
      }

      .bg-neon-yellow {
        background-color: var(--neon-yellow);
      }

      .bg-neon-red {
        background-color: var(--neon-red);
      }

      .bg-neon-indigo {
        background-color: var(--neon-indigo);
      }

      .bg-neon-teal {
        background-color: var(--neon-teal);
      }

      .bg-neon-lime {
        background-color: var(--neon-lime);
      }

      .bg-dark-bg {
        background-color: var(--dark-bg);
      }

      .accent-neon-cyan {
        accent-color: var(--neon-cyan);
      }

      .accent-neon-yellow {
        accent-color: var(--neon-yellow);
      }

      .accent-neon-red {
        accent-color: var(--neon-red);
      }

      .accent-neon-indigo {
        accent-color: var(--neon-indigo);
      }

      .accent-neon-teal {
        accent-color: var(--neon-teal);
      }

      .accent-neon-lime {
        accent-color: var(--neon-lime);
      }

      /* 思考动画样式 */
      .thinking-animation {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .thinking-animation .dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background-color: #00f3ff;
        animation: thinking-pulse 1.4s ease-in-out infinite both;
      }

      .thinking-animation .dot:nth-child(1) {
        animation-delay: -0.32s;
      }

      .thinking-animation .dot:nth-child(2) {
        animation-delay: -0.16s;
      }

      .thinking-animation .dot:nth-child(3) {
        animation-delay: 0s;
      }

      @keyframes thinking-pulse {
        0%,
        80%,
        100% {
          transform: scale(0.8);
          opacity: 0.5;
        }
        40% {
          transform: scale(1.2);
          opacity: 1;
        }
      }

      /* Markdown内容样式 */
      .message-content {
        line-height: 1.6;
      }

      .message-content h1,
      .message-content h2,
      .message-content h3,
      .message-content h4,
      .message-content h5,
      .message-content h6 {
        margin-top: 1.5rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
      }

      .message-content p {
        margin-bottom: 1rem;
      }

      .message-content ul,
      .message-content ol {
        margin-bottom: 1rem;
        padding-left: 1.5rem;
      }

      .message-content li {
        margin-bottom: 0.25rem;
      }

      .message-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
        background-color: rgba(30, 41, 59, 0.5);
        border-radius: 0.5rem;
        overflow: hidden;
      }

      .message-content th,
      .message-content td {
        padding: 0.75rem;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .message-content th {
        background-color: rgba(0, 243, 255, 0.1);
        font-weight: 600;
        color: #00f3ff;
      }

      .message-content code {
        background-color: rgba(30, 41, 59, 0.8);
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-family: "Courier New", monospace;
        color: #00ff66;
      }

      .message-content pre {
        background-color: rgba(30, 41, 59, 0.8);
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1rem 0;
      }

      .message-content pre code {
        background: none;
        padding: 0;
      }

      .message-content blockquote {
        border-left: 4px solid #00f3ff;
        padding-left: 1rem;
        margin: 1rem 0;
        font-style: italic;
        color: #cbd5e1;
      }

      .message-content .katex {
        color: #e5e7eb !important;
      }

      .message-content .katex-display {
        margin: 1rem 0;
      }

      .bg-dark-card {
        background-color: var(--dark-card);
      }

      .accent-neon-blue {
        accent-color: var(--neon-blue);
      }

      .accent-neon-purple {
        accent-color: var(--neon-purple);
      }

      .accent-neon-green {
        accent-color: var(--neon-green);
      }

      .accent-neon-orange {
        accent-color: var(--neon-orange);
      }

      .accent-neon-pink {
        accent-color: var(--neon-pink);
      }

      .clip-path-slant {
        clip-path: polygon(0 0, 100% 0, 100% 95%, 0 100%);
      }

      .bg-grid {
        background-image: linear-gradient(
            to right,
            rgba(255, 255, 255, 0.05) 1px,
            transparent 1px
          ),
          linear-gradient(
            to bottom,
            rgba(255, 255, 255, 0.05) 1px,
            transparent 1px
          );
        background-size: 20px 20px;
      }

      .hidden {
        display: none;
      }

      /* 粒子动画 */
      #particles-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
      }

      .particle {
        position: absolute;
        border-radius: 50%;
        opacity: 0.5;
        animation: float 15s infinite ease-in-out;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0) translateX(0);
        }
        25% {
          transform: translateY(-30px) translateX(15px);
        }
        50% {
          transform: translateY(-15px) translateX(-15px);
        }
        75% {
          transform: translateY(30px) translateX(15px);
        }
      }

      /* 分布卡片样式 */
      .distribution-card {
        transition: all 0.3s ease;
      }

      .distribution-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 243, 255, 0.1);
      }

      /* 参数控制面板样式 */
      .param-control {
        background: linear-gradient(
          135deg,
          rgba(30, 41, 59, 0.8),
          rgba(15, 23, 42, 0.9)
        );
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      /* 数学公式样式 */
      .math-formula {
        background: rgba(0, 243, 255, 0.1);
        border: 1px solid rgba(0, 243, 255, 0.3);
        border-radius: 8px;
        padding: 1rem;
        margin: 1rem 0;
        text-align: center;
      }

      .math-formula .MathJax {
        font-size: 1.2em !important;
      }

      /* 多页翻转卡片样式 */
      .multi-page-card {
        perspective: 1500px;
        height: 600px;
        margin-bottom: 2rem;
      }

      .card-container {
        position: relative;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .card-page {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 0.75rem;
        padding: 2rem;
        overflow-y: auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .card-front {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
        border: 1px solid rgba(0, 243, 255, 0.3);
      }

      .card-back {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
        border: 1px solid rgba(0, 243, 255, 0.3);
        transform: rotateY(180deg);
      }

      .card-inner {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
        border: 1px solid rgba(0, 243, 255, 0.3);
        transform: rotateY(180deg);
      }

      .card-extra {
        background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
        border: 1px solid rgba(0, 243, 255, 0.3);
        transform: rotateY(180deg);
      }

      /* 不同页面状态 */
      .multi-page-card.page-1 .card-container {
        transform: rotateY(0deg);
      }

      .multi-page-card.page-2 .card-container {
        transform: rotateY(180deg);
      }

      .multi-page-card.page-3 .card-container {
        transform: rotateY(360deg);
      }

      .multi-page-card.page-4 .card-container {
        transform: rotateY(540deg);
      }

      /* 3D翻转效果 */
      .card-flip-container {
        position: relative;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .card-face {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 0.75rem;
        padding: 2rem;
        overflow-y: auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        background: linear-gradient(
          135deg,
          rgba(30, 41, 59, 0.95),
          rgba(15, 23, 42, 0.95)
        );
        border: 1px solid rgba(0, 243, 255, 0.3);
      }

      .card-face.front {
        transform: rotateY(0deg);
      }

      .card-face.back {
        transform: rotateY(180deg);
      }

      .card-flip-container.flipped {
        transform: rotateY(180deg);
      }

      .card-flip-container.flipped-reverse {
        transform: rotateY(-180deg);
      }

      /* 导航系统 */
      .card-navigation {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 1.5rem;
        gap: 0.5rem;
      }

      .nav-dots {
        display: flex;
        flex-direction: row;
        gap: 0.5rem;
      }

      .nav-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .nav-dot.active {
        background-color: #00f3ff;
        transform: scale(1.2);
      }

      .nav-arrow {
        background: rgba(0, 243, 255, 0.2);
        border: 1px solid rgba(0, 243, 255, 0.5);
        color: #00f3ff;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .nav-arrow:hover {
        background: rgba(0, 243, 255, 0.4);
        transform: scale(1.1);
      }

      .nav-arrow.disabled {
        opacity: 0.3;
        cursor: not-allowed;
      }

      .nav-arrow.disabled:hover {
        background: rgba(0, 243, 255, 0.2);
        transform: none;
      }

      .page-indicator {
        color: #00f3ff;
        font-weight: bold;
        margin: 0 1rem;
      }

      /* 内容标签 */
      .content-tag {
        display: inline-block;
        background: rgba(0, 243, 255, 0.2);
        color: #00f3ff;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.875rem;
        margin-bottom: 1rem;
      }

      /* 动画效果 */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease forwards;
      }

      /* 响应式调整 */
      @media (max-width: 768px) {
        .multi-page-card {
          height: 700px;
        }

        .card-page {
          padding: 1.5rem;
        }
      }

      /* 可视化关系图谱样式 */
      .distribution-node {
        position: absolute;
        transform: translate(-50%, -50%);
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 10;
      }

      .distribution-node:hover {
        transform: translate(-50%, -50%) scale(1.1);
        z-index: 20;
      }

      .node-circle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        border: 2px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
      }

      .distribution-node:hover .node-circle {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        border-color: rgba(255, 255, 255, 0.4);
      }

      .node-label {
        text-align: center;
        margin-top: 8px;
        font-size: 0.875rem;
        font-weight: 600;
        color: #e2e8f0;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      }

      .connection-line {
        opacity: 0.7;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .connection-line:hover {
        opacity: 1;
        stroke-width: 3;
      }

      .relation-group {
        transition: opacity 0.3s ease;
      }

      .relation-group.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .relation-btn {
        transition: all 0.3s ease;
      }

      .relation-btn.active {
        transform: scale(1.05);
      }

      /* 背景颜色类 */
      .bg-neon-blue {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      }

      .bg-neon-purple {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      }

      .bg-neon-green {
        background: linear-gradient(135deg, #10b981, #059669);
      }

      .bg-neon-orange {
        background: linear-gradient(135deg, #f59e0b, #d97706);
      }

      .bg-neon-pink {
        background: linear-gradient(135deg, #ec4899, #db2777);
      }

      .bg-neon-cyan {
        background: linear-gradient(135deg, #06b6d4, #0891b2);
      }

      .bg-neon-yellow {
        background: linear-gradient(135deg, #eab308, #ca8a04);
      }

      /* 动画效果 */
      @keyframes pulse {
        0%, 100% {
          transform: translate(-50%, -50%) scale(1);
        }
        50% {
          transform: translate(-50%, -50%) scale(1.05);
        }
      }

      .distribution-node.highlighted {
        animation: pulse 2s infinite;
      }

      .distribution-node.highlighted .node-circle {
        box-shadow: 0 0 20px rgba(0, 243, 255, 0.6);
      }

      /* 关系信息面板 */
      #relation-info.show {
        opacity: 1;
      }

      /* 连接线动画 */
      @keyframes lineFlow {
        0% {
          stroke-dashoffset: 20;
        }
        100% {
          stroke-dashoffset: 0;
        }
      }

      .connection-line.animated {
        stroke-dasharray: 5, 5;
        animation: lineFlow 1s linear infinite;
      }
    </style>
  </head>
  <body>
    <!-- 粒子背景 -->
    <div id="particles-container"></div>

    <!-- 导航栏 -->
    <nav
      class="bg-dark-bg/80 backdrop-blur-md py-4 sticky top-0 z-50 border-b border-gray-800"
    >
      <div class="container mx-auto px-4 flex justify-between items-center">
        <a
          href="index.html"
          class="text-2xl font-future font-bold flex items-center"
        >
          <span class="text-neon-blue">概率统计</span
          ><span class="ml-2">可视化</span>
        </a>
        <div class="flex space-x-6">
          <a
            href="index.html"
            class="text-gray-300 hover:text-neon-blue transition-colors duration-300"
            >首页</a
          >
          <a
            href="random_variables.html"
            class="text-gray-300 hover:text-neon-blue transition-colors duration-300"
            >随机变量</a
          >
          <a
            href="probability_distributions.html"
            class="text-neon-blue border-b-2 border-neon-blue pb-1"
            >概率分布</a
          >
        </div>
      </div>
    </nav>

    <!-- 页面标题 -->
    <section
      class="py-20 relative bg-gradient-to-b from-dark-bg to-dark-card/50 clip-path-slant"
    >
      <div class="absolute inset-0 bg-grid opacity-10"></div>
      <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
          <h1 class="text-[clamp(2rem,6vw,4rem)] font-future font-bold mb-4">
            <span class="text-neon-purple">概率分布</span>探索
          </h1>
          <p class="text-gray-400 max-w-2xl mx-auto">
            深入理解各种概率分布的特性、参数和应用场景
          </p>
        </div>
      </div>
    </section>

    <!-- 概率分布概览 -->
    <section
      id="distributions-overview"
      class="py-20 relative bg-gradient-to-b from-dark-bg to-dark-card/50"
    >
      <div class="absolute inset-0 bg-grid opacity-10"></div>
      <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-future font-bold mb-4 text-white">
            常见概率分布
          </h2>
          <p class="text-gray-400 max-w-3xl mx-auto">
            概率分布描述了随机变量取值的概率规律，是概率论和统计学的核心概念
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- 正态分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-blue"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-blue/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-bell text-neon-blue text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              正态分布
            </h3>
            <p class="text-gray-400 mb-4">
              最重要的连续概率分布，呈钟形曲线，广泛应用于自然现象和社会现象的建模。
            </p>
            <div class="math-formula">
              $$f(x) = \frac{1}{\sigma\sqrt{2\pi}}
              e^{-\frac{(x-\mu)^2}{2\sigma^2}}$$
            </div>
            <button
              onclick="showDistribution('normal')"
              class="w-full mt-4 px-4 py-2 bg-neon-blue text-dark-bg font-bold rounded-md hover:bg-neon-blue/80 transition-all duration-300"
            >
              探索正态分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- 泊松分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-purple"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-purple/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-chart-bar text-neon-purple text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              泊松分布
            </h3>
            <p class="text-gray-400 mb-4">
              描述单位时间内随机事件发生次数的离散概率分布，常用于排队论和可靠性分析。
            </p>
            <div class="math-formula">
              $$P(X = k) = \frac{\lambda^k e^{-\lambda}}{k!}$$
            </div>
            <button
              onclick="showDistribution('poisson')"
              class="w-full mt-4 px-4 py-2 bg-neon-purple text-dark-bg font-bold rounded-md hover:bg-neon-purple/80 transition-all duration-300"
            >
              探索泊松分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- 指数分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-green"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-green/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-line-chart text-neon-green text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              指数分布
            </h3>
            <p class="text-gray-400 mb-4">
              描述事件间隔时间的连续概率分布，具有无记忆性，常用于生存分析和可靠性工程。
            </p>
            <div class="math-formula">
              $$f(x) = \lambda e^{-\lambda x}, \quad x \geq 0$$
            </div>
            <button
              onclick="showDistribution('exponential')"
              class="w-full mt-4 px-4 py-2 bg-neon-green text-dark-bg font-bold rounded-md hover:bg-neon-green/80 transition-all duration-300"
            >
              探索指数分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- 二项分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-orange"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-orange/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-coins text-neon-orange text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              二项分布
            </h3>
            <p class="text-gray-400 mb-4">
              描述n次独立伯努利试验中成功次数的离散概率分布，是最基本的离散分布之一。
            </p>
            <div class="math-formula">
              $$P(X = k) = \binom{n}{k} p^k (1-p)^{n-k}$$
            </div>
            <button
              onclick="showDistribution('binomial')"
              class="w-full mt-4 px-4 py-2 bg-neon-orange text-dark-bg font-bold rounded-md hover:bg-neon-orange/80 transition-all duration-300"
            >
              探索二项分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- 均匀分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-pink"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-pink/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-square text-neon-pink text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              均匀分布
            </h3>
            <p class="text-gray-400 mb-4">
              在指定区间内所有值等概率出现的连续概率分布，是概率论中最简单的分布。
            </p>
            <div class="math-formula">
              $$f(x) = \frac{1}{b-a}, \quad a \leq x \leq b$$
            </div>
            <button
              onclick="showDistribution('uniform')"
              class="w-full mt-4 px-4 py-2 bg-neon-pink text-dark-bg font-bold rounded-md hover:bg-neon-pink/80 transition-all duration-300"
            >
              探索均匀分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- 卡方分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-blue"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-blue/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-chart-area text-neon-blue text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              卡方分布
            </h3>
            <p class="text-gray-400 mb-4">
              由k个独立标准正态随机变量的平方和构成，广泛用于假设检验和置信区间估计。
            </p>
            <div class="math-formula">
              $$f(x) = \frac{1}{2^{k/2}\Gamma(k/2)} x^{k/2-1} e^{-x/2}$$
            </div>
            <button
              onclick="showDistribution('chisquare')"
              class="w-full mt-4 px-4 py-2 bg-neon-blue text-dark-bg font-bold rounded-md hover:bg-neon-blue/80 transition-all duration-300"
            >
              探索卡方分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- 贝塔分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-purple"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-purple/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-wave-square text-neon-purple text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              贝塔分布
            </h3>
            <p class="text-gray-400 mb-4">
              定义在[0,1]区间上的连续概率分布，常用于建模概率、比例和百分比等有界变量。
            </p>
            <div class="math-formula">
              $$f(x) = \frac{x^{\alpha-1}(1-x)^{\beta-1}}{B(\alpha,\beta)}$$
            </div>
            <button
              onclick="showDistribution('beta')"
              class="w-full mt-4 px-4 py-2 bg-neon-purple text-dark-bg font-bold rounded-md hover:bg-neon-purple/80 transition-all duration-300"
            >
              探索贝塔分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- t分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-green"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-green/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-chart-line text-neon-green text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              t分布
            </h3>
            <p class="text-gray-400 mb-4">
              学生t分布，用于小样本统计推断，当样本量增大时趋近于标准正态分布。
            </p>
            <div class="math-formula">
              $$f(x) =
              \frac{\Gamma(\frac{\nu+1}{2})}{\sqrt{\nu\pi}\Gamma(\frac{\nu}{2})}\left(1+\frac{x^2}{\nu}\right)^{-\frac{\nu+1}{2}}$$
            </div>
            <button
              onclick="showDistribution('t')"
              class="w-full mt-4 px-4 py-2 bg-neon-green text-dark-bg font-bold rounded-md hover:bg-neon-green/80 transition-all duration-300"
            >
              探索t分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- 伽马分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-orange"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-orange/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-chart-area text-neon-orange text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              伽马分布
            </h3>
            <p class="text-gray-400 mb-4">
              连续概率分布，指数分布和卡方分布的推广，常用于建模等待时间和生存分析。
            </p>
            <div class="math-formula">
              $$f(x) = \frac{\beta^\alpha}{\Gamma(\alpha)} x^{\alpha-1}
              e^{-\beta x}$$
            </div>
            <button
              onclick="showDistribution('gamma')"
              class="w-full mt-4 px-4 py-2 bg-neon-orange text-dark-bg font-bold rounded-md hover:bg-neon-orange/80 transition-all duration-300"
            >
              探索伽马分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>

          <!-- F分布卡片 -->
          <div
            class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-pink"
          >
            <div
              class="w-14 h-14 rounded-lg bg-neon-pink/10 flex items-center justify-center mb-6"
            >
              <i class="fa fa-signal text-neon-pink text-2xl"></i>
            </div>
            <h3 class="text-xl font-future font-semibold mb-3 text-white">
              F分布
            </h3>
            <p class="text-gray-400 mb-4">
              两个卡方分布的比值分布，广泛用于方差分析和回归分析中的假设检验。
            </p>
            <div class="math-formula">
              $$f(x) =
              \frac{\Gamma(\frac{d_1+d_2}{2})}{\Gamma(\frac{d_1}{2})\Gamma(\frac{d_2}{2})}
              \left(\frac{d_1}{d_2}\right)^{\frac{d_1}{2}}
              \frac{x^{\frac{d_1}{2}-1}}{\left(1+\frac{d_1}{d_2}x\right)^{\frac{d_1+d_2}{2}}}$$
            </div>
            <button
              onclick="showDistribution('f')"
              class="w-full mt-4 px-4 py-2 bg-neon-pink text-dark-bg font-bold rounded-md hover:bg-neon-pink/80 transition-all duration-300"
            >
              探索F分布 <i class="fa fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>

        <!-- 拓展分布标题 -->
        <div class="text-center mt-16 mb-12">
          <h3 class="text-2xl font-future font-bold mb-4 text-white">
            拓展概率分布
          </h3>
          <p class="text-gray-400 max-w-2xl mx-auto">
            更多高级和专业领域中使用的概率分布
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- 狄利克雷分布卡片 -->
            <div
              class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-cyan"
            >
              <div
                class="w-14 h-14 rounded-lg bg-neon-cyan/10 flex items-center justify-center mb-6"
              >
                <i class="fa fa-cube text-neon-cyan text-2xl"></i>
              </div>
              <h3 class="text-xl font-future font-semibold mb-3 text-white">
                狄利克雷分布
              </h3>
              <p class="text-gray-400 mb-4">
                多元连续概率分布，贝塔分布的多维推广，常用于贝叶斯统计和主题建模。
              </p>
              <div class="math-formula">
                $$f(x_1,...,x_k) = \frac{1}{B(\alpha)} \prod_{i=1}^{k} x_i^{\alpha_i-1}$$
              </div>
              <button
                onclick="showDistribution('dirichlet')"
                class="w-full mt-4 px-4 py-2 bg-neon-cyan text-dark-bg font-bold rounded-md hover:bg-neon-cyan/80 transition-all duration-300"
              >
                探索狄利克雷分布 <i class="fa fa-arrow-right ml-2"></i>
              </button>
            </div>

            <!-- 威布尔分布卡片 -->
            <div
              class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-yellow"
            >
              <div
                class="w-14 h-14 rounded-lg bg-neon-yellow/10 flex items-center justify-center mb-6"
              >
                <i class="fa fa-cog text-neon-yellow text-2xl"></i>
              </div>
              <h3 class="text-xl font-future font-semibold mb-3 text-white">
                威布尔分布
              </h3>
              <p class="text-gray-400 mb-4">
                连续概率分布，广泛用于可靠性分析、生存分析和风险评估中的失效时间建模。
              </p>
              <div class="math-formula">
                $$f(x) = \frac{k}{\lambda}\left(\frac{x}{\lambda}\right)^{k-1} e^{-(x/\lambda)^k}$$
              </div>
              <button
                onclick="showDistribution('weibull')"
                class="w-full mt-4 px-4 py-2 bg-neon-yellow text-dark-bg font-bold rounded-md hover:bg-neon-yellow/80 transition-all duration-300"
              >
                探索威布尔分布 <i class="fa fa-arrow-right ml-2"></i>
              </button>
            </div>

            <!-- 对数正态分布卡片 -->
            <div
              class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-red"
            >
              <div
                class="w-14 h-14 rounded-lg bg-neon-red/10 flex items-center justify-center mb-6"
              >
                <i class="fa fa-chart-area text-neon-red text-2xl"></i>
              </div>
              <h3 class="text-xl font-future font-semibold mb-3 text-white">
                对数正态分布
              </h3>
              <p class="text-gray-400 mb-4">
                连续概率分布，其对数服从正态分布，常用于金融建模和生物统计中的正偏数据。
              </p>
              <div class="math-formula">
                $$f(x) = \frac{1}{x\sigma\sqrt{2\pi}} e^{-\frac{(\ln x - \mu)^2}{2\sigma^2}}$$
              </div>
              <button
                onclick="showDistribution('lognormal')"
                class="w-full mt-4 px-4 py-2 bg-neon-red text-dark-bg font-bold rounded-md hover:bg-neon-red/80 transition-all duration-300"
              >
                探索对数正态分布 <i class="fa fa-arrow-right ml-2"></i>
              </button>
            </div>

            <!-- 帕累托分布卡片 -->
            <div
              class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-indigo"
            >
              <div
                class="w-14 h-14 rounded-lg bg-neon-indigo/10 flex items-center justify-center mb-6"
              >
                <i class="fa fa-balance-scale text-neon-indigo text-2xl"></i>
              </div>
              <h3 class="text-xl font-future font-semibold mb-3 text-white">
                帕累托分布
              </h3>
              <p class="text-gray-400 mb-4">
                幂律分布，体现"80-20法则"，常用于经济学、社会学中的财富和收入分布建模。
              </p>
              <div class="math-formula">
                $$f(x) = \frac{\alpha x_m^\alpha}{x^{\alpha+1}}$$
              </div>
              <button
                onclick="showDistribution('pareto')"
                class="w-full mt-4 px-4 py-2 bg-neon-indigo text-dark-bg font-bold rounded-md hover:bg-neon-indigo/80 transition-all duration-300"
              >
                探索帕累托分布 <i class="fa fa-arrow-right ml-2"></i>
              </button>
            </div>

            <!-- 拉普拉斯分布卡片 -->
            <div
              class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-teal"
            >
              <div
                class="w-14 h-14 rounded-lg bg-neon-teal/10 flex items-center justify-center mb-6"
              >
                <i class="fa fa-mountain text-neon-teal text-2xl"></i>
              </div>
              <h3 class="text-xl font-future font-semibold mb-3 text-white">
                拉普拉斯分布
              </h3>
              <p class="text-gray-400 mb-4">
                双指数分布，具有尖峰和厚尾特性，常用于信号处理和机器学习中的稀疏建模。
              </p>
              <div class="math-formula">
                $$f(x) = \frac{1}{2b} e^{-\frac{|x-\mu|}{b}}$$
              </div>
              <button
                onclick="showDistribution('laplace')"
                class="w-full mt-4 px-4 py-2 bg-neon-teal text-dark-bg font-bold rounded-md hover:bg-neon-teal/80 transition-all duration-300"
              >
                探索拉普拉斯分布 <i class="fa fa-arrow-right ml-2"></i>
              </button>
            </div>

            <!-- 逆伽马分布卡片 -->
            <div
              class="distribution-card bg-dark-card rounded-xl p-6 border border-gray-800 hover:border-neon-lime"
            >
              <div
                class="w-14 h-14 rounded-lg bg-neon-lime/10 flex items-center justify-center mb-6"
              >
                <i class="fa fa-flip-horizontal text-neon-lime text-2xl"></i>
              </div>
              <h3 class="text-xl font-future font-semibold mb-3 text-white">
                逆伽马分布
              </h3>
              <p class="text-gray-400 mb-4">
                连续概率分布，伽马分布的倒数，常用作贝叶斯统计中方差参数的先验分布。
              </p>
              <div class="math-formula">
                $$f(x) = \frac{\beta^\alpha}{\Gamma(\alpha)} x^{-\alpha-1} e^{-\beta/x}$$
              </div>
              <button
                onclick="showDistribution('invgamma')"
                class="w-full mt-4 px-4 py-2 bg-neon-lime text-dark-bg font-bold rounded-md hover:bg-neon-lime/80 transition-all duration-300"
              >
                探索逆伽马分布 <i class="fa fa-arrow-right ml-2"></i>
              </button>
            </div>
          </div>


        </div>
      </div>
    </section>

    <!-- 交互式分布探索 -->
    <section
      id="interactive-exploration"
      class="py-20 relative bg-gradient-to-b from-dark-card/50 to-dark-bg"
    >
      <div class="absolute inset-0 bg-grid opacity-10"></div>
      <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-future font-bold mb-4 text-white">
            交互式分布探索
          </h2>
          <p class="text-gray-400 max-w-3xl mx-auto">
            通过调整参数，实时观察不同概率分布的形状变化和统计特性
          </p>
        </div>

        <div class="bg-dark-card rounded-xl p-8 border border-gray-800">
          <!-- 分布选择器 -->
          <div class="mb-8">
            <label class="block text-gray-300 mb-4 text-lg font-semibold"
              >选择概率分布:</label
            >
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
              <button
                onclick="selectDistribution('normal')"
                id="btn-normal"
                class="distribution-btn px-4 py-3 bg-neon-blue text-dark-bg font-bold rounded-lg hover:bg-neon-blue/80 transition-all duration-300"
              >
                正态分布
              </button>
              <button
                onclick="selectDistribution('poisson')"
                id="btn-poisson"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-purple transition-all duration-300"
              >
                泊松分布
              </button>
              <button
                onclick="selectDistribution('exponential')"
                id="btn-exponential"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-green transition-all duration-300"
              >
                指数分布
              </button>
              <button
                onclick="selectDistribution('binomial')"
                id="btn-binomial"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-orange transition-all duration-300"
              >
                二项分布
              </button>
              <button
                onclick="selectDistribution('uniform')"
                id="btn-uniform"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-pink transition-all duration-300"
              >
                均匀分布
              </button>
              <button
                onclick="selectDistribution('chisquare')"
                id="btn-chisquare"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-blue transition-all duration-300"
              >
                卡方分布
              </button>
              <button
                onclick="selectDistribution('beta')"
                id="btn-beta"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-purple transition-all duration-300"
              >
                贝塔分布
              </button>
              <button
                onclick="selectDistribution('t')"
                id="btn-t"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-green transition-all duration-300"
              >
                t分布
              </button>
              <button
                onclick="selectDistribution('gamma')"
                id="btn-gamma"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-orange transition-all duration-300"
              >
                伽马分布
              </button>
              <button
                onclick="selectDistribution('f')"
                id="btn-f"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-pink transition-all duration-300"
              >
                F分布
              </button>
              <button
                onclick="selectDistribution('dirichlet')"
                id="btn-dirichlet"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-cyan transition-all duration-300"
              >
                狄利克雷分布
              </button>
              <button
                onclick="selectDistribution('weibull')"
                id="btn-weibull"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-yellow transition-all duration-300"
              >
                威布尔分布
              </button>
              <button
                onclick="selectDistribution('lognormal')"
                id="btn-lognormal"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-red transition-all duration-300"
              >
                对数正态分布
              </button>
              <button
                onclick="selectDistribution('pareto')"
                id="btn-pareto"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-indigo transition-all duration-300"
              >
                帕累托分布
              </button>
              <button
                onclick="selectDistribution('laplace')"
                id="btn-laplace"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-teal transition-all duration-300"
              >
                拉普拉斯分布
              </button>
              <button
                onclick="selectDistribution('invgamma')"
                id="btn-invgamma"
                class="distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-lime transition-all duration-300"
              >
                逆伽马分布
              </button>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- 参数控制面板 -->
            <div class="param-control rounded-xl p-6">
              <h3
                class="text-xl font-future font-semibold mb-6 text-white flex items-center"
              >
                <i class="fa fa-sliders-h text-neon-blue mr-3"></i> 参数控制
              </h3>

              <!-- 正态分布参数 -->
              <div id="normal-params" class="distribution-params">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >均值 (μ):
                    <span
                      id="normal-mean-value"
                      class="text-neon-blue font-bold"
                      >0</span
                    ></label
                  >
                  <input
                    type="range"
                    id="normal-mean"
                    min="-5"
                    max="5"
                    step="0.1"
                    value="0"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-blue"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >标准差 (σ):
                    <span id="normal-std-value" class="text-neon-blue font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="normal-std"
                    min="0.1"
                    max="3"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-blue"
                  />
                </div>
              </div>

              <!-- 泊松分布参数 -->
              <div id="poisson-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >λ参数:
                    <span
                      id="poisson-lambda-value"
                      class="text-neon-purple font-bold"
                      >3</span
                    ></label
                  >
                  <input
                    type="range"
                    id="poisson-lambda"
                    min="0.5"
                    max="10"
                    step="0.1"
                    value="3"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-purple"
                  />
                </div>
              </div>

              <!-- 指数分布参数 -->
              <div id="exponential-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >λ参数:
                    <span
                      id="exponential-lambda-value"
                      class="text-neon-green font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="exponential-lambda"
                    min="0.1"
                    max="3"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-green"
                  />
                </div>
              </div>

              <!-- 二项分布参数 -->
              <div id="binomial-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >试验次数 (n):
                    <span
                      id="binomial-n-value"
                      class="text-neon-orange font-bold"
                      >10</span
                    ></label
                  >
                  <input
                    type="range"
                    id="binomial-n"
                    min="1"
                    max="50"
                    step="1"
                    value="10"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-orange"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >成功概率 (p):
                    <span
                      id="binomial-p-value"
                      class="text-neon-orange font-bold"
                      >0.5</span
                    ></label
                  >
                  <input
                    type="range"
                    id="binomial-p"
                    min="0.01"
                    max="0.99"
                    step="0.01"
                    value="0.5"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-orange"
                  />
                </div>
              </div>

              <!-- 均匀分布参数 -->
              <div id="uniform-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >最小值 (a):
                    <span id="uniform-a-value" class="text-neon-pink font-bold"
                      >0</span
                    ></label
                  >
                  <input
                    type="range"
                    id="uniform-a"
                    min="-5"
                    max="0"
                    step="0.1"
                    value="0"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-pink"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >最大值 (b):
                    <span id="uniform-b-value" class="text-neon-pink font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="uniform-b"
                    min="1"
                    max="5"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-pink"
                  />
                </div>
              </div>

              <!-- 卡方分布参数 -->
              <div id="chisquare-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >自由度 (k):
                    <span
                      id="chisquare-k-value"
                      class="text-neon-blue font-bold"
                      >2</span
                    ></label
                  >
                  <input
                    type="range"
                    id="chisquare-k"
                    min="1"
                    max="10"
                    step="1"
                    value="2"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-blue"
                  />
                </div>
              </div>

              <!-- 贝塔分布参数 -->
              <div id="beta-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >α参数:
                    <span
                      id="beta-alpha-value"
                      class="text-neon-purple font-bold"
                      >2</span
                    ></label
                  >
                  <input
                    type="range"
                    id="beta-alpha"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="2"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-purple"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >β参数:
                    <span
                      id="beta-beta-value"
                      class="text-neon-purple font-bold"
                      >2</span
                    ></label
                  >
                  <input
                    type="range"
                    id="beta-beta"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="2"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-purple"
                  />
                </div>
              </div>

              <!-- t分布参数 -->
              <div id="t-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >自由度 (ν):
                    <span id="t-df-value" class="text-neon-green font-bold"
                      >3</span
                    ></label
                  >
                  <input
                    type="range"
                    id="t-df"
                    min="1"
                    max="30"
                    step="1"
                    value="3"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-green"
                  />
                </div>
              </div>

              <!-- 伽马分布参数 -->
              <div id="gamma-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >形状参数 (α):
                    <span
                      id="gamma-alpha-value"
                      class="text-neon-orange font-bold"
                      >2</span
                    ></label
                  >
                  <input
                    type="range"
                    id="gamma-alpha"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="2"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-orange"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >速率参数 (β):
                    <span
                      id="gamma-beta-value"
                      class="text-neon-orange font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="gamma-beta"
                    min="0.1"
                    max="3"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-orange"
                  />
                </div>
              </div>

              <!-- F分布参数 -->
              <div id="f-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >分子自由度 (d₁):
                    <span id="f-df1-value" class="text-neon-pink font-bold"
                      >5</span
                    ></label
                  >
                  <input
                    type="range"
                    id="f-df1"
                    min="1"
                    max="20"
                    step="1"
                    value="5"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-pink"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >分母自由度 (d₂):
                    <span id="f-df2-value" class="text-neon-pink font-bold"
                      >10</span
                    ></label
                  >
                  <input
                    type="range"
                    id="f-df2"
                    min="1"
                    max="30"
                    step="1"
                    value="10"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-pink"
                  />
                </div>
              </div>

              <!-- 狄利克雷分布参数 -->
              <div id="dirichlet-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >α₁ 参数:
                    <span id="dirichlet-alpha1-value" class="text-neon-cyan font-bold"
                      >2</span
                    ></label
                  >
                  <input
                    type="range"
                    id="dirichlet-alpha1"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="2"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-cyan"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >α₂ 参数:
                    <span id="dirichlet-alpha2-value" class="text-neon-cyan font-bold"
                      >3</span
                    ></label
                  >
                  <input
                    type="range"
                    id="dirichlet-alpha2"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="3"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-cyan"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >α₃ 参数:
                    <span id="dirichlet-alpha3-value" class="text-neon-cyan font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="dirichlet-alpha3"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-cyan"
                  />
                </div>
              </div>

              <!-- 威布尔分布参数 -->
              <div id="weibull-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >形状参数 (k):
                    <span id="weibull-k-value" class="text-neon-yellow font-bold"
                      >2</span
                    ></label
                  >
                  <input
                    type="range"
                    id="weibull-k"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="2"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-yellow"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >尺度参数 (λ):
                    <span id="weibull-lambda-value" class="text-neon-yellow font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="weibull-lambda"
                    min="0.5"
                    max="3"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-yellow"
                  />
                </div>
              </div>

              <!-- 对数正态分布参数 -->
              <div id="lognormal-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >μ 参数:
                    <span id="lognormal-mu-value" class="text-neon-red font-bold"
                      >0</span
                    ></label
                  >
                  <input
                    type="range"
                    id="lognormal-mu"
                    min="-2"
                    max="2"
                    step="0.1"
                    value="0"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-red"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >σ 参数:
                    <span id="lognormal-sigma-value" class="text-neon-red font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="lognormal-sigma"
                    min="0.1"
                    max="2"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-red"
                  />
                </div>
              </div>

              <!-- 帕累托分布参数 -->
              <div id="pareto-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >形状参数 (α):
                    <span id="pareto-alpha-value" class="text-neon-indigo font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="pareto-alpha"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-indigo"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >最小值 (xₘ):
                    <span id="pareto-xm-value" class="text-neon-indigo font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="pareto-xm"
                    min="0.5"
                    max="3"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-indigo"
                  />
                </div>
              </div>

              <!-- 拉普拉斯分布参数 -->
              <div id="laplace-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >位置参数 (μ):
                    <span id="laplace-mu-value" class="text-neon-teal font-bold"
                      >0</span
                    ></label
                  >
                  <input
                    type="range"
                    id="laplace-mu"
                    min="-3"
                    max="3"
                    step="0.1"
                    value="0"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-teal"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >尺度参数 (b):
                    <span id="laplace-b-value" class="text-neon-teal font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="laplace-b"
                    min="0.1"
                    max="3"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-teal"
                  />
                </div>
              </div>

              <!-- 逆伽马分布参数 -->
              <div id="invgamma-params" class="distribution-params hidden">
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >形状参数 (α):
                    <span id="invgamma-alpha-value" class="text-neon-lime font-bold"
                      >2</span
                    ></label
                  >
                  <input
                    type="range"
                    id="invgamma-alpha"
                    min="0.5"
                    max="5"
                    step="0.1"
                    value="2"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-lime"
                  />
                </div>
                <div class="mb-6">
                  <label class="block text-gray-300 mb-2"
                    >尺度参数 (β):
                    <span id="invgamma-beta-value" class="text-neon-lime font-bold"
                      >1</span
                    ></label
                  >
                  <input
                    type="range"
                    id="invgamma-beta"
                    min="0.1"
                    max="3"
                    step="0.1"
                    value="1"
                    class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-lime"
                  />
                </div>
              </div>

              <!-- 统计信息 -->
              <div class="mt-8 pt-6 border-t border-gray-700">
                <h4 class="text-lg font-semibold mb-4 text-white">统计特性</h4>
                <div class="grid grid-cols-1 gap-4">
                  <div class="bg-gray-800 p-3 rounded-lg">
                    <div class="text-sm text-gray-400">期望值 E[X]</div>
                    <div
                      id="expectation"
                      class="text-lg font-semibold text-neon-blue"
                    >
                      0.00
                    </div>
                  </div>
                  <div class="bg-gray-800 p-3 rounded-lg">
                    <div class="text-sm text-gray-400">方差 Var[X]</div>
                    <div
                      id="variance"
                      class="text-lg font-semibold text-neon-blue"
                    >
                      1.00
                    </div>
                  </div>
                  <div class="bg-gray-800 p-3 rounded-lg">
                    <div class="text-sm text-gray-400">标准差 σ</div>
                    <div
                      id="std-dev"
                      class="text-lg font-semibold text-neon-blue"
                    >
                      1.00
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 图表显示区域 -->
            <div class="lg:col-span-2">
              <div class="bg-dark-bg rounded-xl p-6 border border-gray-800">
                <div class="flex justify-between items-center mb-6">
                  <h3
                    class="text-xl font-future font-semibold text-white flex items-center"
                  >
                    <i class="fa fa-chart-line text-neon-blue mr-3"></i>
                    <span id="chart-title">正态分布</span>
                  </h3>
                  <div class="flex space-x-2">
                    <button
                      onclick="togglePDF()"
                      id="pdf-btn"
                      class="px-4 py-2 bg-neon-blue text-dark-bg font-bold rounded-md hover:bg-neon-blue/80 transition-all duration-300"
                    >
                      PDF
                    </button>
                    <button
                      onclick="toggleCDF()"
                      id="cdf-btn"
                      class="px-4 py-2 bg-gray-700 text-white font-bold rounded-md hover:bg-neon-blue transition-all duration-300"
                    >
                      CDF
                    </button>
                  </div>
                </div>
                <div class="h-96">
                  <canvas id="distribution-chart"></canvas>
                </div>
              </div>

              <!-- 分布信息 -->
              <div
                class="mt-6 bg-dark-bg rounded-xl p-6 border border-gray-800"
              >
                <h4
                  class="text-lg font-semibold mb-4 text-white flex items-center"
                >
                  <i class="fa fa-info-circle text-neon-blue mr-3"></i> 分布信息
                </h4>
                <div id="distribution-info" class="text-gray-300">
                  <p>
                    <strong>正态分布</strong
                    >是最重要的连续概率分布，具有钟形曲线的特征。它在自然界和社会现象中广泛存在，是中心极限定理的基础。
                  </p>
                  <p class="mt-2">
                    <strong>应用场景：</strong
                    >身高、体重、测量误差、考试成绩等。
                  </p>
                  <p class="mt-2">
                    <strong>特性：</strong>对称性、68-95-99.7规则、可加性等。
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 理论知识深入探索 -->
    <section
      id="theory-exploration"
      class="py-20 relative bg-gradient-to-b from-dark-card/30 to-dark-bg"
    >
      <div class="absolute inset-0 bg-grid opacity-10"></div>
      <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-future font-bold mb-4 text-white">
            理论知识<span class="text-neon-blue">深入探索</span>
          </h2>
          <p class="text-gray-400 max-w-3xl mx-auto">
            深入理解各种概率分布的数学定义、重要性质和实际应用场景
          </p>
        </div>

        <!-- 理论知识卡片网格 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16">
          <!-- 正态分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="normal-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-blue/20 flex items-center justify-center mr-4">
                    <i class="fa fa-bell text-neon-blue text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">正态分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      正态分布（Normal Distribution），又称高斯分布（Gaussian Distribution），
                      是统计学中最重要的连续概率分布。它描述了许多自然现象的分布规律，
                      是概率论和统计学的基石。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      由德国数学家卡尔·弗里德里希·高斯（Carl Friedrich Gauss）在19世纪初系统研究，
                      最初用于天文观测误差分析。后来发现它广泛存在于自然界和社会现象中。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      身高体重分布、智商分数、测量误差、金融收益率、自然现象建模、
                      中心极限定理的基础、质量控制、心理学测试等。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• 误差的分布关于零点对称</li>
                      <li>• 小误差比大误差更可能出现</li>
                      <li>• 误差的分布具有最大熵性质</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-4">
                      基于最大熵原理，在给定均值μ和方差σ²的约束下：
                    </p>
                    <div class="math-formula">
                      $$\max H(f) = -\int_{-\infty}^{\infty} f(x) \log f(x) dx$$
                    </div>
                    <p class="text-gray-300 mb-2">约束条件：</p>
                    <div class="math-formula">
                      $$\int_{-\infty}^{\infty} f(x) dx = 1, \quad \int_{-\infty}^{\infty} (x-\mu)^2 f(x) dx = \sigma^2$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$f(x) = \frac{1}{\sqrt{2\pi\sigma^2}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}$$
                    </div>
                    <p class="text-sm text-gray-400">其中 μ 是均值，σ² 是方差</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">期望值推导</h4>
                    <div class="math-formula">
                      $$E[X] = \int_{-\infty}^{\infty} x \cdot \frac{1}{\sqrt{2\pi\sigma^2}} e^{-\frac{(x-\mu)^2}{2\sigma^2}} dx$$
                    </div>
                    <p class="text-gray-300 mb-2">通过变量替换 u = (x-μ)/σ：</p>
                    <div class="math-formula">
                      $$E[X] = \mu \int_{-\infty}^{\infty} \frac{1}{\sqrt{2\pi}} e^{-\frac{u^2}{2}} du + \sigma \int_{-\infty}^{\infty} \frac{u}{\sqrt{2\pi}} e^{-\frac{u^2}{2}} du = \mu$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">方差推导</h4>
                    <div class="math-formula">
                      $$Var(X) = E[(X-\mu)^2] = \int_{-\infty}^{\infty} (x-\mu)^2 \cdot \frac{1}{\sqrt{2\pi\sigma^2}} e^{-\frac{(x-\mu)^2}{2\sigma^2}} dx$$
                    </div>
                    <p class="text-gray-300 mb-2">同样通过变量替换：</p>
                    <div class="math-formula">
                      $$Var(X) = \sigma^2 \int_{-\infty}^{\infty} \frac{u^2}{\sqrt{2\pi}} e^{-\frac{u^2}{2}} du = \sigma^2$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">重要结论</h4>
                    <p class="text-gray-300">
                      正态分布N(μ,σ²)的期望为μ，方差为σ²，标准差为σ。
                      这使得正态分布的参数具有直观的统计意义。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">对称性与68-95-99.7规则</h4>
                    <p class="text-gray-300 mb-2">正态分布关于均值μ对称，且有：</p>
                    <div class="math-formula">
                      $$P(\mu - \sigma \leq X \leq \mu + \sigma) \approx 0.68$$
                    </div>
                    <div class="math-formula">
                      $$P(\mu - 2\sigma \leq X \leq \mu + 2\sigma) \approx 0.95$$
                    </div>
                    <div class="math-formula">
                      $$P(\mu - 3\sigma \leq X \leq \mu + 3\sigma) \approx 0.997$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">线性变换性质</h4>
                    <p class="text-gray-300 mb-2">若X ~ N(μ,σ²)，则对于常数a,b：</p>
                    <div class="math-formula">
                      $$aX + b \sim N(a\mu + b, a^2\sigma^2)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">可加性</h4>
                    <p class="text-gray-300 mb-2">独立正态变量的线性组合仍服从正态分布：</p>
                    <div class="math-formula">
                      $$X_1 + X_2 \sim N(\mu_1 + \mu_2, \sigma_1^2 + \sigma_2^2)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">标准化</h4>
                    <div class="math-formula">
                      $$Z = \frac{X - \mu}{\sigma} \sim N(0,1)$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="normal-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="normal-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="normal-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="normal-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="normal-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="normal-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- 泊松分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="poisson-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-green/20 flex items-center justify-center mr-4">
                    <i class="fa fa-clock-o text-neon-green text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">泊松分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      泊松分布（Poisson Distribution）是一种离散概率分布，用于描述在固定时间间隔或空间区域内，
                      独立随机事件发生次数的概率分布。它是统计学中最重要的分布之一。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      由法国数学家西莫恩·德尼·泊松（Siméon Denis Poisson）在1837年提出，
                      最初用于研究在给定时间内某事件发生的次数。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      电话呼叫次数、网站访问量、放射性衰变、交通事故、机器故障、DNA变异、
                      排队论、可靠性工程等领域。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率质量函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• 事件在不相交的时间间隔内独立发生</li>
                      <li>• 在极短时间dt内，事件发生的概率为λdt</li>
                      <li>• 在极短时间dt内，事件发生超过一次的概率可忽略</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-4">
                      设P(k,t)表示在时间t内事件发生k次的概率，则有：
                    </p>
                    <div class="math-formula">
                      $$P(k,t+dt) = P(k,t)(1-\lambda dt) + P(k-1,t)\lambda dt$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$P(X = k) = \frac{\lambda^k e^{-\lambda}}{k!}, \quad k = 0,1,2,\ldots$$
                    </div>
                    <p class="text-sm text-gray-400">其中 λ > 0 是平均发生率参数</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">期望值推导</h4>
                    <div class="math-formula">
                      $$E[X] = \sum_{k=0}^{\infty} k \cdot \frac{\lambda^k e^{-\lambda}}{k!}$$
                    </div>
                    <p class="text-gray-300 mb-2">利用级数展开：</p>
                    <div class="math-formula">
                      $$E[X] = \lambda e^{-\lambda} \sum_{k=1}^{\infty} \frac{\lambda^{k-1}}{(k-1)!} = \lambda$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">方差推导</h4>
                    <p class="text-gray-300 mb-2">首先计算E[X(X-1)]：</p>
                    <div class="math-formula">
                      $$E[X(X-1)] = \sum_{k=2}^{\infty} k(k-1) \cdot \frac{\lambda^k e^{-\lambda}}{k!} = \lambda^2$$
                    </div>
                    <p class="text-gray-300 mb-2">因此：</p>
                    <div class="math-formula">
                      $$Var(X) = E[X^2] - (E[X])^2 = E[X(X-1)] + E[X] - (E[X])^2 = \lambda$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">重要结论</h4>
                    <p class="text-gray-300">
                      泊松分布的期望和方差都等于参数λ，这是泊松分布的一个重要特征。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">可加性</h4>
                    <p class="text-gray-300 mb-2">若X₁ ~ Poisson(λ₁)，X₂ ~ Poisson(λ₂)且独立，则：</p>
                    <div class="math-formula">
                      $$X_1 + X_2 \sim \text{Poisson}(\lambda_1 + \lambda_2)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">二项分布的极限</h4>
                    <p class="text-gray-300 mb-2">当n→∞，p→0，np=λ时：</p>
                    <div class="math-formula">
                      $$\lim_{n \to \infty} \binom{n}{k} p^k (1-p)^{n-k} = \frac{\lambda^k e^{-\lambda}}{k!}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">正态近似</h4>
                    <p class="text-gray-300 mb-2">当λ较大时（通常λ≥20），泊松分布近似正态分布：</p>
                    <div class="math-formula">
                      $$\text{Poisson}(\lambda) \approx N(\lambda, \lambda)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">矩母函数</h4>
                    <div class="math-formula">
                      $$M_X(t) = e^{\lambda(e^t - 1)}$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="poisson-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="poisson-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="poisson-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="poisson-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="poisson-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="poisson-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- 指数分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="exponential-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-orange/20 flex items-center justify-center mr-4">
                    <i class="fa fa-hourglass text-neon-orange text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">指数分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      指数分布（Exponential Distribution）是一种连续概率分布，用于描述独立随机事件
                      发生的时间间隔。它是唯一具有无记忆性的连续分布，在可靠性工程和排队论中应用广泛。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      指数分布最早在18世纪被研究，与泊松过程密切相关。它描述了在泊松过程中，
                      连续两个事件之间的等待时间分布。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      设备寿命分析、服务时间建模、排队等待时间、放射性衰变间隔、
                      电子元件失效时间、网络数据包到达间隔等。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• 事件发生具有无记忆性</li>
                      <li>• 在任意时间间隔内，事件发生率恒定为λ</li>
                      <li>• 事件发生相互独立</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-4">
                      设X表示等待时间，由无记忆性可得：
                    </p>
                    <div class="math-formula">
                      $$P(X > t+s | X > s) = P(X > t)$$
                    </div>
                    <p class="text-gray-300 mb-2">设F(t) = P(X ≤ t)，则：</p>
                    <div class="math-formula">
                      $$1 - F(t+s) = [1 - F(t)][1 - F(s)]$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$f(x) = \lambda e^{-\lambda x}, \quad x \geq 0$$
                    </div>
                    <div class="math-formula">
                      $$F(x) = 1 - e^{-\lambda x}, \quad x \geq 0$$
                    </div>
                    <p class="text-sm text-gray-400">其中 λ > 0 是率参数</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">期望值推导</h4>
                    <div class="math-formula">
                      $$E[X] = \int_0^{\infty} x \lambda e^{-\lambda x} dx$$
                    </div>
                    <p class="text-gray-300 mb-2">使用分部积分法：</p>
                    <div class="math-formula">
                      $$E[X] = \left[-x e^{-\lambda x}\right]_0^{\infty} + \int_0^{\infty} e^{-\lambda x} dx = \frac{1}{\lambda}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">二阶矩推导</h4>
                    <div class="math-formula">
                      $$E[X^2] = \int_0^{\infty} x^2 \lambda e^{-\lambda x} dx$$
                    </div>
                    <p class="text-gray-300 mb-2">再次使用分部积分：</p>
                    <div class="math-formula">
                      $$E[X^2] = \frac{2}{\lambda^2}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">方差计算</h4>
                    <div class="math-formula">
                      $$Var(X) = E[X^2] - (E[X])^2 = \frac{2}{\lambda^2} - \frac{1}{\lambda^2} = \frac{1}{\lambda^2}$$
                    </div>
                    <p class="text-gray-300">
                      因此，指数分布的期望为1/λ，方差为1/λ²，标准差也为1/λ。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">无记忆性</h4>
                    <p class="text-gray-300 mb-2">指数分布的核心性质：</p>
                    <div class="math-formula">
                      $$P(X > s+t | X > s) = P(X > t) = e^{-\lambda t}$$
                    </div>
                    <p class="text-gray-300">这意味着过去的等待时间不影响未来的等待时间。</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">最小值性质</h4>
                    <p class="text-gray-300 mb-2">若X₁, X₂, ..., Xₙ独立且都服从指数分布，则：</p>
                    <div class="math-formula">
                      $$\min(X_1, X_2, \ldots, X_n) \sim \text{Exp}(\lambda_1 + \lambda_2 + \cdots + \lambda_n)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">与其他分布的关系</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• 伽马分布的特例：Exp(λ) = Gamma(1, λ)</li>
                      <li>• 与泊松过程：事件间隔时间服从指数分布</li>
                      <li>• 威布尔分布的特例：形状参数为1时</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">矩母函数</h4>
                    <div class="math-formula">
                      $$M_X(t) = \frac{\lambda}{\lambda - t}, \quad t < \lambda$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="exponential-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="exponential-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="exponential-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="exponential-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="exponential-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="exponential-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- 二项分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="binomial-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-purple/20 flex items-center justify-center mr-4">
                    <i class="fa fa-coins text-neon-purple text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">二项分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      二项分布（Binomial Distribution）是描述n次独立重复的伯努利试验中
                      成功次数的离散概率分布。每次试验只有两种可能结果：成功或失败。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      由瑞士数学家雅各布·伯努利（Jacob Bernoulli）在17世纪末提出，
                      是概率论发展史上的重要里程碑，为后续的统计推断奠定了基础。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      质量控制检验、医学临床试验、市场调研分析、投票预测、
                      A/B测试、成功率分析、可靠性工程等领域。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率质量函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">基本设定</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• n次独立重复试验</li>
                      <li>• 每次试验成功概率为p，失败概率为1-p</li>
                      <li>• X表示n次试验中成功的次数</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-2">
                      恰好k次成功的概率等于：选择k个位置成功 × 成功k次的概率 × 失败(n-k)次的概率
                    </p>
                    <div class="math-formula">
                      $$P(X = k) = \text{选择方式数} \times p^k \times (1-p)^{n-k}$$
                    </div>
                    <p class="text-gray-300 mb-2">其中选择方式数为组合数：</p>
                    <div class="math-formula">
                      $$\binom{n}{k} = \frac{n!}{k!(n-k)!}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$P(X = k) = \binom{n}{k} p^k (1-p)^{n-k}$$
                    </div>
                    <p class="text-sm text-gray-400">其中 k = 0, 1, 2, ..., n</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">期望值推导</h4>
                    <p class="text-gray-300 mb-2">利用指示随机变量方法：</p>
                    <div class="math-formula">
                      $$X = X_1 + X_2 + \cdots + X_n$$
                    </div>
                    <p class="text-gray-300 mb-2">其中X_i为第i次试验的指示变量，E[X_i] = p</p>
                    <div class="math-formula">
                      $$E[X] = E[X_1 + X_2 + \cdots + X_n] = nE[X_1] = np$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">方差推导</h4>
                    <p class="text-gray-300 mb-2">由于各次试验独立：</p>
                    <div class="math-formula">
                      $$Var(X) = Var(X_1 + X_2 + \cdots + X_n) = nVar(X_1)$$
                    </div>
                    <p class="text-gray-300 mb-2">对于伯努利变量：Var(X_i) = p(1-p)</p>
                    <div class="math-formula">
                      $$Var(X) = np(1-p)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">重要结论</h4>
                    <p class="text-gray-300">
                      二项分布B(n,p)的期望为np，方差为np(1-p)，标准差为√[np(1-p)]。
                      当p=0.5时方差最大。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">伯努利分布的推广</h4>
                    <p class="text-gray-300 mb-2">当n=1时，二项分布退化为伯努利分布：</p>
                    <div class="math-formula">
                      $$B(1,p) = \text{Bernoulli}(p)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">正态近似</h4>
                    <p class="text-gray-300 mb-2">当n足够大且np和n(1-p)都不太小时：</p>
                    <div class="math-formula">
                      $$B(n,p) \approx N(np, np(1-p))$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">泊松极限</h4>
                    <p class="text-gray-300 mb-2">当n→∞，p→0，但np=λ保持常数时：</p>
                    <div class="math-formula">
                      $$\lim_{n \to \infty} B(n,p) = \text{Poisson}(\lambda)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">可加性</h4>
                    <p class="text-gray-300 mb-2">独立二项变量的和：</p>
                    <div class="math-formula">
                      $$X_1 \sim B(n_1,p), X_2 \sim B(n_2,p) \Rightarrow X_1 + X_2 \sim B(n_1+n_2,p)$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="binomial-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="binomial-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="binomial-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="binomial-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="binomial-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="binomial-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- 均匀分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="uniform-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-pink/20 flex items-center justify-center mr-4">
                    <i class="fa fa-minus text-neon-pink text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">均匀分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      均匀分布（Uniform Distribution）是最简单的连续概率分布，
                      在指定区间[a,b]内每个值出现的概率密度相等，体现了"等可能性"的概念。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      均匀分布是概率论中最早研究的分布之一，源于古典概率中的
                      "等可能性假设"。它是现代随机数生成和蒙特卡洛方法的理论基础。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      随机数生成、蒙特卡洛模拟、几何概率问题、信号处理中的噪声建模、
                      计算机图形学、统计抽样、数值积分等领域。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• 在区间[a,b]内每个点的概率密度相等</li>
                      <li>• 区间外的概率密度为0</li>
                      <li>• 总概率为1</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-2">设概率密度函数为常数c，在区间[a,b]内：</p>
                    <div class="math-formula">
                      $$\int_a^b c \, dx = 1$$
                    </div>
                    <p class="text-gray-300 mb-2">解得：</p>
                    <div class="math-formula">
                      $$c \cdot (b-a) = 1 \Rightarrow c = \frac{1}{b-a}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$f(x) = \begin{cases} 
                      \frac{1}{b-a} & \text{if } a \leq x \leq b \\ 
                      0 & \text{otherwise} 
                      \end{cases}$$
                    </div>
                    <p class="text-gray-300 mb-2">累积分布函数：</p>
                    <div class="math-formula">
                      $$F(x) = \begin{cases} 
                      0 & \text{if } x < a \\ 
                      \frac{x-a}{b-a} & \text{if } a \leq x \leq b \\ 
                      1 & \text{if } x > b 
                      \end{cases}$$
                    </div>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">期望值推导</h4>
                    <div class="math-formula">
                      $$E[X] = \int_a^b x \cdot \frac{1}{b-a} dx = \frac{1}{b-a} \int_a^b x \, dx$$
                    </div>
                    <p class="text-gray-300 mb-2">计算积分：</p>
                    <div class="math-formula">
                      $$E[X] = \frac{1}{b-a} \cdot \frac{x^2}{2}\Big|_a^b = \frac{1}{b-a} \cdot \frac{b^2-a^2}{2} = \frac{a+b}{2}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">方差推导</h4>
                    <p class="text-gray-300 mb-2">先计算E[X²]：</p>
                    <div class="math-formula">
                      $$E[X^2] = \int_a^b x^2 \cdot \frac{1}{b-a} dx = \frac{1}{b-a} \cdot \frac{x^3}{3}\Big|_a^b = \frac{a^2+ab+b^2}{3}$$
                    </div>
                    <p class="text-gray-300 mb-2">然后计算方差：</p>
                    <div class="math-formula">
                      $$Var(X) = E[X^2] - (E[X])^2 = \frac{a^2+ab+b^2}{3} - \left(\frac{a+b}{2}\right)^2 = \frac{(b-a)^2}{12}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">重要结论</h4>
                    <p class="text-gray-300">
                      均匀分布U(a,b)的期望为(a+b)/2（区间中点），方差为(b-a)²/12，
                      标准差为(b-a)/√12。期望是区间的中心，方差与区间长度的平方成正比。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">等概率性</h4>
                    <p class="text-gray-300 mb-2">区间内任意等长子区间的概率相等：</p>
                    <div class="math-formula">
                      $$P(c \leq X \leq c+h) = \frac{h}{b-a}, \quad \forall c, c+h \in [a,b]$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">线性变换性质</h4>
                    <p class="text-gray-300 mb-2">若X ~ U(a,b)，则Y = cX + d：</p>
                    <div class="math-formula">
                      $$Y \sim U(ca+d, cb+d) \quad \text{当 } c > 0$$
                    </div>
                    <div class="math-formula">
                      $$Y \sim U(cb+d, ca+d) \quad \text{当 } c < 0$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">最大熵性质</h4>
                    <p class="text-gray-300 mb-2">在有界支撑[a,b]上，均匀分布具有最大熵：</p>
                    <div class="math-formula">
                      $$H(X) = \log(b-a)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-pink mb-3">随机数生成基础</h4>
                    <p class="text-gray-300">
                      标准均匀分布U(0,1)是所有其他分布随机数生成的基础，
                      通过逆变换方法可以生成任意分布的随机数。
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="uniform-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="uniform-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="uniform-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="uniform-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="uniform-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="uniform-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- 卡方分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="chi-square-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-blue/20 flex items-center justify-center mr-4">
                    <i class="fa fa-square text-neon-blue text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">卡方分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      卡方分布（Chi-squared Distribution）是k个独立标准正态变量平方和的分布，
                      是统计学中最重要的分布之一，广泛应用于假设检验和置信区间构造。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">数学定义</h4>
                    <p class="text-gray-300 mb-2">
                      设 Z₁, Z₂, ..., Zₖ 是k个独立的标准正态变量，则：
                    </p>
                    <div class="math-formula">
                      $$X = \sum_{i=1}^{k} Z_i^2 \sim \chi^2(k)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      假设检验、方差估计、拟合优度检验、独立性检验、置信区间构造、
                      质量控制、可靠性分析等领域。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">基本推导</h4>
                    <p class="text-gray-300 mb-2">
                      通过变量变换和伽马函数的性质，可以得到卡方分布的密度函数：
                    </p>
                    <div class="math-formula">
                      $$f(x) = \frac{1}{2^{k/2}\Gamma(k/2)} x^{k/2-1} e^{-x/2}, \quad x > 0$$
                    </div>
                    <p class="text-sm text-gray-400">其中k是自由度，Γ(·)是伽马函数</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">累积分布函数</h4>
                    <div class="math-formula">
                      $$F(x) = \frac{\gamma(k/2, x/2)}{\Gamma(k/2)}$$
                    </div>
                    <p class="text-sm text-gray-400">其中γ(s,x)是下不完全伽马函数</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">与伽马分布的关系</h4>
                    <p class="text-gray-300">
                      卡方分布实际上是形状参数为k/2，尺度参数为2的伽马分布的特例。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">期望值推导</h4>
                    <p class="text-gray-300 mb-2">设 X = Z₁² + Z₂² + ... + Zₖ²，其中Zᵢ ~ N(0,1)：</p>
                    <div class="math-formula">
                      $$E[X] = E\left[\sum_{i=1}^{k} Z_i^2\right] = \sum_{i=1}^{k} E[Z_i^2] = \sum_{i=1}^{k} 1 = k$$
                    </div>
                    <p class="text-sm text-gray-400">因为标准正态变量的平方的期望为1</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">方差推导</h4>
                    <p class="text-gray-300 mb-2">对于独立的标准正态变量Zᵢ，有Var(Zᵢ²) = 2：</p>
                    <div class="math-formula">
                      $$\text{Var}(X) = \text{Var}\left(\sum_{i=1}^{k} Z_i^2\right) = \sum_{i=1}^{k} \text{Var}(Z_i^2) = 2k$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">矩母函数</h4>
                    <div class="math-formula">
                      $$M_X(t) = (1-2t)^{-k/2}, \quad t < \frac{1}{2}$$
                    </div>
                    <p class="text-gray-300">通过矩母函数可以验证期望和方差的结果。</p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">可加性质</h4>
                    <p class="text-gray-300 mb-2">如果X₁ ~ χ²(k₁)，X₂ ~ χ²(k₂)且相互独立，则：</p>
                    <div class="math-formula">
                      $$X_1 + X_2 \sim \chi^2(k_1 + k_2)$$
                    </div>
                    <p class="text-sm text-gray-400">这个性质使得卡方分布在统计推断中非常有用</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">正态近似</h4>
                    <p class="text-gray-300 mb-2">当自由度k较大时，卡方分布趋向正态分布：</p>
                    <div class="math-formula">
                      $$\frac{\chi^2(k) - k}{\sqrt{2k}} \xrightarrow{d} N(0,1)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">统计应用</h4>
                    <ul class="text-gray-300 space-y-1">
                      <li>• 方差的假设检验和置信区间</li>
                      <li>• 皮尔逊卡方拟合优度检验</li>
                      <li>• 列联表独立性检验</li>
                      <li>• 似然比检验统计量的分布</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航控制 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="chi-square-theory-card">
                <i class="fa fa-chevron-left"></i>
              </div>
              <div class="nav-dots">
                <div class="nav-dot active" data-card="chi-square-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="chi-square-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="chi-square-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="chi-square-theory-card" data-page="4"></div>
              </div>
              <div class="nav-arrow next-arrow" data-card="chi-square-theory-card">
                <i class="fa fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- 贝塔分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="beta-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-purple/20 flex items-center justify-center mr-4">
                    <i class="fa fa-wave-square text-neon-purple text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">贝塔分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      贝塔分布（Beta Distribution）是定义在[0,1]区间上的连续概率分布，
                      由两个正形状参数α和β控制。它是二项分布的共轭先验分布，
                      在贝叶斯统计中应用广泛。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      贝塔分布最早由欧拉在18世纪研究贝塔函数时发现，后来在20世纪
                      被广泛应用于贝叶斯统计、可靠性工程和质量控制等领域。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      概率建模、成功率估计、贝叶斯先验分布、项目管理中的完成度建模、
                      质量控制、A/B测试、机器学习中的参数估计等。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• 随机变量X取值在[0,1]区间内</li>
                      <li>• 分布形状由两个正参数α和β控制</li>
                      <li>• 具有最大熵性质（在给定矩约束下）</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-4">
                      贝塔分布的密度函数形式来源于贝塔函数的归一化：
                    </p>
                    <div class="math-formula">
                      $$B(\alpha,\beta) = \int_0^1 x^{\alpha-1}(1-x)^{\beta-1} dx$$
                    </div>
                    <p class="text-gray-300 mb-2">与伽马函数的关系：</p>
                    <div class="math-formula">
                      $$B(\alpha,\beta) = \frac{\Gamma(\alpha)\Gamma(\beta)}{\Gamma(\alpha+\beta)}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$f(x) = \frac{x^{\alpha-1}(1-x)^{\beta-1}}{B(\alpha,\beta)}, \quad 0 \leq x \leq 1$$
                    </div>
                    <p class="text-sm text-gray-400">其中 α > 0, β > 0 是形状参数</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">期望值推导</h4>
                    <div class="math-formula">
                      $$E[X] = \int_0^1 x \cdot \frac{x^{\alpha-1}(1-x)^{\beta-1}}{B(\alpha,\beta)} dx$$
                    </div>
                    <p class="text-gray-300 mb-2">利用贝塔函数性质：</p>
                    <div class="math-formula">
                      $$E[X] = \frac{B(\alpha+1,\beta)}{B(\alpha,\beta)} = \frac{\alpha}{\alpha+\beta}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">二阶矩推导</h4>
                    <div class="math-formula">
                      $$E[X^2] = \frac{B(\alpha+2,\beta)}{B(\alpha,\beta)} = \frac{\alpha(\alpha+1)}{(\alpha+\beta)(\alpha+\beta+1)}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">方差计算</h4>
                    <div class="math-formula">
                      $$Var(X) = E[X^2] - (E[X])^2 = \frac{\alpha\beta}{(\alpha+\beta)^2(\alpha+\beta+1)}$$
                    </div>
                    <p class="text-gray-300">
                      贝塔分布的期望为α/(α+β)，方差为αβ/[(α+β)²(α+β+1)]。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">对称性</h4>
                    <p class="text-gray-300 mb-2">当α = β时，贝塔分布关于x = 0.5对称：</p>
                    <div class="math-formula">
                      $$\text{Beta}(\alpha,\alpha) \text{ 关于 } x = 0.5 \text{ 对称}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">特殊情况</h4>
                    <p class="text-gray-300 mb-2">均匀分布是贝塔分布的特例：</p>
                    <div class="math-formula">
                      $$\text{Beta}(1,1) = \text{Uniform}(0,1)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">共轭先验性质</h4>
                    <p class="text-gray-300 mb-2">贝塔分布是二项分布的共轭先验：</p>
                    <div class="math-formula">
                      $$p \sim \text{Beta}(\alpha,\beta), \quad X|p \sim \text{Binomial}(n,p)$$
                    </div>
                    <div class="math-formula">
                      $$p|X \sim \text{Beta}(\alpha+x, \beta+n-x)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-purple mb-3">变换性质</h4>
                    <p class="text-gray-300 mb-2">若X ~ Beta(α,β)，则1-X ~ Beta(β,α)：</p>
                    <div class="math-formula">
                      $$X \sim \text{Beta}(\alpha,\beta) \Rightarrow 1-X \sim \text{Beta}(\beta,\alpha)$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="beta-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="beta-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="beta-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="beta-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="beta-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="beta-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- 伽马分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="gamma-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-green/20 flex items-center justify-center mr-4">
                    <i class="fa fa-chart-line text-neon-green text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">伽马分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      伽马分布（Gamma Distribution）是定义在正实数上的连续概率分布，
                      由形状参数α和尺度参数β（或率参数λ）控制。它是指数分布的推广，
                      在可靠性分析、排队论和贝叶斯统计中应用广泛。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      伽马分布由欧拉在研究伽马函数时发现，后来被泊松、皮尔逊等数学家
                      进一步发展。它在20世纪被广泛应用于生存分析、可靠性工程和
                      统计物理学等领域。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      等待时间建模、可靠性分析、降雨量建模、收入分布、
                      贝叶斯统计中的共轭先验、机器学习中的正则化、
                      排队论中的服务时间建模等。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• 随机变量X取值在(0,+∞)区间内</li>
                      <li>• 分布形状由形状参数α > 0控制</li>
                      <li>• 分布尺度由尺度参数β > 0控制</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-4">
                      伽马分布的密度函数形式来源于伽马函数的归一化：
                    </p>
                    <div class="math-formula">
                      $$\Gamma(\alpha) = \int_0^{\infty} t^{\alpha-1} e^{-t} dt$$
                    </div>
                    <p class="text-gray-300 mb-2">通过变量替换t = x/β得到：</p>
                    <div class="math-formula">
                      $$\int_0^{\infty} \left(\frac{x}{\beta}\right)^{\alpha-1} e^{-x/\beta} \frac{dx}{\beta} = \Gamma(\alpha)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$f(x) = \frac{1}{\beta^{\alpha}\Gamma(\alpha)} x^{\alpha-1} e^{-x/\beta}, \quad x > 0$$
                    </div>
                    <p class="text-sm text-gray-400">其中 α > 0 是形状参数，β > 0 是尺度参数</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">期望值推导</h4>
                    <div class="math-formula">
                      $$E[X] = \int_0^{\infty} x \cdot \frac{1}{\beta^{\alpha}\Gamma(\alpha)} x^{\alpha-1} e^{-x/\beta} dx$$
                    </div>
                    <p class="text-gray-300 mb-2">利用伽马函数性质：</p>
                    <div class="math-formula">
                      $$E[X] = \frac{\beta^{\alpha+1}\Gamma(\alpha+1)}{\beta^{\alpha}\Gamma(\alpha)} = \alpha\beta$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">二阶矩推导</h4>
                    <div class="math-formula">
                      $$E[X^2] = \frac{\beta^{\alpha+2}\Gamma(\alpha+2)}{\beta^{\alpha}\Gamma(\alpha)} = \alpha(\alpha+1)\beta^2$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">方差计算</h4>
                    <div class="math-formula">
                      $$Var(X) = E[X^2] - (E[X])^2 = \alpha(\alpha+1)\beta^2 - (\alpha\beta)^2 = \alpha\beta^2$$
                    </div>
                    <p class="text-gray-300">
                      伽马分布的期望为αβ，方差为αβ²。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">可加性</h4>
                    <p class="text-gray-300 mb-2">独立伽马随机变量的和仍为伽马分布：</p>
                    <div class="math-formula">
                      $$X_1 \sim \Gamma(\alpha_1,\beta), X_2 \sim \Gamma(\alpha_2,\beta) \Rightarrow X_1+X_2 \sim \Gamma(\alpha_1+\alpha_2,\beta)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">特殊情况</h4>
                    <p class="text-gray-300 mb-2">指数分布是伽马分布的特例：</p>
                    <div class="math-formula">
                      $$\Gamma(1,\beta) = \text{Exponential}(\lambda), \quad \lambda = 1/\beta$$
                    </div>
                    <p class="text-gray-300 mb-2">卡方分布也是伽马分布的特例：</p>
                    <div class="math-formula">
                      $$\chi^2(n) = \Gamma(n/2, 2)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">共轭先验性质</h4>
                    <p class="text-gray-300 mb-2">伽马分布是泊松分布的共轭先验：</p>
                    <div class="math-formula">
                      $$\lambda \sim \Gamma(\alpha,\beta), \quad X|\lambda \sim \text{Poisson}(\lambda)$$
                    </div>
                    <div class="math-formula">
                      $$\lambda|X \sim \Gamma(\alpha+\sum x_i, \beta+n)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-green mb-3">尺度变换性质</h4>
                    <p class="text-gray-300 mb-2">若X ~ Γ(α,β)，则cX ~ Γ(α,cβ)：</p>
                    <div class="math-formula">
                      $$X \sim \Gamma(\alpha,\beta) \Rightarrow cX \sim \Gamma(\alpha,c\beta)$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="gamma-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="gamma-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="gamma-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="gamma-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="gamma-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="gamma-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- t分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="t-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-blue/20 flex items-center justify-center mr-4">
                    <i class="fa fa-bell-curve text-neon-blue text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">t分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      t分布（Student's t-distribution）是一种连续概率分布，
                      由自由度参数ν控制。它是正态分布的推广，当样本量较小或
                      总体方差未知时，用于统计推断和假设检验。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      t分布由威廉·戈塞特（William Gosset）在1908年以笔名"Student"
                      发表，因此也称为Student's t分布。它解决了小样本统计推断的问题，
                      在现代统计学中具有重要地位。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      小样本均值检验、置信区间估计、回归分析中的参数检验、
                      配对样本t检验、独立样本t检验、单样本t检验、
                      贝叶斯统计中的先验分布等。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• Z ~ N(0,1)，标准正态分布</li>
                      <li>• V ~ χ²(ν)，卡方分布，自由度为ν</li>
                      <li>• Z和V相互独立</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-4">
                      t分布定义为：
                    </p>
                    <div class="math-formula">
                      $$T = \frac{Z}{\sqrt{V/\nu}}$$
                    </div>
                    <p class="text-gray-300 mb-2">利用变量变换和雅可比行列式：</p>
                    <div class="math-formula">
                      $$f_T(t) = \int_0^{\infty} \sqrt{\frac{v}{\nu}} \cdot \phi(t\sqrt{\frac{v}{\nu}}) \cdot \frac{1}{2^{\nu/2}\Gamma(\nu/2)} v^{\nu/2-1} e^{-v/2} dv$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$f(t) = \frac{\Gamma((\nu+1)/2)}{\sqrt{\nu\pi}\Gamma(\nu/2)} \left(1+\frac{t^2}{\nu}\right)^{-(\nu+1)/2}$$
                    </div>
                    <p class="text-sm text-gray-400">其中 ν > 0 是自由度参数</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">期望值推导</h4>
                    <p class="text-gray-300 mb-2">由于t分布关于0对称：</p>
                    <div class="math-formula">
                      $$E[T] = \int_{-\infty}^{\infty} t \cdot f(t) dt = 0$$
                    </div>
                    <p class="text-gray-300">当ν > 1时，期望存在且为0。</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">方差推导</h4>
                    <p class="text-gray-300 mb-2">利用对称性和积分计算：</p>
                    <div class="math-formula">
                      $$Var(T) = E[T^2] = 2\int_0^{\infty} t^2 \cdot f(t) dt$$
                    </div>
                    <p class="text-gray-300 mb-2">通过复杂的积分计算得到：</p>
                    <div class="math-formula">
                      $$Var(T) = \frac{\nu}{\nu-2}, \quad \nu > 2$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">高阶矩</h4>
                    <p class="text-gray-300 mb-2">奇数阶矩为0（对称性）：</p>
                    <div class="math-formula">
                      $$E[T^{2k+1}] = 0, \quad k = 0,1,2,...$$
                    </div>
                    <p class="text-gray-300">偶数阶矩存在当且仅当ν大于相应阶数。</p>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">渐近性质</h4>
                    <p class="text-gray-300 mb-2">当自由度趋于无穷时，t分布收敛到标准正态分布：</p>
                    <div class="math-formula">
                      $$\lim_{\nu \to \infty} t_{\nu} \to N(0,1)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">对称性</h4>
                    <p class="text-gray-300 mb-2">t分布关于0对称：</p>
                    <div class="math-formula">
                      $$f(-t) = f(t), \quad P(T \leq -t) = P(T \geq t)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">尾部性质</h4>
                    <p class="text-gray-300 mb-2">t分布比正态分布有更厚的尾部：</p>
                    <div class="math-formula">
                      $$P(|T| > k) > P(|Z| > k), \quad k > 0$$
                    </div>
                    <p class="text-gray-300">这使得t分布对异常值更加稳健。</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">平方关系</h4>
                    <p class="text-gray-300 mb-2">t分布的平方与F分布相关：</p>
                    <div class="math-formula">
                      $$T^2 \sim F(1,\nu), \quad T \sim t(\nu)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-blue mb-3">样本均值分布</h4>
                    <p class="text-gray-300 mb-2">小样本均值的标准化统计量：</p>
                    <div class="math-formula">
                      $$\frac{\bar{X} - \mu}{S/\sqrt{n}} \sim t(n-1)$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="t-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="t-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="t-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="t-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="t-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="t-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>

          <!-- F分布理论 - 翻转卡片 -->
          <div class="multi-page-card page-1" id="f-theory-card" data-total-pages="4">
            <div class="card-container">
              <!-- 页面1: 分布介绍 -->
              <div class="card-page card-front" data-page="1">
                <div class="content-tag">分布介绍</div>
                <div class="flex items-center mb-6">
                  <div class="w-12 h-12 rounded-lg bg-neon-orange/20 flex items-center justify-center mr-4">
                    <i class="fa fa-chart-area text-neon-orange text-xl"></i>
                  </div>
                  <h3 class="text-2xl font-future font-bold text-white">F分布理论</h3>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">基本概念</h4>
                    <p class="text-gray-300 mb-4">
                      F分布（F-distribution）是一种连续概率分布，
                      由两个自由度参数ν₁和ν₂控制。它是两个独立卡方分布
                      比值的分布，广泛应用于方差分析和假设检验。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">历史背景</h4>
                    <p class="text-gray-300">
                      F分布由罗纳德·费舍尔（Ronald Fisher）在1920年代发展，
                      因此以他的姓氏命名。它在方差分析（ANOVA）、回归分析
                      和假设检验中发挥着核心作用。
                    </p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">应用场景</h4>
                    <p class="text-gray-300">
                      方差分析（ANOVA）、回归分析的显著性检验、
                      方差齐性检验、模型比较、线性回归的F检验、
                      多元统计分析、质量控制等。
                    </p>
                  </div>
                </div>
              </div>

              <!-- 页面2: 分布函数推导 -->
              <div class="card-page card-back" data-page="2">
                <div class="content-tag">分布函数推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">概率密度函数推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">基本假设</h4>
                    <ul class="text-gray-300 space-y-2">
                      <li>• U ~ χ²(ν₁)，卡方分布，自由度为ν₁</li>
                      <li>• V ~ χ²(ν₂)，卡方分布，自由度为ν₂</li>
                      <li>• U和V相互独立</li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">推导过程</h4>
                    <p class="text-gray-300 mb-4">
                      F分布定义为：
                    </p>
                    <div class="math-formula">
                      $$F = \frac{U/\nu_1}{V/\nu_2}$$
                    </div>
                    <p class="text-gray-300 mb-2">利用变量变换和雅可比行列式：</p>
                    <div class="math-formula">
                      $$f_F(x) = \int_0^{\infty} \frac{v}{\nu_2} \cdot f_U\left(\frac{xv}{\nu_2}\nu_1\right) \cdot f_V(v) dv$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">最终结果</h4>
                    <div class="math-formula">
                      $$f(x) = \frac{\Gamma((\nu_1+\nu_2)/2)}{\Gamma(\nu_1/2)\Gamma(\nu_2/2)} \left(\frac{\nu_1}{\nu_2}\right)^{\nu_1/2} \frac{x^{\nu_1/2-1}}{(1+\frac{\nu_1}{\nu_2}x)^{(\nu_1+\nu_2)/2}}$$
                    </div>
                    <p class="text-sm text-gray-400">其中 x > 0，ν₁ > 0，ν₂ > 0 是自由度参数</p>
                  </div>
                </div>
              </div>

              <!-- 页面3: 期望方差推导 -->
              <div class="card-page card-inner" data-page="3">
                <div class="content-tag">期望方差推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">数字特征推导</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">期望值推导</h4>
                    <p class="text-gray-300 mb-2">利用F分布的定义和卡方分布的性质：</p>
                    <div class="math-formula">
                      $$E[F] = E\left[\frac{U/\nu_1}{V/\nu_2}\right] = \frac{\nu_2}{\nu_1} \cdot E[U] \cdot E\left[\frac{1}{V}\right]$$
                    </div>
                    <p class="text-gray-300 mb-2">当ν₂ > 2时：</p>
                    <div class="math-formula">
                      $$E[F] = \frac{\nu_2}{\nu_2-2}, \quad \nu_2 > 2$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">方差推导</h4>
                    <p class="text-gray-300 mb-2">通过复杂的积分计算：</p>
                    <div class="math-formula">
                      $$Var(F) = \frac{2\nu_2^2(\nu_1+\nu_2-2)}{\nu_1(\nu_2-2)^2(\nu_2-4)}$$
                    </div>
                    <p class="text-gray-300">当ν₂ > 4时方差存在。</p>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">众数</h4>
                    <p class="text-gray-300 mb-2">当ν₁ > 2时，F分布的众数为：</p>
                    <div class="math-formula">
                      $$\text{Mode} = \frac{\nu_2(\nu_1-2)}{\nu_1(\nu_2+2)}, \quad \nu_1 > 2$$
                    </div>
                  </div>
                </div>
              </div>

              <!-- 页面4: 重要性质推导 -->
              <div class="card-page card-extra" data-page="4">
                <div class="content-tag">重要性质推导</div>
                <h3 class="text-2xl font-future font-bold text-white mb-6">重要性质与定理</h3>
                
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">倒数性质</h4>
                    <p class="text-gray-300 mb-2">F分布的倒数仍为F分布：</p>
                    <div class="math-formula">
                      $$F \sim F(\nu_1,\nu_2) \Rightarrow \frac{1}{F} \sim F(\nu_2,\nu_1)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">与t分布的关系</h4>
                    <p class="text-gray-300 mb-2">t分布的平方与F分布相关：</p>
                    <div class="math-formula">
                      $$T^2 \sim F(1,\nu), \quad T \sim t(\nu)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">渐近性质</h4>
                    <p class="text-gray-300 mb-2">当ν₂ → ∞时：</p>
                    <div class="math-formula">
                      $$\nu_1 F(\nu_1,\nu_2) \to \chi^2(\nu_1)$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">分位数关系</h4>
                    <p class="text-gray-300 mb-2">F分布的分位数满足：</p>
                    <div class="math-formula">
                      $$F_{1-\alpha}(\nu_1,\nu_2) = \frac{1}{F_{\alpha}(\nu_2,\nu_1)}$$
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-semibold text-neon-orange mb-3">方差比检验</h4>
                    <p class="text-gray-300 mb-2">两个独立正态总体方差比的分布：</p>
                    <div class="math-formula">
                      $$\frac{S_1^2/\sigma_1^2}{S_2^2/\sigma_2^2} \sim F(n_1-1,n_2-1)$$
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 导航系统 -->
            <div class="card-navigation">
              <div class="nav-arrow prev-arrow" data-card="f-theory-card">
                <i class="fas fa-chevron-left"></i>
              </div>

              <div class="flex gap-2 mx-4">
                <div class="nav-dot active" data-card="f-theory-card" data-page="1"></div>
                <div class="nav-dot" data-card="f-theory-card" data-page="2"></div>
                <div class="nav-dot" data-card="f-theory-card" data-page="3"></div>
                <div class="nav-dot" data-card="f-theory-card" data-page="4"></div>
              </div>

              <div class="nav-arrow next-arrow" data-card="f-theory-card">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- 分布关系图 -->
        <div class="bg-dark-card rounded-xl p-8 border border-gray-800 mb-16">
          <h3
            class="text-2xl font-future font-bold text-center mb-8 text-white"
          >
            概率分布<span class="text-neon-blue">关系图谱</span>
          </h3>
          
          <!-- 控制面板 -->
          <div class="flex flex-wrap justify-center gap-4 mb-8">
            <button
              onclick="showRelationType('all')"
              id="btn-all"
              class="relation-btn px-4 py-2 bg-neon-blue text-dark-bg font-bold rounded-lg hover:bg-neon-blue/80 transition-all duration-300"
            >
              全部关系
            </button>
            <button
              onclick="showRelationType('limit')"
              id="btn-limit"
              class="relation-btn px-4 py-2 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-purple transition-all duration-300"
            >
              极限关系
            </button>
            <button
              onclick="showRelationType('construction')"
              id="btn-construction"
              class="relation-btn px-4 py-2 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-green transition-all duration-300"
            >
              构造关系
            </button>
            <button
              onclick="showRelationType('special')"
              id="btn-special"
              class="relation-btn px-4 py-2 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-orange transition-all duration-300"
            >
              特殊关系
            </button>
          </div>

          <!-- 交互式网络图容器 -->
          <div class="relative">
            <div id="distribution-network" class="w-full h-96 bg-dark-bg rounded-xl border border-gray-700 overflow-hidden relative">
              <!-- 分布节点将由JavaScript动态创建 -->

              <!-- 连接线容器 -->
              <svg class="connection-svg" width="100%" height="100%" style="position: absolute; top: 0; left: 0; pointer-events: none;">
                <!-- 极限关系连线 -->
                <g class="relation-group limit-relations">
                  <!-- 二项 → 泊松 -->
                  <line class="connection-line limit" x1="20%" y1="40%" x2="35%" y2="60%" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowhead-purple)"/>
                  <!-- 泊松 → 正态 -->
                  <line class="connection-line limit" x1="35%" y1="60%" x2="50%" y2="20%" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead-green)"/>
                  <!-- 二项 → 正态 -->
                  <line class="connection-line limit" x1="20%" y1="40%" x2="50%" y2="20%" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
                </g>
                
                <!-- 构造关系连线 -->
                <g class="relation-group construction-relations">
                  <!-- 正态² → 卡方 -->
                  <line class="connection-line construction" x1="50%" y1="20%" x2="80%" y2="40%" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowhead-orange)"/>
                  <!-- 指数 → 伽马 -->
                  <line class="connection-line construction" x1="65%" y1="60%" x2="50%" y2="80%" stroke="#ec4899" stroke-width="2" marker-end="url(#arrowhead-pink)"/>
                  <!-- 卡方 → 伽马 -->
                  <line class="connection-line construction" x1="80%" y1="40%" x2="50%" y2="80%" stroke="#06b6d4" stroke-width="2" marker-end="url(#arrowhead-cyan)"/>
                </g>
                
                <!-- 特殊关系连线 -->
                <g class="relation-group special-relations">
                  <!-- 均匀 → 其他关系 -->
                  <line class="connection-line special" x1="15%" y1="70%" x2="35%" y2="60%" stroke="#eab308" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead-yellow)"/>
                  <!-- t分布相关 -->
                  <line class="connection-line special" x1="75%" y1="70%" x2="50%" y2="20%" stroke="#f97316" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead-orange)"/>
                </g>

                <!-- 箭头标记定义 -->
                <defs>
                  <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                  </marker>
                  <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
                  </marker>
                  <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
                  </marker>
                  <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
                  </marker>
                  <marker id="arrowhead-pink" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#ec4899"/>
                  </marker>
                  <marker id="arrowhead-cyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#06b6d4"/>
                  </marker>
                  <marker id="arrowhead-yellow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#eab308"/>
                  </marker>
                </defs>
              </svg>
            </div>
            
            <!-- 关系信息面板 -->
            <div id="relation-info" class="mt-6 bg-dark-bg rounded-xl p-6 border border-gray-700 opacity-0 transition-all duration-300">
              <h4 class="text-lg font-semibold text-white mb-3">关系详情</h4>
              <div id="relation-content" class="text-gray-300">
                点击连接线或悬停在分布节点上查看详细关系信息
              </div>
            </div>
          </div>

          <!-- 图例 -->
          <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-gradient-to-br from-neon-purple/10 to-neon-blue/10 rounded-lg p-4 border border-neon-purple/30">
              <h4 class="text-sm font-semibold text-neon-purple mb-2">极限关系</h4>
              <p class="text-xs text-gray-400">当参数趋向某些极限值时的分布转换</p>
            </div>
            <div class="bg-gradient-to-br from-neon-green/10 to-neon-orange/10 rounded-lg p-4 border border-neon-green/30">
              <h4 class="text-sm font-semibold text-neon-green mb-2">构造关系</h4>
              <p class="text-xs text-gray-400">通过数学变换构造出的分布关系</p>
            </div>
            <div class="bg-gradient-to-br from-neon-orange/10 to-neon-pink/10 rounded-lg p-4 border border-neon-orange/30">
              <h4 class="text-sm font-semibold text-neon-orange mb-2">特殊关系</h4>
              <p class="text-xs text-gray-400">特定参数下的等价关系或包含关系</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 实践应用 -->
    <section
      id="practice-applications"
      class="py-20 relative bg-gradient-to-b from-dark-card/30 to-dark-bg"
    >
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-4xl font-future font-bold mb-6">
            <span class="text-neon-blue">实践应用</span>
            <span class="ml-2">洪水频率分析与极值分布</span>
          </h2>
          <p class="text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed">
            基于<span class="text-neon-blue">江西水利电力大学</span>的水利工程特色，运用Gumbel分布和广义极值分布
            <mcreference link="https://zh.wikipedia.org/zh-hans/耿贝尔分布" index="1">1</mcreference>
            分析洪水数据，为防洪工程设计提供科学依据
          </p>
        </div>

        <!-- 应用背景介绍 -->
        <div class="bg-dark-card rounded-xl p-8 mb-12 border border-gray-700">
          <div class="grid md:grid-cols-2 gap-8 items-center">
            <div>
              <h3 class="text-2xl font-bold text-neon-blue mb-4">江西水利工程背景</h3>
              <div class="space-y-4 text-gray-300">
                <p>
                  <span class="text-neon-blue font-semibold">江西水利电力大学</span>
                  <mcreference link="https://zh.wikipedia.org/zh-hans/江西水利电力大学" index="2">2</mcreference>
                  作为水利部共建高校，在水利工程领域具有深厚底蕴。
                </p>
                <p>
                  江西省地处长江中下游，拥有鄱阳湖、赣江等重要水系，洪水频率分析对防洪减灾具有重要意义。
                  <mcreference link="https://www.dqxxkx.cn/EN/10.12082/dqxxkx.2022.220184" index="3">3</mcreference>
                </p>
                <p>
                  通过极值分布理论，可以科学预测不同重现期的洪水位，为水利工程设计提供依据。
                </p>
              </div>
            </div>
            <div class="bg-gradient-to-br from-blue-900/30 to-cyan-900/30 rounded-lg p-6">
              <h4 class="text-lg font-semibold text-cyan-300 mb-3">典型应用场景</h4>
              <ul class="space-y-2 text-sm text-gray-300">
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-cyan-400 rounded-full mr-3"></span>
                  鄱阳湖流域洪水风险评估
                </li>
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-cyan-400 rounded-full mr-3"></span>
                  赣江流域防洪工程设计
                </li>
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-cyan-400 rounded-full mr-3"></span>
                  水库调度优化决策
                </li>
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-cyan-400 rounded-full mr-3"></span>
                  城市排水系统设计
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- 交互式洪水频率分析工具 -->
        <div class="bg-dark-card rounded-xl p-8 border border-gray-700">
          <h3 class="text-2xl font-bold text-center mb-8">
            <span class="text-neon-blue">交互式</span>洪水频率分析工具
          </h3>

          <!-- 分布选择和参数设置 -->
          <div class="grid lg:grid-cols-3 gap-8 mb-8">
            <!-- 分布类型选择 -->
            <div class="bg-gray-800/50 rounded-lg p-6">
              <h4 class="text-lg font-semibold text-cyan-300 mb-4">分布类型选择</h4>
              <div class="space-y-3">
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="flood-distribution" value="gumbel" checked 
                         class="mr-3 text-neon-blue focus:ring-neon-blue">
                  <span class="text-gray-300">Gumbel分布（极值I型）</span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="flood-distribution" value="gev" 
                         class="mr-3 text-neon-blue focus:ring-neon-blue">
                  <span class="text-gray-300">广义极值分布（GEV）</span>
                </label>
              </div>
            </div>

            <!-- Gumbel分布参数 -->
            <div id="gumbel-params" class="bg-gray-800/50 rounded-lg p-6">
              <h4 class="text-lg font-semibold text-cyan-300 mb-4">Gumbel分布参数</h4>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm text-gray-400 mb-2">位置参数 μ (m)</label>
                  <input type="number" id="gumbel-mu" value="15.5" step="0.1" 
                         class="w-full px-3 py-2 bg-dark-bg border border-gray-600 rounded text-white focus:border-neon-blue">
                </div>
                <div>
                  <label class="block text-sm text-gray-400 mb-2">尺度参数 β (m)</label>
                  <input type="number" id="gumbel-beta" value="2.8" step="0.1" 
                         class="w-full px-3 py-2 bg-dark-bg border border-gray-600 rounded text-white focus:border-neon-blue">
                </div>
              </div>
            </div>

            <!-- GEV分布参数 -->
            <div id="gev-params" class="bg-gray-800/50 rounded-lg p-6 hidden">
              <h4 class="text-lg font-semibold text-cyan-300 mb-4">GEV分布参数</h4>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm text-gray-400 mb-2">位置参数 μ (m)</label>
                  <input type="number" id="gev-mu" value="15.2" step="0.1" 
                         class="w-full px-3 py-2 bg-dark-bg border border-gray-600 rounded text-white focus:border-neon-blue">
                </div>
                <div>
                  <label class="block text-sm text-gray-400 mb-2">尺度参数 σ (m)</label>
                  <input type="number" id="gev-sigma" value="2.5" step="0.1" 
                         class="w-full px-3 py-2 bg-dark-bg border border-gray-600 rounded text-white focus:border-neon-blue">
                </div>
                <div>
                  <label class="block text-sm text-gray-400 mb-2">形状参数 ξ</label>
                  <input type="number" id="gev-xi" value="-0.1" step="0.01" 
                         class="w-full px-3 py-2 bg-dark-bg border border-gray-600 rounded text-white focus:border-neon-blue">
                </div>
              </div>
            </div>
          </div>

          <!-- 可视化图表区域 -->
          <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <!-- 概率密度函数图 -->
            <div class="bg-gray-800/30 rounded-lg p-6">
              <h4 class="text-lg font-semibold text-center mb-4 text-cyan-300">概率密度函数</h4>
              <div class="relative h-80">
                <canvas id="flood-pdf-chart" class="w-full h-full"></canvas>
              </div>
            </div>

            <!-- 重现期-洪水位关系图 -->
            <div class="bg-gray-800/30 rounded-lg p-6">
              <h4 class="text-lg font-semibold text-center mb-4 text-cyan-300">重现期-洪水位关系</h4>
              <div class="relative h-80">
                <canvas id="flood-return-chart" class="w-full h-full"></canvas>
              </div>
            </div>
          </div>

          <!-- 重现期计算器 -->
          <div class="bg-gray-800/50 rounded-lg p-6 mb-8">
            <h4 class="text-lg font-semibold text-cyan-300 mb-4">重现期计算器</h4>
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm text-gray-400 mb-2">输入洪水位 (m)</label>
                <input type="number" id="flood-level-input" value="20" step="0.1" 
                       class="w-full px-3 py-2 bg-dark-bg border border-gray-600 rounded text-white focus:border-neon-blue">
              </div>
              <div>
                <label class="block text-sm text-gray-400 mb-2">计算结果</label>
                <div class="bg-dark-bg border border-gray-600 rounded px-3 py-2">
                  <span class="text-neon-blue font-semibold" id="return-period-result">--</span>
                  <span class="text-gray-400 ml-2">年一遇</span>
                </div>
              </div>
            </div>
          </div>

          <!-- 江西实际案例数据 -->
          <div class="bg-gradient-to-r from-blue-900/20 to-cyan-900/20 rounded-lg p-6 mb-8">
            <h4 class="text-lg font-semibold text-cyan-300 mb-4">江西典型工程案例</h4>
            <div class="grid md:grid-cols-3 gap-4">
              <button onclick="loadFloodCase('poyang')" 
                      class="bg-gray-700/50 hover:bg-gray-600/50 rounded-lg p-4 text-left transition-colors">
                <h5 class="font-semibold text-cyan-300 mb-2">鄱阳湖流域</h5>
                <p class="text-sm text-gray-400">2020年特大洪水案例</p>
              </button>
              <button onclick="loadFloodCase('ganjiang')" 
                      class="bg-gray-700/50 hover:bg-gray-600/50 rounded-lg p-4 text-left transition-colors">
                <h5 class="font-semibold text-cyan-300 mb-2">赣江南昌段</h5>
                <p class="text-sm text-gray-400">历史洪水统计分析</p>
              </button>
              <button onclick="loadFloodCase('reservoir')" 
                      class="bg-gray-700/50 hover:bg-gray-600/50 rounded-lg p-4 text-left transition-colors">
                <h5 class="font-semibold text-cyan-300 mb-2">水库调度案例</h5>
                <p class="text-sm text-gray-400">防洪调度优化</p>
              </button>
            </div>
          </div>

          <!-- 案例详情展示区域 -->
          <div id="case-details" class="bg-gray-800/50 rounded-lg p-6 hidden">
            <div class="flex justify-between items-center mb-4">
              <div>
                <h4 class="text-lg font-semibold text-cyan-300">案例详情</h4>
                <h5 id="case-name" class="text-xl font-bold text-white mt-1"></h5>
              </div>
              <button onclick="closeCaseDetails()" class="text-gray-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
            
            <div class="grid lg:grid-cols-2 gap-6">
              <!-- 案例信息 -->
              <div>
                <h5 class="font-semibold text-cyan-300 mb-3">案例信息</h5>
                <div class="space-y-2 text-sm">
                  <p id="case-description" class="text-gray-300"></p>
                  <div class="grid grid-cols-2 gap-4 mt-4">
                    <div class="bg-dark-bg rounded p-3">
                      <span class="text-gray-400">分布类型:</span>
                      <span id="case-distribution" class="text-cyan-300 ml-2"></span>
                    </div>
                    <div class="bg-dark-bg rounded p-3">
                      <span class="text-gray-400">参数估计:</span>
                      <span id="case-params" class="text-cyan-300 ml-2"></span>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- 历史数据表格 -->
              <div>
                <h5 class="font-semibold text-cyan-300 mb-3">历史洪水数据</h5>
                <div class="bg-dark-bg rounded overflow-hidden">
                  <table class="w-full text-sm">
                    <thead class="bg-gray-700">
                      <tr>
                        <th class="px-4 py-2 text-left text-cyan-300">年份</th>
                        <th class="px-4 py-2 text-left text-cyan-300">洪水位 (m)</th>
                        <th class="px-4 py-2 text-left text-cyan-300">重现期 (年)</th>
                      </tr>
                    </thead>
                    <tbody id="historical-data-table" class="text-gray-300">
                      <!-- 动态填充 -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            
            <!-- 工程意义说明 -->
            <div class="mt-6 bg-gradient-to-r from-cyan-900/20 to-blue-900/20 rounded-lg p-4">
              <h5 class="font-semibold text-cyan-300 mb-3">工程应用意义</h5>
              <p id="engineering-significance" class="text-sm text-gray-300 mb-4">
                <!-- 动态填充 -->
              </p>
              
              <div class="grid lg:grid-cols-2 gap-4">
                <!-- 工程应用 -->
                <div>
                  <h6 class="font-medium text-cyan-300 mb-2">主要应用领域</h6>
                  <ul id="engineering-applications" class="text-sm text-gray-300 list-disc list-inside">
                    <!-- 动态填充 -->
                  </ul>
                </div>
                
                <!-- 关键水位 -->
                <div>
                  <h6 class="font-medium text-cyan-300 mb-2">关键水位标准</h6>
                  <ul id="key-levels" class="text-sm text-gray-300">
                    <!-- 动态填充 -->
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>




    <!-- 页脚 -->
    <footer class="bg-dark-card py-12 border-t border-gray-800">
      <div class="container mx-auto px-4">
        <div class="text-center">
          <div class="text-2xl font-future font-bold mb-4">
            <span class="text-neon-blue">概率统计</span
            ><span class="ml-2">可视化</span>
          </div>
          <p class="text-gray-400 mb-6">
            通过交互式可视化，让概率统计变得生动有趣
          </p>
          <div class="flex justify-center space-x-6">
            <a
              href="#"
              class="text-gray-400 hover:text-neon-blue transition-colors"
            >
              <i class="fab fa-github text-xl"></i>
            </a>
            <a
              href="#"
              class="text-gray-400 hover:text-neon-blue transition-colors"
            >
              <i class="fab fa-twitter text-xl"></i>
            </a>
            <a
              href="#"
              class="text-gray-400 hover:text-neon-blue transition-colors"
            >
              <i class="fab fa-linkedin text-xl"></i>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // 全局变量
      let currentDistribution = "normal";
      let currentChart = null;
      let showPDF = true;

      // 初始化
      document.addEventListener("DOMContentLoaded", function () {
        createParticles();
        initializeChart();
        setupEventListeners();
        updateChart();
      });

      // 创建粒子背景
      function createParticles() {
        const container = document.getElementById("particles-container");
        const colors = ["#00f3ff", "#bf00ff", "#00ff66", "#ff6600", "#ff0080"];

        for (let i = 0; i < 50; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.left = Math.random() * 100 + "%";
          particle.style.top = Math.random() * 100 + "%";
          particle.style.width = Math.random() * 4 + 2 + "px";
          particle.style.height = particle.style.width;
          particle.style.backgroundColor =
            colors[Math.floor(Math.random() * colors.length)];
          particle.style.animationDelay = Math.random() * 15 + "s";
          container.appendChild(particle);
        }
      }

      // 初始化图表
      function initializeChart() {
        const ctx = document
          .getElementById("distribution-chart")
          .getContext("2d");

        // 如果图表已存在，先销毁
        if (currentChart) {
          currentChart.destroy();
        }

        currentChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: [],
            datasets: [
              {
                label: "PDF",
                data: [],
                borderColor: "#00f3ff",
                backgroundColor: "rgba(0, 243, 255, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              x: {
                grid: {
                  color: "rgba(255, 255, 255, 0.1)",
                },
                ticks: {
                  color: "#9ca3af",
                },
              },
              y: {
                grid: {
                  color: "rgba(255, 255, 255, 0.1)",
                },
                ticks: {
                  color: "#9ca3af",
                },
              },
            },
          },
        });
      }

      // 设置事件监听器
      function setupEventListeners() {
        // 正态分布参数
        document
          .getElementById("normal-mean")
          .addEventListener("input", updateChart);
        document
          .getElementById("normal-std")
          .addEventListener("input", updateChart);

        // 泊松分布参数
        document
          .getElementById("poisson-lambda")
          .addEventListener("input", updateChart);

        // 指数分布参数
        document
          .getElementById("exponential-lambda")
          .addEventListener("input", updateChart);

        // 二项分布参数
        document
          .getElementById("binomial-n")
          .addEventListener("input", updateChart);
        document
          .getElementById("binomial-p")
          .addEventListener("input", updateChart);

        // 均匀分布参数
        document
          .getElementById("uniform-a")
          .addEventListener("input", updateChart);
        document
          .getElementById("uniform-b")
          .addEventListener("input", updateChart);

        // 卡方分布参数
        document
          .getElementById("chisquare-k")
          .addEventListener("input", updateChart);

        // 贝塔分布参数
        document
          .getElementById("beta-alpha")
          .addEventListener("input", updateChart);
        document
          .getElementById("beta-beta")
          .addEventListener("input", updateChart);

        // t分布参数
        document.getElementById("t-df").addEventListener("input", updateChart);

        // 伽马分布参数
        document
          .getElementById("gamma-alpha")
          .addEventListener("input", updateChart);
        document
          .getElementById("gamma-beta")
          .addEventListener("input", updateChart);

        // F分布参数
        document.getElementById("f-df1").addEventListener("input", updateChart);
        document.getElementById("f-df2").addEventListener("input", updateChart);

        // 狄利克雷分布参数
        document.getElementById("dirichlet-alpha1").addEventListener("input", updateChart);
        document.getElementById("dirichlet-alpha2").addEventListener("input", updateChart);
        document.getElementById("dirichlet-alpha3").addEventListener("input", updateChart);

        // 威布尔分布参数
        document.getElementById("weibull-k").addEventListener("input", updateChart);
        document.getElementById("weibull-lambda").addEventListener("input", updateChart);

        // 对数正态分布参数
        document.getElementById("lognormal-mu").addEventListener("input", updateChart);
        document.getElementById("lognormal-sigma").addEventListener("input", updateChart);

        // 帕累托分布参数
        document.getElementById("pareto-alpha").addEventListener("input", updateChart);
        document.getElementById("pareto-xm").addEventListener("input", updateChart);

        // 拉普拉斯分布参数
        document.getElementById("laplace-mu").addEventListener("input", updateChart);
        document.getElementById("laplace-b").addEventListener("input", updateChart);

        // 逆伽马分布参数
        document.getElementById("invgamma-alpha").addEventListener("input", updateChart);
        document.getElementById("invgamma-beta").addEventListener("input", updateChart);
      }

      // 选择分布
      function selectDistribution(distribution) {
        currentDistribution = distribution;

        // 更新按钮样式
        document.querySelectorAll(".distribution-btn").forEach((btn) => {
          btn.className =
            "distribution-btn px-4 py-3 bg-gray-700 text-white font-bold rounded-lg hover:bg-neon-blue transition-all duration-300";
        });

        const colors = {
          normal: "bg-neon-blue",
          poisson: "bg-neon-purple",
          exponential: "bg-neon-green",
          binomial: "bg-neon-orange",
          uniform: "bg-neon-pink",
          chisquare: "bg-neon-blue",
          beta: "bg-neon-purple",
          t: "bg-neon-green",
          gamma: "bg-neon-orange",
          f: "bg-neon-pink",
          dirichlet: "bg-neon-cyan",
          weibull: "bg-neon-yellow",
          lognormal: "bg-neon-red",
          pareto: "bg-neon-indigo",
          laplace: "bg-neon-teal",
          invgamma: "bg-neon-lime",
        };

        document.getElementById(
          `btn-${distribution}`
        ).className = `distribution-btn px-4 py-3 ${colors[distribution]} text-dark-bg font-bold rounded-lg hover:${colors[distribution]}/80 transition-all duration-300`;

        // 隐藏所有参数面板
        document.querySelectorAll(".distribution-params").forEach((panel) => {
          panel.classList.add("hidden");
        });

        // 显示当前分布的参数面板
        document
          .getElementById(`${distribution}-params`)
          .classList.remove("hidden");

        // 更新图表标题
        const titles = {
          normal: "正态分布",
          poisson: "泊松分布",
          exponential: "指数分布",
          binomial: "二项分布",
          uniform: "均匀分布",
          chisquare: "卡方分布",
          beta: "贝塔分布",
          t: "t分布",
          gamma: "伽马分布",
          f: "F分布",
          dirichlet: "狄利克雷分布",
          weibull: "威布尔分布",
          lognormal: "对数正态分布",
          pareto: "帕累托分布",
          laplace: "拉普拉斯分布",
          invgamma: "逆伽马分布",
        };
        document.getElementById("chart-title").textContent =
          titles[distribution];

        // 更新分布信息
        updateDistributionInfo(distribution);

        // 更新图表
        updateChart();
      }

      // 更新分布信息
      function updateDistributionInfo(distribution) {
        const info = {
          normal: {
            description:
              "正态分布是最重要的连续概率分布，具有钟形曲线的特征。它在自然界和社会现象中广泛存在，是中心极限定理的基础。",
            applications: "身高、体重、测量误差、考试成绩等。",
            properties: "对称性、68-95-99.7规则、可加性等。",
          },
          poisson: {
            description:
              "泊松分布描述单位时间内随机事件发生次数的概率分布。当二项分布的n很大、p很小时，可用泊松分布近似。",
            applications: "电话呼叫次数、交通事故、放射性衰变等。",
            properties: "离散性、期望等于方差、可加性等。",
          },
          exponential: {
            description:
              "指数分布描述事件间隔时间的概率分布，具有无记忆性。它是泊松过程中事件间隔时间的分布。",
            applications: "设备寿命、服务时间、等待时间等。",
            properties: "无记忆性、单调递减、与泊松分布的关系等。",
          },
          binomial: {
            description:
              "二项分布描述n次独立伯努利试验中成功次数的概率分布。它是最基本的离散概率分布之一。",
            applications: "质量检验、市场调研、医学试验等。",
            properties: "离散性、对称性（p=0.5时）、正态近似等。",
          },
          uniform: {
            description:
              "均匀分布是最简单的连续概率分布，在指定区间内所有值等概率出现。它常用作随机数生成的基础。",
            applications: "随机数生成、蒙特卡罗模拟、概率建模等。",
            properties: "等概率性、有界性、线性变换不变性等。",
          },
          chisquare: {
            description:
              "卡方分布由k个独立标准正态随机变量的平方和构成。它在假设检验和置信区间估计中有重要应用。",
            applications: "拟合优度检验、独立性检验、方差估计等。",
            properties: "非负性、右偏性、可加性等。",
          },
          beta: {
            description:
              "贝塔分布是定义在[0,1]区间上的连续概率分布，由两个形状参数α和β控制。它常用于建模比例和概率。",
            applications: "贝叶斯统计、项目管理、质量控制等。",
            properties: "有界性、形状多样性、共轭先验等。",
          },
          t: {
            description:
              "学生t分布用于小样本统计推断，当样本量增大时趋近于标准正态分布。它在假设检验中应用广泛。",
            applications: "小样本均值检验、置信区间估计、回归分析等。",
            properties: "对称性、厚尾性、渐近正态性等。",
          },
          gamma: {
            description:
              "伽马分布是指数分布和卡方分布的推广，常用于建模等待时间和生存分析。它具有丰富的形状变化。",
            applications: "可靠性分析、排队论、生存分析等。",
            properties: "非负性、形状参数控制、可加性等。",
          },
          f: {
            description:
              "F分布是两个卡方分布的比值分布，广泛用于方差分析和回归分析中的假设检验。",
            applications: "方差分析、回归显著性检验、模型比较等。",
            properties: "非负性、右偏性、与卡方分布的关系等。",
          },
          dirichlet: {
            description:
              "狄利克雷分布是多元贝塔分布的推广，定义在单纯形上。它是多项分布的共轭先验分布，在贝叶斯统计中应用广泛。",
            applications: "主题建模、文本分析、贝叶斯推断等。",
            properties: "多元性、共轭先验、单纯形约束等。",
          },
          weibull: {
            description:
              "威布尔分布广泛用于可靠性分析和生存分析，能够建模各种失效模式。它包含指数分布作为特例。",
            applications: "可靠性工程、生存分析、风速建模等。",
            properties: "形状参数控制、包含指数分布、危险率函数等。",
          },
          lognormal: {
            description:
              "对数正态分布描述其对数服从正态分布的随机变量。它常用于建模正值且右偏的数据。",
            applications: "收入分布、股价建模、粒径分析等。",
            properties: "正值性、右偏性、几何平均等。",
          },
          pareto: {
            description:
              "帕累托分布也称为幂律分布，常用于描述财富分布、城市规模等现象。它体现了80-20法则。",
            applications: "财富分布、网络分析、风险管理等。",
            properties: "重尾性、幂律特征、80-20法则等。",
          },
          laplace: {
            description:
              "拉普拉斯分布也称为双指数分布，具有对称的指数衰减特征。它在信号处理和机器学习中有重要应用。",
            applications: "信号处理、图像去噪、稀疏建模等。",
            properties: "对称性、双指数衰减、L1正则化等。",
          },
          invgamma: {
            description:
              "逆伽马分布是伽马分布的倒数分布，常用作方差参数的先验分布。它在贝叶斯统计中应用广泛。",
            applications: "贝叶斯推断、方差建模、层次模型等。",
            properties: "正值性、重尾性、共轭先验等。",
          },
        };

        const currentInfo = info[distribution];
        const infoElement = document.getElementById("distribution-info");
        infoElement.innerHTML = `
                <p><strong>${
                  document.getElementById("chart-title").textContent
                }</strong>${currentInfo.description}</p>
                <p class="mt-2"><strong>应用场景：</strong>${
                  currentInfo.applications
                }</p>
                <p class="mt-2"><strong>特性：</strong>${
                  currentInfo.properties
                }</p>
            `;
      }

      // 更新图表
      function updateChart() {
        const data = generateDistributionData();

        currentChart.data.labels = data.x;
        currentChart.data.datasets[0].data = data.y;
        currentChart.data.datasets[0].label = showPDF ? "PDF" : "CDF";

        // 更新颜色
        const colors = {
          normal: "#00f3ff",
          poisson: "#bf00ff",
          exponential: "#00ff66",
          binomial: "#ff6600",
          uniform: "#ff0080",
          chisquare: "#00f3ff",
          beta: "#bf00ff",
          t: "#00ff66",
          gamma: "#ff6600",
          f: "#ff0080",
          dirichlet: "#00f3ff",
          weibull: "#ffff00",
          lognormal: "#ff0040",
          pareto: "#6366f1",
          laplace: "#14b8a6",
          invgamma: "#84cc16",
        };

        currentChart.data.datasets[0].borderColor = colors[currentDistribution];
        currentChart.data.datasets[0].backgroundColor =
          colors[currentDistribution] + "20";

        currentChart.update();

        // 更新参数显示
        updateParameterDisplays();

        // 更新统计信息
        updateStatistics();
      }

      // 生成分布数据
      function generateDistributionData() {
        switch (currentDistribution) {
          case "normal":
            return generateNormalData();
          case "poisson":
            return generatePoissonData();
          case "exponential":
            return generateExponentialData();
          case "binomial":
            return generateBinomialData();
          case "uniform":
            return generateUniformData();
          case "chisquare":
            return generateChiSquareData();
          case "beta":
            return generateBetaData();
          case "t":
            return generateTData();
          case "gamma":
            return generateGammaData();
          case "f":
            return generateFData();
          case "dirichlet":
            return generateDirichletData();
          case "weibull":
            return generateWeibullData();
          case "lognormal":
            return generateLogNormalData();
          case "pareto":
            return generateParetoData();
          case "laplace":
            return generateLaplaceData();
          case "invgamma":
            return generateInvGammaData();
          default:
            return { x: [], y: [] };
        }
      }

      // 生成正态分布数据
      function generateNormalData() {
        const mean = parseFloat(document.getElementById("normal-mean").value);
        const std = parseFloat(document.getElementById("normal-std").value);

        const x = [];
        const y = [];

        for (let i = -6; i <= 6; i += 0.1) {
          const xVal = mean + i * std;
          x.push(xVal.toFixed(2));

          if (showPDF) {
            const yVal =
              (1 / (std * Math.sqrt(2 * Math.PI))) *
              Math.exp(-0.5 * Math.pow((xVal - mean) / std, 2));
            y.push(yVal);
          } else {
            // CDF approximation using error function
            const z = (xVal - mean) / std;
            const yVal = 0.5 * (1 + erf(z / Math.sqrt(2)));
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成泊松分布数据
      function generatePoissonData() {
        const lambda = parseFloat(
          document.getElementById("poisson-lambda").value
        );

        const x = [];
        const y = [];

        const maxK = Math.min(30, lambda + 4 * Math.sqrt(lambda));

        if (showPDF) {
          for (let k = 0; k <= maxK; k++) {
            x.push(k.toString());
            const yVal =
              (Math.pow(lambda, k) * Math.exp(-lambda)) / factorial(k);
            y.push(yVal);
          }
        } else {
          let cumulativeProb = 0;
          for (let k = 0; k <= maxK; k++) {
            x.push(k.toString());
            const prob =
              (Math.pow(lambda, k) * Math.exp(-lambda)) / factorial(k);
            cumulativeProb += prob;
            y.push(cumulativeProb);
          }
        }

        return { x, y };
      }

      // 生成指数分布数据
      function generateExponentialData() {
        const lambda = parseFloat(
          document.getElementById("exponential-lambda").value
        );

        const x = [];
        const y = [];

        for (let i = 0; i <= 5; i += 0.1) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = lambda * Math.exp(-lambda * i);
            y.push(yVal);
          } else {
            const yVal = 1 - Math.exp(-lambda * i);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成二项分布数据
      function generateBinomialData() {
        const n = parseInt(document.getElementById("binomial-n").value);
        const p = parseFloat(document.getElementById("binomial-p").value);

        const x = [];
        const y = [];

        if (showPDF) {
          for (let k = 0; k <= n; k++) {
            x.push(k.toString());
            const yVal =
              binomialCoeff(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);
            y.push(yVal);
          }
        } else {
          let cumulativeProb = 0;
          for (let k = 0; k <= n; k++) {
            x.push(k.toString());
            const prob =
              binomialCoeff(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);
            cumulativeProb += prob;
            y.push(cumulativeProb);
          }
        }

        return { x, y };
      }

      // 生成均匀分布数据
      function generateUniformData() {
        const a = parseFloat(document.getElementById("uniform-a").value);
        const b = parseFloat(document.getElementById("uniform-b").value);

        const x = [];
        const y = [];

        const range = b - a;
        const step = range / 100;

        for (let i = a - range * 0.2; i <= b + range * 0.2; i += step) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = i >= a && i <= b ? 1 / range : 0;
            y.push(yVal);
          } else {
            let yVal;
            if (i < a) yVal = 0;
            else if (i > b) yVal = 1;
            else yVal = (i - a) / range;
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成卡方分布数据
      function generateChiSquareData() {
        const k = parseInt(document.getElementById("chisquare-k").value);

        const x = [];
        const y = [];

        for (let i = 0.1; i <= 20; i += 0.2) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = chiSquarePDF(i, k);
            y.push(yVal);
          } else {
            // CDF approximation (simplified)
            const yVal = incompleteGamma(k / 2, i / 2) / gamma(k / 2);
            y.push(Math.min(1, Math.max(0, yVal)));
          }
        }

        return { x, y };
      }

      // 生成贝塔分布数据
      function generateBetaData() {
        const alpha = parseFloat(document.getElementById("beta-alpha").value);
        const beta = parseFloat(document.getElementById("beta-beta").value);

        const x = [];
        const y = [];

        for (let i = 0.01; i <= 0.99; i += 0.01) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = betaPDF(i, alpha, beta);
            y.push(yVal);
          } else {
            const yVal = betaCDF(i, alpha, beta);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成t分布数据
      function generateTData() {
        const df = parseInt(document.getElementById("t-df").value);

        const x = [];
        const y = [];

        for (let i = -5; i <= 5; i += 0.1) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = tPDF(i, df);
            y.push(yVal);
          } else {
            const yVal = tCDF(i, df);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成伽马分布数据
      function generateGammaData() {
        const alpha = parseFloat(document.getElementById("gamma-alpha").value);
        const beta = parseFloat(document.getElementById("gamma-beta").value);

        const x = [];
        const y = [];

        for (let i = 0.1; i <= 20; i += 0.2) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = gammaPDF(i, alpha, beta);
            y.push(yVal);
          } else {
            const yVal = gammaCDF(i, alpha, beta);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成F分布数据
      function generateFData() {
        const df1 = parseInt(document.getElementById("f-df1").value);
        const df2 = parseInt(document.getElementById("f-df2").value);

        const x = [];
        const y = [];

        for (let i = 0.1; i <= 10; i += 0.1) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = fPDF(i, df1, df2);
            y.push(yVal);
          } else {
            const yVal = fCDF(i, df1, df2);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成狄利克雷分布数据（显示边际分布）
      function generateDirichletData() {
        const alpha1 = parseFloat(document.getElementById("dirichlet-alpha1").value);
        const alpha2 = parseFloat(document.getElementById("dirichlet-alpha2").value);
        const alpha3 = parseFloat(document.getElementById("dirichlet-alpha3").value);

        const x = [];
        const y = [];

        // 显示第一个分量的边际分布（Beta分布）
        for (let i = 0.01; i <= 0.99; i += 0.01) {
          x.push(i.toFixed(3));

          if (showPDF) {
            const yVal = dirichletMarginalPDF(i, alpha1, alpha2, alpha3);
            y.push(yVal);
          } else {
            const yVal = dirichletMarginalCDF(i, alpha1, alpha2, alpha3);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成威布尔分布数据
      function generateWeibullData() {
        const k = parseFloat(document.getElementById("weibull-k").value);
        const lambda = parseFloat(document.getElementById("weibull-lambda").value);

        const x = [];
        const y = [];

        for (let i = 0.1; i <= 10; i += 0.1) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = weibullPDF(i, k, lambda);
            y.push(yVal);
          } else {
            const yVal = weibullCDF(i, k, lambda);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成对数正态分布数据
      function generateLogNormalData() {
        const mu = parseFloat(document.getElementById("lognormal-mu").value);
        const sigma = parseFloat(document.getElementById("lognormal-sigma").value);

        const x = [];
        const y = [];

        for (let i = 0.1; i <= 20; i += 0.2) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = logNormalPDF(i, mu, sigma);
            y.push(yVal);
          } else {
            const yVal = logNormalCDF(i, mu, sigma);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成帕累托分布数据
      function generateParetoData() {
        const alpha = parseFloat(document.getElementById("pareto-alpha").value);
        const xm = parseFloat(document.getElementById("pareto-xm").value);

        const x = [];
        const y = [];

        for (let i = xm; i <= xm + 20; i += 0.2) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = paretoPDF(i, alpha, xm);
            y.push(yVal);
          } else {
            const yVal = paretoCDF(i, alpha, xm);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成拉普拉斯分布数据
      function generateLaplaceData() {
        const mu = parseFloat(document.getElementById("laplace-mu").value);
        const b = parseFloat(document.getElementById("laplace-b").value);

        const x = [];
        const y = [];

        for (let i = mu - 10; i <= mu + 10; i += 0.2) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = laplacePDF(i, mu, b);
            y.push(yVal);
          } else {
            const yVal = laplaceCDF(i, mu, b);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 生成逆伽马分布数据
      function generateInvGammaData() {
        const alpha = parseFloat(document.getElementById("invgamma-alpha").value);
        const beta = parseFloat(document.getElementById("invgamma-beta").value);

        const x = [];
        const y = [];

        for (let i = 0.1; i <= 10; i += 0.1) {
          x.push(i.toFixed(2));

          if (showPDF) {
            const yVal = invGammaPDF(i, alpha, beta);
            y.push(yVal);
          } else {
            const yVal = invGammaCDF(i, alpha, beta);
            y.push(yVal);
          }
        }

        return { x, y };
      }

      // 更新参数显示
      function updateParameterDisplays() {
        // 正态分布
        document.getElementById("normal-mean-value").textContent =
          document.getElementById("normal-mean").value;
        document.getElementById("normal-std-value").textContent =
          document.getElementById("normal-std").value;

        // 泊松分布
        document.getElementById("poisson-lambda-value").textContent =
          document.getElementById("poisson-lambda").value;

        // 指数分布
        document.getElementById("exponential-lambda-value").textContent =
          document.getElementById("exponential-lambda").value;

        // 二项分布
        document.getElementById("binomial-n-value").textContent =
          document.getElementById("binomial-n").value;
        document.getElementById("binomial-p-value").textContent =
          document.getElementById("binomial-p").value;

        // 均匀分布
        document.getElementById("uniform-a-value").textContent =
          document.getElementById("uniform-a").value;
        document.getElementById("uniform-b-value").textContent =
          document.getElementById("uniform-b").value;

        // 卡方分布
        document.getElementById("chisquare-k-value").textContent =
          document.getElementById("chisquare-k").value;

        // 贝塔分布
        document.getElementById("beta-alpha-value").textContent =
          document.getElementById("beta-alpha").value;
        document.getElementById("beta-beta-value").textContent =
          document.getElementById("beta-beta").value;

        // t分布
        document.getElementById("t-df-value").textContent =
          document.getElementById("t-df").value;

        // 伽马分布
        document.getElementById("gamma-alpha-value").textContent =
          document.getElementById("gamma-alpha").value;
        document.getElementById("gamma-beta-value").textContent =
          document.getElementById("gamma-beta").value;

        // F分布
        document.getElementById("f-df1-value").textContent =
          document.getElementById("f-df1").value;
        document.getElementById("f-df2-value").textContent =
          document.getElementById("f-df2").value;

        // 狄利克雷分布
        document.getElementById("dirichlet-alpha1-value").textContent =
          document.getElementById("dirichlet-alpha1").value;
        document.getElementById("dirichlet-alpha2-value").textContent =
          document.getElementById("dirichlet-alpha2").value;
        document.getElementById("dirichlet-alpha3-value").textContent =
          document.getElementById("dirichlet-alpha3").value;

        // 威布尔分布
        document.getElementById("weibull-k-value").textContent =
          document.getElementById("weibull-k").value;
        document.getElementById("weibull-lambda-value").textContent =
          document.getElementById("weibull-lambda").value;

        // 对数正态分布
        document.getElementById("lognormal-mu-value").textContent =
          document.getElementById("lognormal-mu").value;
        document.getElementById("lognormal-sigma-value").textContent =
          document.getElementById("lognormal-sigma").value;

        // 帕累托分布
        document.getElementById("pareto-alpha-value").textContent =
          document.getElementById("pareto-alpha").value;
        document.getElementById("pareto-xm-value").textContent =
          document.getElementById("pareto-xm").value;

        // 拉普拉斯分布
        document.getElementById("laplace-mu-value").textContent =
          document.getElementById("laplace-mu").value;
        document.getElementById("laplace-b-value").textContent =
          document.getElementById("laplace-b").value;

        // 逆伽马分布
        document.getElementById("invgamma-alpha-value").textContent =
          document.getElementById("invgamma-alpha").value;
        document.getElementById("invgamma-beta-value").textContent =
          document.getElementById("invgamma-beta").value;
      }

      // 更新统计信息
      function updateStatistics() {
        let expectation, variance, stdDev;

        switch (currentDistribution) {
          case "normal":
            const mean = parseFloat(
              document.getElementById("normal-mean").value
            );
            const std = parseFloat(document.getElementById("normal-std").value);
            expectation = mean;
            variance = std * std;
            stdDev = std;
            break;

          case "poisson":
            const lambda = parseFloat(
              document.getElementById("poisson-lambda").value
            );
            expectation = lambda;
            variance = lambda;
            stdDev = Math.sqrt(lambda);
            break;

          case "exponential":
            const expLambda = parseFloat(
              document.getElementById("exponential-lambda").value
            );
            expectation = 1 / expLambda;
            variance = 1 / (expLambda * expLambda);
            stdDev = 1 / expLambda;
            break;

          case "binomial":
            const n = parseInt(document.getElementById("binomial-n").value);
            const p = parseFloat(document.getElementById("binomial-p").value);
            expectation = n * p;
            variance = n * p * (1 - p);
            stdDev = Math.sqrt(variance);
            break;

          case "uniform":
            const a = parseFloat(document.getElementById("uniform-a").value);
            const b = parseFloat(document.getElementById("uniform-b").value);
            expectation = (a + b) / 2;
            variance = ((b - a) * (b - a)) / 12;
            stdDev = Math.sqrt(variance);
            break;

          case "chisquare":
            const k = parseInt(document.getElementById("chisquare-k").value);
            expectation = k;
            variance = 2 * k;
            stdDev = Math.sqrt(2 * k);
            break;

          case "beta":
            const betaAlpha = parseFloat(
              document.getElementById("beta-alpha").value
            );
            const betaBeta = parseFloat(
              document.getElementById("beta-beta").value
            );
            expectation = betaAlpha / (betaAlpha + betaBeta);
            variance =
              (betaAlpha * betaBeta) /
              ((betaAlpha + betaBeta) *
                (betaAlpha + betaBeta) *
                (betaAlpha + betaBeta + 1));
            stdDev = Math.sqrt(variance);
            break;

          case "t":
            const tDf = parseInt(document.getElementById("t-df").value);
            expectation = tDf > 1 ? 0 : "未定义";
            variance = tDf > 2 ? tDf / (tDf - 2) : "未定义";
            stdDev =
              typeof variance === "number" ? Math.sqrt(variance) : "未定义";
            break;

          case "gamma":
            const gammaAlpha = parseFloat(
              document.getElementById("gamma-alpha").value
            );
            const gammaBeta = parseFloat(
              document.getElementById("gamma-beta").value
            );
            expectation = gammaAlpha / gammaBeta;
            variance = gammaAlpha / (gammaBeta * gammaBeta);
            stdDev = Math.sqrt(variance);
            break;

          case "f":
            const fDf1 = parseInt(document.getElementById("f-df1").value);
            const fDf2 = parseInt(document.getElementById("f-df2").value);
            expectation = fDf2 > 2 ? fDf2 / (fDf2 - 2) : "未定义";
            variance =
              fDf2 > 4
                ? (2 * fDf2 * fDf2 * (fDf1 + fDf2 - 2)) /
                  (fDf1 * (fDf2 - 2) * (fDf2 - 2) * (fDf2 - 4))
                : "未定义";
            stdDev =
              typeof variance === "number" ? Math.sqrt(variance) : "未定义";
            break;

          case "dirichlet":
            const dirAlpha1 = parseFloat(document.getElementById("dirichlet-alpha1").value);
            const dirAlpha2 = parseFloat(document.getElementById("dirichlet-alpha2").value);
            const dirAlpha3 = parseFloat(document.getElementById("dirichlet-alpha3").value);
            const alphaSum = dirAlpha1 + dirAlpha2 + dirAlpha3;
            expectation = dirAlpha1 / alphaSum; // 第一个分量的期望
            variance = (dirAlpha1 * (alphaSum - dirAlpha1)) / (alphaSum * alphaSum * (alphaSum + 1));
            stdDev = Math.sqrt(variance);
            break;

          case "weibull":
            const weibullK = parseFloat(document.getElementById("weibull-k").value);
            const weibullLambda = parseFloat(document.getElementById("weibull-lambda").value);
            expectation = weibullLambda * gamma(1 + 1/weibullK);
            variance = weibullLambda * weibullLambda * (gamma(1 + 2/weibullK) - Math.pow(gamma(1 + 1/weibullK), 2));
            stdDev = Math.sqrt(variance);
            break;

          case "lognormal":
            const lnMu = parseFloat(document.getElementById("lognormal-mu").value);
            const lnSigma = parseFloat(document.getElementById("lognormal-sigma").value);
            expectation = Math.exp(lnMu + lnSigma * lnSigma / 2);
            variance = (Math.exp(lnSigma * lnSigma) - 1) * Math.exp(2 * lnMu + lnSigma * lnSigma);
            stdDev = Math.sqrt(variance);
            break;

          case "pareto":
            const paretoAlpha = parseFloat(document.getElementById("pareto-alpha").value);
            const paretoXm = parseFloat(document.getElementById("pareto-xm").value);
            expectation = paretoAlpha > 1 ? (paretoAlpha * paretoXm) / (paretoAlpha - 1) : "未定义";
            variance = paretoAlpha > 2 ? (paretoXm * paretoXm * paretoAlpha) / ((paretoAlpha - 1) * (paretoAlpha - 1) * (paretoAlpha - 2)) : "未定义";
            stdDev = typeof variance === "number" ? Math.sqrt(variance) : "未定义";
            break;

          case "laplace":
            const laplaceMu = parseFloat(document.getElementById("laplace-mu").value);
            const laplaceB = parseFloat(document.getElementById("laplace-b").value);
            expectation = laplaceMu;
            variance = 2 * laplaceB * laplaceB;
            stdDev = Math.sqrt(variance);
            break;

          case "invgamma":
            const invGammaAlpha = parseFloat(document.getElementById("invgamma-alpha").value);
            const invGammaBeta = parseFloat(document.getElementById("invgamma-beta").value);
            expectation = invGammaAlpha > 1 ? invGammaBeta / (invGammaAlpha - 1) : "未定义";
            variance = invGammaAlpha > 2 ? (invGammaBeta * invGammaBeta) / ((invGammaAlpha - 1) * (invGammaAlpha - 1) * (invGammaAlpha - 2)) : "未定义";
            stdDev = typeof variance === "number" ? Math.sqrt(variance) : "未定义";
            break;
        }

        document.getElementById("expectation").textContent =
          typeof expectation === "number"
            ? expectation.toFixed(2)
            : expectation;
        document.getElementById("variance").textContent =
          typeof variance === "number" ? variance.toFixed(2) : variance;
        document.getElementById("std-dev").textContent =
          typeof stdDev === "number" ? stdDev.toFixed(2) : stdDev;
      }

      // 切换PDF/CDF
      function togglePDF() {
        showPDF = true;
        document.getElementById("pdf-btn").className =
          "px-4 py-2 bg-neon-blue text-dark-bg font-bold rounded-md hover:bg-neon-blue/80 transition-all duration-300";
        document.getElementById("cdf-btn").className =
          "px-4 py-2 bg-gray-700 text-white font-bold rounded-md hover:bg-neon-blue transition-all duration-300";
        updateChart();
      }

      function toggleCDF() {
        showPDF = false;
        document.getElementById("cdf-btn").className =
          "px-4 py-2 bg-neon-blue text-dark-bg font-bold rounded-md hover:bg-neon-blue/80 transition-all duration-300";
        document.getElementById("pdf-btn").className =
          "px-4 py-2 bg-gray-700 text-white font-bold rounded-md hover:bg-neon-blue transition-all duration-300";
        updateChart();
      }

      // 显示特定分布（从概览卡片调用）
      function showDistribution(distribution) {
        // 滚动到交互区域
        document
          .getElementById("interactive-exploration")
          .scrollIntoView({ behavior: "smooth" });

        // 延迟选择分布，确保滚动完成
        setTimeout(() => {
          selectDistribution(distribution);
        }, 500);
      }

      // 数学函数
      function factorial(n) {
        if (n <= 1) return 1;
        let result = 1;
        for (let i = 2; i <= n; i++) {
          result *= i;
        }
        return result;
      }

      function binomialCoeff(n, k) {
        if (k > n) return 0;
        if (k === 0 || k === n) return 1;

        let result = 1;
        for (let i = 0; i < k; i++) {
          result *= (n - i) / (i + 1);
        }
        return result;
      }

      function erf(x) {
        // Approximation of error function
        const a1 = 0.254829592;
        const a2 = -0.284496736;
        const a3 = 1.421413741;
        const a4 = -1.453152027;
        const a5 = 1.061405429;
        const p = 0.3275911;

        const sign = x >= 0 ? 1 : -1;
        x = Math.abs(x);

        const t = 1.0 / (1.0 + p * x);
        const y =
          1.0 -
          ((((a5 * t + a4) * t + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);

        return sign * y;
      }

      function gamma(z) {
        // Stirling's approximation for gamma function
        if (z < 0.5) {
          return Math.PI / (Math.sin(Math.PI * z) * gamma(1 - z));
        }

        z -= 1;
        let x = 0.99999999999980993;
        const coefficients = [
          676.5203681218851, -1259.1392167224028, 771.32342877765313,
          -176.61502916214059, 12.507343278686905, -0.13857109526572012,
          9.9843695780195716e-6, 1.5056327351493116e-7,
        ];

        for (let i = 0; i < coefficients.length; i++) {
          x += coefficients[i] / (z + i + 1);
        }

        const t = z + coefficients.length - 0.5;
        const sqrt2pi = Math.sqrt(2 * Math.PI);

        return sqrt2pi * Math.pow(t, z + 0.5) * Math.exp(-t) * x;
      }

      function incompleteGamma(s, x) {
        // 改进的不完全伽马函数近似
        if (x === 0) return 0;
        if (s === 0) return 1;
        if (x < 0) return 0;
        
        // 对于大的x值，使用连分数展开更稳定
        if (x > s + 1) {
          // 使用连分数展开计算上不完全伽马函数，然后转换为下不完全伽马函数
          const upperGamma = upperIncompleteGammaCF(s, x);
          return gamma(s) - upperGamma;
        }

        // 对于小的x值，使用级数展开
        let sum = 1;
        let term = 1;

        for (let n = 1; n < 200; n++) {
          term *= x / (s + n - 1);
          sum += term;
          if (Math.abs(term) < 1e-12) break;
        }

        const result = Math.pow(x, s) * Math.exp(-x) * sum;
        return Math.max(0, Math.min(result, gamma(s))); // 确保结果在合理范围内
      }
      
      // 使用连分数展开计算上不完全伽马函数
      function upperIncompleteGammaCF(s, x) {
        if (x === 0) return gamma(s);
        
        // 连分数展开
        let a = 1 - s;
        let b = a + x + 1;
        let c = 1e30;
        let d = 1 / b;
        let h = d;
        
        for (let i = 1; i <= 200; i++) {
          const an = -i * (i - s);
          a += 2;
          b += 2;
          d = an * d + b;
          if (Math.abs(d) < 1e-30) d = 1e-30;
          c = b + an / c;
          if (Math.abs(c) < 1e-30) c = 1e-30;
          d = 1 / d;
          const del = d * c;
          h *= del;
          if (Math.abs(del - 1) < 1e-12) break;
        }
        
        return Math.exp(-x + s * Math.log(x) - logGamma(s)) * h;
      }
      
      // 对数伽马函数（更数值稳定）
      function logGamma(z) {
        if (z < 0.5) {
          return Math.log(Math.PI) - Math.log(Math.sin(Math.PI * z)) - logGamma(1 - z);
        }
        
        z -= 1;
        const g = 7;
        const c = [0.99999999999980993, 676.5203681218851, -1259.1392167224028,
                   771.32342877765313, -176.61502916214059, 12.507343278686905,
                   -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7];
        
        let x = c[0];
        for (let i = 1; i < g + 2; i++) {
          x += c[i] / (z + i);
        }
        
        const t = z + g + 0.5;
        return 0.5 * Math.log(2 * Math.PI) + (z + 0.5) * Math.log(t) - t + Math.log(x);
      }

      function chiSquarePDF(x, k) {
        if (x <= 0) return 0;

        const numerator = Math.pow(x, k / 2 - 1) * Math.exp(-x / 2);
        const denominator = Math.pow(2, k / 2) * gamma(k / 2);

        return numerator / denominator;
      }

      // 贝塔分布PDF
      function betaPDF(x, alpha, beta) {
        if (x <= 0 || x >= 1) return 0;

        const numerator = Math.pow(x, alpha - 1) * Math.pow(1 - x, beta - 1);
        const denominator = (gamma(alpha) * gamma(beta)) / gamma(alpha + beta);

        return numerator / denominator;
      }

      // 贝塔分布CDF (简化近似)
      function betaCDF(x, alpha, beta) {
        if (x <= 0) return 0;
        if (x >= 1) return 1;

        // 使用不完全贝塔函数的简化近似
        return incompleteBeta(x, alpha, beta);
      }

      // t分布PDF
      function tPDF(x, df) {
        const numerator = gamma((df + 1) / 2);
        const denominator =
          Math.sqrt(df * Math.PI) *
          gamma(df / 2) *
          Math.pow(1 + (x * x) / df, (df + 1) / 2);

        return numerator / denominator;
      }

      // t分布CDF (简化近似)
      function tCDF(x, df) {
        if (df === 1) {
          return 0.5 + Math.atan(x) / Math.PI;
        }

        // 使用正态分布近似 (当df较大时)
        if (df > 30) {
          return 0.5 * (1 + erf(x / Math.sqrt(2)));
        }

        // 简化的t分布CDF近似
        const t = x / Math.sqrt(df);
        return 0.5 + 0.5 * erf(t / Math.sqrt(2));
      }

      // 伽马分布PDF
      function gammaPDF(x, alpha, beta) {
        if (x <= 0) return 0;

        const numerator =
          Math.pow(beta, alpha) * Math.pow(x, alpha - 1) * Math.exp(-beta * x);
        const denominator = gamma(alpha);

        return numerator / denominator;
      }

      // 伽马分布CDF
      function gammaCDF(x, alpha, beta) {
        if (x <= 0) return 0;

        return incompleteGamma(alpha, beta * x) / gamma(alpha);
      }

      // F分布PDF
      function fPDF(x, df1, df2) {
        if (x <= 0) return 0;

        const numerator =
          gamma((df1 + df2) / 2) *
          Math.pow(df1 / df2, df1 / 2) *
          Math.pow(x, df1 / 2 - 1);
        const denominator =
          gamma(df1 / 2) *
          gamma(df2 / 2) *
          Math.pow(1 + (df1 / df2) * x, (df1 + df2) / 2);

        return numerator / denominator;
      }

      // F分布CDF (简化近似)
      function fCDF(x, df1, df2) {
        if (x <= 0) return 0;

        // 使用不完全贝塔函数的关系
        const y = (df1 * x) / (df1 * x + df2);
        return incompleteBeta(y, df1 / 2, df2 / 2);
      }

      // 不完全贝塔函数 (改进近似)
      function incompleteBeta(x, a, b) {
        if (x <= 0) return 0;
        if (x >= 1) return 1;

        // 使用贝塔函数的积分近似
        const betaAB = (gamma(a) * gamma(b)) / gamma(a + b);
        
        // 使用辛普森积分法近似
        const n = 100;
        const h = x / n;
        let sum = Math.pow(0, a - 1) * Math.pow(1 - 0, b - 1) + 
                  Math.pow(x, a - 1) * Math.pow(1 - x, b - 1);
        
        for (let i = 1; i < n; i++) {
          const t = i * h;
          const weight = (i % 2 === 0) ? 2 : 4;
          sum += weight * Math.pow(t, a - 1) * Math.pow(1 - t, b - 1);
        }
        
        const result = (h / 3) * sum / betaAB;
        return Math.min(1, Math.max(0, result));
      }

      // 威布尔分布PDF
      function weibullPDF(x, k, lambda) {
        if (x <= 0) return 0;

        return (k / lambda) * Math.pow(x / lambda, k - 1) * Math.exp(-Math.pow(x / lambda, k));
      }

      // 威布尔分布CDF
      function weibullCDF(x, k, lambda) {
        if (x <= 0) return 0;

        return 1 - Math.exp(-Math.pow(x / lambda, k));
      }

      // 对数正态分布PDF
      function logNormalPDF(x, mu, sigma) {
        if (x <= 0) return 0;

        const numerator = Math.exp(-Math.pow(Math.log(x) - mu, 2) / (2 * sigma * sigma));
        const denominator = x * sigma * Math.sqrt(2 * Math.PI);

        return numerator / denominator;
      }

      // 对数正态分布CDF
      function logNormalCDF(x, mu, sigma) {
        if (x <= 0) return 0;

        return 0.5 * (1 + erf((Math.log(x) - mu) / (sigma * Math.sqrt(2))));
      }

      // 帕累托分布PDF
      function paretoPDF(x, alpha, xm) {
        if (x < xm) return 0;

        return (alpha * Math.pow(xm, alpha)) / Math.pow(x, alpha + 1);
      }

      // 帕累托分布CDF
      function paretoCDF(x, alpha, xm) {
        if (x < xm) return 0;

        return 1 - Math.pow(xm / x, alpha);
      }

      // 拉普拉斯分布PDF
      function laplacePDF(x, mu, b) {
        return (1 / (2 * b)) * Math.exp(-Math.abs(x - mu) / b);
      }

      // 拉普拉斯分布CDF
      function laplaceCDF(x, mu, b) {
        if (x < mu) {
          return 0.5 * Math.exp((x - mu) / b);
        } else {
          return 1 - 0.5 * Math.exp(-(x - mu) / b);
        }
      }

      // 逆伽马分布PDF
      function invGammaPDF(x, alpha, beta) {
        if (x <= 0) return 0;

        const numerator = Math.pow(beta, alpha) * Math.pow(x, -alpha - 1) * Math.exp(-beta / x);
        const denominator = gamma(alpha);

        return numerator / denominator;
      }

      // 修正的逆伽马分布CDF（使用数值积分确保稳定性）
      function invGammaCDF(x, alpha, beta) {
        if (x <= 0) return 0;
        if (x < 1e-10) return 1; // 避免数值问题

        // 使用数值积分计算CDF
        const n = Math.min(1000, Math.max(100, Math.floor(x * 10))); // 动态步数
        let sum = 0;
        const step = x / n;

        // 使用辛普森法则进行更精确的数值积分
        for (let i = 0; i <= n; i++) {
          const currentX = i * step;
          const currentPDF = invGammaPDFForCDF(currentX, alpha, beta);
          
          if (i === 0 || i === n) {
            sum += currentPDF;
          } else if (i % 2 === 1) {
            sum += 4 * currentPDF;
          } else {
            sum += 2 * currentPDF;
          }
        }

        const result = (step / 3) * sum;
        return Math.max(0, Math.min(1, result));
      }

      // 辅助函数：用于CDF积分的PDF计算（处理边界情况）
      function invGammaPDFForCDF(x, alpha, beta) {
        if (x <= 0) return 0;
        
        // 在x接近0时的特殊处理
        if (x < 1e-10) {
          return 0; // PDF在0处为0
        }

        try {
          const logNumerator = alpha * Math.log(beta) - (alpha + 1) * Math.log(x) - beta / x;
          const logDenominator = logGamma(alpha);
          const logResult = logNumerator - logDenominator;
          
          // 避免数值溢出
          if (logResult > 700) return 0; // exp(700)会溢出
          if (logResult < -700) return 0; // 太小的值
          
          return Math.exp(logResult);
        } catch (e) {
          return 0; // 出错时返回0
        }
      }

      // 狄利克雷分布PDF (简化为二元情况)
      function dirichletPDF(x1, x2, alpha1, alpha2, alpha3) {
        // 对于三元狄利克雷分布，x3 = 1 - x1 - x2
        const x3 = 1 - x1 - x2;
        if (x1 <= 0 || x2 <= 0 || x3 <= 0) return 0;
        if (x1 + x2 >= 1) return 0;

        const numerator = gamma(alpha1 + alpha2 + alpha3) * 
                         Math.pow(x1, alpha1 - 1) * 
                         Math.pow(x2, alpha2 - 1) * 
                         Math.pow(x3, alpha3 - 1);
        const denominator = gamma(alpha1) * gamma(alpha2) * gamma(alpha3);

        return numerator / denominator;
      }

      // 狄利克雷分布边际PDF (单变量)
      function dirichletMarginalPDF(x, alpha1, alpha2, alpha3) {
        if (x <= 0 || x >= 1) return 0;

        // 第一个分量的边际分布是Beta(alpha1, alpha2 + alpha3)
        const a = alpha1;
        const b = alpha2 + alpha3;
        
        return betaPDF(x, a, b);
      }

      // 狄利克雷分布边际CDF (单变量)
      function dirichletMarginalCDF(x, alpha1, alpha2, alpha3) {
        if (x <= 0) return 0;
        if (x >= 1) return 1;

        // 第一个分量的边际分布是Beta(alpha1, alpha2 + alpha3)
        const a = alpha1;
        const b = alpha2 + alpha3;
        
        return betaCDF(x, a, b);
      }









      // 初始化页面
      // 翻页状态管理
      const flipStates = new Map(); // 存储每个卡片的翻页状态

      // 多页翻转卡片功能
      function initializeFlipCards() {
        // 初始化所有卡片
        document.querySelectorAll(".multi-page-card").forEach((card) => {
          const cardId = card.id;
          flipStates.set(cardId, { isFlipping: false, lastFlipTime: 0 });
          initializeCard(cardId);
        });

        // 为所有导航箭头添加事件监听
        document.querySelectorAll(".nav-arrow").forEach((arrow) => {
          arrow.addEventListener("click", function () {
            if (this.classList.contains("disabled")) return;

            const cardId = this.getAttribute("data-card");
            
            // 防抖检查
            if (isFlipping(cardId)) {
              console.log(`[DEBUG] 卡片 ${cardId} 正在翻页中，忽略点击`);
              return;
            }

            const card = document.getElementById(cardId);
            const currentPage = parseInt(
              card.getAttribute("data-current-page")
            );
            const totalPages = parseInt(card.getAttribute("data-total-pages"));

            if (this.classList.contains("prev-arrow")) {
              // 上一页
              if (currentPage > 1) {
                navigateToPage(cardId, currentPage - 1);
              }
            } else if (this.classList.contains("next-arrow")) {
              // 下一页
              if (currentPage < totalPages) {
                navigateToPage(cardId, currentPage + 1);
              }
            }
          });
        });

        // 为所有导航点添加事件监听
        document.querySelectorAll(".nav-dot").forEach((dot) => {
          dot.addEventListener("click", function () {
            const cardId = this.getAttribute("data-card");
            
            // 防抖检查
            if (isFlipping(cardId)) {
              console.log(`[DEBUG] 卡片 ${cardId} 正在翻页中，忽略点击`);
              return;
            }

            const targetPage = parseInt(this.getAttribute("data-page"));
            const currentPage = parseInt(
              document.getElementById(cardId).getAttribute("data-current-page")
            );

            if (targetPage !== currentPage) {
              navigateToPage(cardId, targetPage);
            }
          });
        });
      }

      // 检查是否正在翻页
      function isFlipping(cardId) {
        const state = flipStates.get(cardId);
        if (!state) return false;
        
        const now = Date.now();
        // 如果距离上次翻页不足1秒，认为还在翻页中
        if (state.isFlipping || (now - state.lastFlipTime < 1000)) {
          return true;
        }
        return false;
      }

      // 设置翻页状态
      function setFlippingState(cardId, isFlipping) {
        const state = flipStates.get(cardId) || { isFlipping: false, lastFlipTime: 0 };
        state.isFlipping = isFlipping;
        if (!isFlipping) {
          state.lastFlipTime = Date.now();
        }
        flipStates.set(cardId, state);
        console.log(`[DEBUG] 卡片 ${cardId} 翻页状态设置为: ${isFlipping}`);
      }

      // === 新增：重置页面transform属性 ===
      function resetPageTransforms(pageElement) {
        if (!pageElement) return;
        
        console.log('[DEBUG] 重置页面transform:', pageElement.dataset.page, '原transform:', pageElement.style.transform);
        console.log('[DEBUG] 重置前computed transform:', window.getComputedStyle(pageElement).transform);
        
        // 重置所有transform相关属性
        pageElement.style.transform = 'none';
        pageElement.style.webkitTransform = 'none';
        pageElement.style.mozTransform = 'none';
        pageElement.style.msTransform = 'none';
        pageElement.style.oTransform = 'none';
        
        // 重置3D相关属性
        pageElement.style.transformStyle = 'flat';
        pageElement.style.backfaceVisibility = 'visible';
        pageElement.style.webkitBackfaceVisibility = 'visible';
        
        // 强制重绘
        void pageElement.offsetWidth;
        
        console.log('[DEBUG] 重置后computed transform:', window.getComputedStyle(pageElement).transform);
        console.log('[DEBUG] 重置后3D变换相关属性检查:');
        console.log('[DEBUG] - transform-style:', window.getComputedStyle(pageElement).transformStyle);
        console.log('[DEBUG] - backface-visibility:', window.getComputedStyle(pageElement).backfaceVisibility);
        console.log('[DEBUG] - perspective:', window.getComputedStyle(pageElement).perspective);
      }

      // === 新增：检查页面可见性 ===
      function checkPageVisibility(pageElement, pageNumber) {
        if (!pageElement) return;
        
        const style = window.getComputedStyle(pageElement);
        const rect = pageElement.getBoundingClientRect();
        const isInViewport = rect.width > 0 && rect.height > 0 && style.display !== 'none';
        
        console.log(`[DEBUG] 页面 ${pageNumber} 可见性检查:`, {
          display: style.display,
          visibility: style.visibility,
          opacity: style.opacity,
          transform: style.transform,
          width: rect.width,
          height: rect.height,
          top: rect.top,
          left: rect.left,
          isInViewport: isInViewport,
          transformStyle: style.transformStyle,
          backfaceVisibility: style.backfaceVisibility
        });
        
        return isInViewport;
      }

      // 初始化卡片
      function initializeCard(cardId) {
        const card = document.getElementById(cardId);
        const container = card.querySelector(".card-container");
        const pages = card.querySelectorAll(".card-page");

        // 设置初始页面
        card.setAttribute("data-current-page", "1");

        // 隐藏所有页面
        pages.forEach((page) => {
          page.style.display = "none";
        });

        // 显示第一页
        card.querySelector('.card-page[data-page="1"]').style.display = "block";

        // 更新导航状态
        updateNavigation(cardId);
      }

      // 导航到指定页面
      function navigateToPage(cardId, targetPage) {
        console.log(`[DEBUG] 开始导航: ${cardId}, 目标页面: ${targetPage}`);
        
        // 设置翻页状态为正在翻页
        setFlippingState(cardId, true);
        
        const card = document.getElementById(cardId);
        const container = card.querySelector(".card-container");
        const pages = card.querySelectorAll(".card-page");
        const currentPage = parseInt(card.getAttribute("data-current-page"));

        console.log(`[DEBUG] 找到 ${pages.length} 个页面元素`);
        console.log(`[DEBUG] 当前页面: ${currentPage}, 目标页面: ${targetPage}`);

        // 如果目标页面与当前页面相同，不执行任何操作
        if (targetPage === currentPage) {
          console.log(`[DEBUG] 目标页面与当前页面相同，跳过导航`);
          setFlippingState(cardId, false);
          return;
        }

        // 确定翻转方向（前进或后退）
        const isForward = targetPage > currentPage;
        console.log(`[DEBUG] 翻转方向: ${isForward ? '前进' : '后退'}`);

        // 获取当前页面和目标页面元素
        const currentPageElement = card.querySelector(`.card-page[data-page="${currentPage}"]`);
        const targetPageElement = card.querySelector(`.card-page[data-page="${targetPage}"]`);
        
        console.log(`[DEBUG] 当前页面元素:`, currentPageElement);
        console.log(`[DEBUG] 目标页面元素:`, targetPageElement);
        
        if (!currentPageElement || !targetPageElement) {
          console.error(`[ERROR] 找不到页面元素: 当前页面=${currentPageElement}, 目标页面=${targetPageElement}`);
          setFlippingState(cardId, false);
          return;
        }

        // === 新增：翻转前原始页面状态记录 ===
        console.log('[DEBUG] 翻转前原始页面状态:');
        console.log('[DEBUG] 当前页面 computed display:', window.getComputedStyle(currentPageElement).display);
        console.log('[DEBUG] 目标页面 computed display:', window.getComputedStyle(targetPageElement).display);
        console.log('[DEBUG] 当前页面 z-index:', window.getComputedStyle(currentPageElement).zIndex);
        console.log('[DEBUG] 目标页面 z-index:', window.getComputedStyle(targetPageElement).zIndex);
        console.log('[DEBUG] 当前页面 opacity:', window.getComputedStyle(currentPageElement).opacity);
        console.log('[DEBUG] 目标页面 opacity:', window.getComputedStyle(targetPageElement).opacity);
        console.log('[DEBUG] 当前页面 visibility:', window.getComputedStyle(currentPageElement).visibility);
        console.log('[DEBUG] 目标页面 visibility:', window.getComputedStyle(targetPageElement).visibility);

        // === 新增：检查父元素是否隐藏了内容 ===
        console.log('[DEBUG] CSS边界检查 - 检查父元素:');
        let parent = targetPageElement.parentElement;
        let parentLevel = 0;
        while (parent && parentLevel < 5) { // 限制检查层级避免无限循环
          const parentStyle = window.getComputedStyle(parent);
          if (parentStyle.display === 'none' || parentStyle.visibility === 'hidden' || parentStyle.opacity === '0') {
            console.log(`[DEBUG] 发现隐藏的父元素 (层级${parentLevel}):`, parent, {
              display: parentStyle.display,
              visibility: parentStyle.visibility,
              opacity: parentStyle.opacity
            });
          }
          parent = parent.parentElement;
          parentLevel++;
        }

        // === 新增：添加样式变化监听 ===
        if (targetPageElement._styleObserver) {
          targetPageElement._styleObserver.disconnect();
        }
        targetPageElement._styleObserver = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
              console.log('[DEBUG] 检测到目标页面样式被修改:', mutation.target.style.cssText);
              console.log('[DEBUG] 修改时间:', new Date().toISOString());
            }
          });
        });
        targetPageElement._styleObserver.observe(targetPageElement, { 
          attributes: true, 
          attributeFilter: ['style'] 
        });

        // 创建翻转容器
        const flipContainer = document.createElement('div');
        flipContainer.className = 'card-flip-container';
        
        // 创建正面（当前页面）
        const frontFace = document.createElement('div');
        frontFace.className = 'card-face front';
        frontFace.innerHTML = currentPageElement.innerHTML;
        
        // 创建背面（目标页面）
        const backFace = document.createElement('div');
        backFace.className = 'card-face back';
        backFace.innerHTML = targetPageElement.innerHTML;
        
        // 组装翻转容器
        flipContainer.appendChild(frontFace);
        flipContainer.appendChild(backFace);
        
        console.log(`[DEBUG] 创建翻转容器完成`);
        
        // === 新增：翻转容器内容调试 ===
        console.log('[DEBUG] 翻转容器内容:');
        const currentPageCopy = flipContainer.querySelector(`[data-page="${currentPage}"]`);
        const targetPageCopy = flipContainer.querySelector(`[data-page="${targetPage}"]`);
        if (currentPageCopy) {
          console.log('[DEBUG] - 当前页面副本 display:', window.getComputedStyle(currentPageCopy).display);
        } else {
          console.log('[DEBUG] - 当前页面副本未找到，检查frontFace display:', window.getComputedStyle(frontFace).display);
        }
        if (targetPageCopy) {
          console.log('[DEBUG] - 目标页面副本 display:', window.getComputedStyle(targetPageCopy).display);
        } else {
          console.log('[DEBUG] - 目标页面副本未找到，检查backFace display:', window.getComputedStyle(backFace).display);
        }
        
        // 隐藏所有原始页面
        pages.forEach(page => {
          page.style.display = 'none';
        });
        
        // 添加翻转容器到容器中（不清空原有内容）
        container.appendChild(flipContainer);
        
        console.log(`[DEBUG] 翻转容器已添加到DOM`);
        
        // 强制重排
        flipContainer.offsetHeight;
        
        // === 新增：动画结束事件计数 ===
        let animationEndCount = 0;
        let transitionEndCount = 0;
        
        // 监听所有可能的动画事件
        flipContainer.addEventListener('animationend', function(e) {
          animationEndCount++;
          console.log('[DEBUG] 动画结束事件触发, 计数:', animationEndCount, '动画名称:', e.animationName);
        });
        
        flipContainer.addEventListener('transitionend', function(e) {
          transitionEndCount++;
          console.log('[DEBUG] 过渡结束事件触发, 计数:', transitionEndCount, '属性:', e.propertyName);
        });
        
        // 开始翻转动画，根据方向选择旋转方向
        setTimeout(() => {
          console.log(`[DEBUG] 开始翻转动画`);
          if (isForward) {
            flipContainer.classList.add('flipped'); // 正向旋转（向右翻）
          } else {
            flipContainer.classList.add('flipped-reverse'); // 反向旋转（向左翻）
          }
        }, 50);
        
        // 动画结束后清理
        flipContainer.addEventListener('transitionend', function onTransitionEnd() {
          console.log(`[DEBUG] 翻转动画完成，开始清理`);
          flipContainer.removeEventListener('transitionend', onTransitionEnd);
          
          // 移除翻转容器
          if (flipContainer.parentNode) {
            flipContainer.parentNode.removeChild(flipContainer);
          }
          console.log(`[DEBUG] 翻转容器已移除`);
          
          // 确保所有页面都隐藏
          const currentPages = card.querySelectorAll(".card-page");
          currentPages.forEach(page => {
            page.style.display = 'none';
          });
          
          // 显示目标页面
          const finalTargetPage = card.querySelector(`.card-page[data-page="${targetPage}"]`);
          if (finalTargetPage) {
            finalTargetPage.style.display = 'block';
            
            // 强制重绘
            void finalTargetPage.offsetWidth;
            console.log('[DEBUG] 强制重绘后目标页面display:', window.getComputedStyle(finalTargetPage).display);
            
            // 重置目标页面的transform属性
            console.log('[DEBUG] ========== 开始修复transform问题 ==========');
            resetPageTransforms(finalTargetPage);
            
            // 重置所有其他可见页面的transform（防止残留）
            console.log('[DEBUG] 重置其他页面的transform:');
            currentPages.forEach(page => {
              if (page !== finalTargetPage && page.style.display !== 'none') {
                console.log('[DEBUG] 重置页面:', page.dataset.page);
                resetPageTransforms(page);
              }
            });
            
            // 检查目标页面可见性
            const isVisible = checkPageVisibility(finalTargetPage, targetPage);
            if (!isVisible) {
              console.error('[ERROR] 目标页面在transform重置后仍不可见！');
              // 强制显示
              finalTargetPage.style.display = 'block';
              finalTargetPage.style.visibility = 'visible';
              finalTargetPage.style.opacity = '1';
              void finalTargetPage.offsetWidth;
              console.log('[DEBUG] 已强制重新显示目标页面');
            }
            console.log('[DEBUG] ========== transform修复完成 ==========');
            
            console.log(`[DEBUG] 目标页面 ${targetPage} 已显示`);
          } else {
            console.error(`[ERROR] 无法找到目标页面 ${targetPage}`);
          }
          
          // 更新当前页面
          card.setAttribute("data-current-page", targetPage);
          console.log(`[DEBUG] 当前页面已更新为: ${targetPage}`);
          
          // 更新导航状态
          updateNavigation(cardId);
          console.log(`[DEBUG] 导航完成`);
          
          // 设置翻页状态为完成
          setFlippingState(cardId, false);
        }, { once: true });
      }

      // 更新导航状态
      function updateNavigation(cardId) {
        const card = document.getElementById(cardId);
        const currentPage = parseInt(card.getAttribute("data-current-page"));
        const totalPages = parseInt(card.getAttribute("data-total-pages"));

        // 更新导航点状态
        const dots = card.querySelectorAll(".nav-dot");
        dots.forEach((dot) => {
          if (parseInt(dot.getAttribute("data-page")) === currentPage) {
            dot.classList.add("active");
          } else {
            dot.classList.remove("active");
          }
        });

        // 更新箭头状态
        const prevArrow = card.querySelector(".prev-arrow");
        const nextArrow = card.querySelector(".next-arrow");

        if (currentPage === 1) {
          prevArrow.classList.add("disabled");
        } else {
          prevArrow.classList.remove("disabled");
        }

        if (currentPage === totalPages) {
          nextArrow.classList.add("disabled");
        } else {
          nextArrow.classList.remove("disabled");
        }
      }

      // === 可视化关系图谱交互功能 ===
      
      // 分布节点数据
      const distributionNodes = {
        'normal': { x: 50, y: 20, color: 'bg-neon-blue', symbol: 'N' },
        'poisson': { x: 35, y: 60, color: 'bg-neon-purple', symbol: 'P' },
        'exponential': { x: 65, y: 60, color: 'bg-neon-green', symbol: 'E' },
        'binomial': { x: 20, y: 40, color: 'bg-neon-orange', symbol: 'B' },
        'uniform': { x: 15, y: 70, color: 'bg-neon-pink', symbol: 'U' },
        'chisquare': { x: 80, y: 40, color: 'bg-neon-cyan', symbol: 'χ²' },
        'gamma': { x: 50, y: 80, color: 'bg-neon-yellow', symbol: 'Γ' },
        't': { x: 75, y: 70, color: 'bg-neon-orange', symbol: 't' }
      };

      // 关系数据
      const relationData = {
        limit: [
          { from: 'poisson', to: 'normal', description: '泊松分布在λ→∞时趋近正态分布' },
          { from: 'binomial', to: 'normal', description: '二项分布在n→∞时趋近正态分布' },
          { from: 'binomial', to: 'poisson', description: '二项分布在n→∞, p→0, np=λ时趋近泊松分布' }
        ],
        construction: [
          { from: 'normal', to: 'chisquare', description: '标准正态分布的平方和构成卡方分布' },
          { from: 'exponential', to: 'gamma', description: '指数分布是伽马分布的特例(α=1)' },
          { from: 'chisquare', to: 'gamma', description: '卡方分布是伽马分布的特例' }
        ],
        special: [
          { from: 'uniform', to: 'poisson', description: '均匀分布可用于生成其他分布' },
          { from: 't', to: 'normal', description: 't分布在自由度→∞时趋近标准正态分布' }
        ]
      };

      // 初始化可视化关系图谱
      function initializeDistributionMap() {
        const container = document.getElementById('distribution-network');
        if (!container) return;

        // 创建分布节点
        Object.entries(distributionNodes).forEach(([name, data]) => {
          const node = document.createElement('div');
          node.className = 'distribution-node';
          node.style.left = data.x + '%';
          node.style.top = data.y + '%';
          node.setAttribute('data-distribution', name);
          
          node.innerHTML = `
            <div class="node-circle ${data.color}">
              ${data.symbol}
            </div>
            <div class="node-label">${getDistributionName(name)}</div>
          `;
          
          // 添加点击事件
          node.addEventListener('click', () => highlightDistribution(name));
          
          container.appendChild(node);
        });

        // 初始化显示所有关系
        showRelationType('all');
      }

      // 获取分布中文名称
      function getDistributionName(name) {
        const names = {
          'normal': '正态',
          'poisson': '泊松',
          'exponential': '指数',
          'binomial': '二项',
          'uniform': '均匀',
          'chisquare': '卡方',
          'gamma': '伽马',
          't': 't分布'
        };
        return names[name] || name;
      }

      // 显示特定类型的关系
      function showRelationType(type) {
        // 重置所有按钮样式
        document.querySelectorAll('.relation-btn').forEach(btn => {
          btn.classList.remove('active');
          // 重置为默认样式
          btn.className = 'relation-btn px-4 py-2 bg-gray-700 text-white font-bold rounded-lg transition-all duration-300';
        });
        
        // 设置当前选中按钮的样式
        const activeBtn = document.querySelector(`[onclick="showRelationType('${type}')"]`);
        if (activeBtn) {
          activeBtn.classList.add('active');
          // 根据类型设置不同的激活颜色
          switch(type) {
            case 'all':
              activeBtn.className = 'relation-btn px-4 py-2 bg-neon-blue text-dark-bg font-bold rounded-lg transition-all duration-300 active';
              break;
            case 'limit':
              activeBtn.className = 'relation-btn px-4 py-2 bg-neon-purple text-dark-bg font-bold rounded-lg transition-all duration-300 active';
              break;
            case 'construction':
              activeBtn.className = 'relation-btn px-4 py-2 bg-neon-green text-dark-bg font-bold rounded-lg transition-all duration-300 active';
              break;
            case 'special':
              activeBtn.className = 'relation-btn px-4 py-2 bg-neon-orange text-dark-bg font-bold rounded-lg transition-all duration-300 active';
              break;
          }
        }

        // 显示/隐藏关系组
        const groups = document.querySelectorAll('.relation-group');
        groups.forEach(group => {
          if (type === 'all') {
            group.classList.remove('hidden');
          } else if (group.classList.contains(`${type}-relations`)) {
            group.classList.remove('hidden');
          } else {
            group.classList.add('hidden');
          }
        });

        // 更新关系信息
        updateRelationInfo(type);
      }

      // 更新关系信息面板
      function updateRelationInfo(type) {
        const infoPanel = document.getElementById('relation-info');
        if (!infoPanel) return;

        let content = '';
        
        if (type === 'all') {
          content = `
            <h4 class="text-lg font-bold text-neon-blue mb-3">概率分布关系图谱</h4>
            <p class="text-gray-300 mb-2">• <span class="text-neon-purple">极限关系</span>：分布间的渐近关系</p>
            <p class="text-gray-300 mb-2">• <span class="text-neon-green">构造关系</span>：分布间的构造关系</p>
            <p class="text-gray-300">• <span class="text-neon-orange">特殊关系</span>：其他重要关系</p>
          `;
        } else {
          const typeNames = {
            'limit': '极限关系',
            'construction': '构造关系',
            'special': '特殊关系'
          };
          
          content = `<h4 class="text-lg font-bold text-neon-blue mb-3">${typeNames[type]}</h4>`;
          
          if (relationData[type]) {
            relationData[type].forEach(relation => {
              content += `<p class="text-gray-300 mb-2">• ${relation.description}</p>`;
            });
          }
        }
        
        infoPanel.innerHTML = content;
        infoPanel.classList.add('show');
      }

      // 高亮显示特定分布
      function highlightDistribution(distributionName) {
        // 移除所有高亮
        document.querySelectorAll('.distribution-node').forEach(node => {
          node.classList.remove('highlighted');
        });

        // 高亮选中的分布
        const selectedNode = document.querySelector(`[data-distribution="${distributionName}"]`);
        if (selectedNode) {
          selectedNode.classList.add('highlighted');
          
          // 显示相关连接线动画
          animateRelatedConnections(distributionName);
          
          // 更新信息面板
          showDistributionInfo(distributionName);
        }
      }

      // 动画显示相关连接线
      function animateRelatedConnections(distributionName) {
        // 移除所有动画
        document.querySelectorAll('.connection-line').forEach(line => {
          line.classList.remove('animated');
        });

        // 为相关连接线添加动画
        setTimeout(() => {
          Object.values(relationData).flat().forEach(relation => {
            if (relation.from === distributionName || relation.to === distributionName) {
              const lines = document.querySelectorAll('.connection-line');
              lines.forEach(line => {
                // 这里可以根据具体的连接线标识来添加动画
                line.classList.add('animated');
              });
            }
          });
        }, 100);
      }

      // 显示分布信息
      function showDistributionInfo(distributionName) {
        const infoPanel = document.getElementById('relation-info');
        if (!infoPanel) return;

        const distributionInfo = {
          'normal': {
            name: '正态分布',
            description: '最重要的连续概率分布，具有钟形曲线特征',
            relations: ['是许多分布的极限分布', '平方后构成卡方分布']
          },
          'poisson': {
            name: '泊松分布',
            description: '描述单位时间内随机事件发生次数的离散分布',
            relations: ['λ→∞时趋近正态分布', '是二项分布的极限情况']
          },
          'exponential': {
            name: '指数分布',
            description: '描述事件间隔时间的连续分布，具有无记忆性',
            relations: ['是伽马分布的特例(α=1)', '与泊松过程密切相关']
          },
          'binomial': {
            name: '二项分布',
            description: 'n次独立伯努利试验中成功次数的离散分布',
            relations: ['n→∞时趋近正态分布', '特定条件下趋近泊松分布']
          },
          'uniform': {
            name: '均匀分布',
            description: '在指定区间内等概率分布的连续分布',
            relations: ['随机数生成的基础', '可用于构造其他分布']
          },
          'chisquare': {
            name: '卡方分布',
            description: '标准正态分布平方和的分布，用于假设检验',
            relations: ['由正态分布构造而成', '是伽马分布的特例']
          },
          'gamma': {
            name: '伽马分布',
            description: '指数分布和卡方分布的推广，形状灵活',
            relations: ['包含指数分布和卡方分布', '用于生存分析']
          },
          't': {
            name: 't分布',
            description: '用于小样本统计推断的对称分布',
            relations: ['自由度→∞时趋近标准正态分布', '用于均值检验']
          }
        };

        const info = distributionInfo[distributionName];
        if (info) {
          let content = `
            <h4 class="text-lg font-bold text-neon-blue mb-3">${info.name}</h4>
            <p class="text-gray-300 mb-3">${info.description}</p>
            <div class="space-y-1">
              <p class="text-sm font-semibold text-neon-green">主要关系：</p>
          `;
          
          info.relations.forEach(relation => {
            content += `<p class="text-sm text-gray-400">• ${relation}</p>`;
          });
          
          content += '</div>';
          infoPanel.innerHTML = content;
        }
      }

      // === 洪水频率分析功能 ===
      
      // Gumbel分布计算函数
      function gumbelPDF(x, mu, beta) {
        const z = (x - mu) / beta;
        return (1 / beta) * Math.exp(-(z + Math.exp(-z)));
      }
      
      function gumbelCDF(x, mu, beta) {
        const z = (x - mu) / beta;
        return Math.exp(-Math.exp(-z));
      }
      
      function gumbelQuantile(p, mu, beta) {
        return mu - beta * Math.log(-Math.log(p));
      }
      
      // 广义极值分布(GEV)计算函数
      function gevPDF(x, mu, sigma, xi) {
        if (sigma <= 0) return 0;
        
        const t = (x - mu) / sigma;
        if (xi === 0) {
          // Gumbel case
          return (1 / sigma) * Math.exp(-(t + Math.exp(-t)));
        } else {
          if (xi > 0 && x <= mu - sigma / xi) return 0;
          if (xi < 0 && x >= mu - sigma / xi) return 0;
          
          const term = 1 + xi * t;
          if (term <= 0) return 0;
          
          return (1 / sigma) * Math.pow(term, -1 - 1/xi) * Math.exp(-Math.pow(term, -1/xi));
        }
      }
      
      function gevCDF(x, mu, sigma, xi) {
        if (sigma <= 0) return 0;
        
        const t = (x - mu) / sigma;
        if (xi === 0) {
          // Gumbel case
          return Math.exp(-Math.exp(-t));
        } else {
          if (xi > 0 && x <= mu - sigma / xi) return 0;
          if (xi < 0 && x >= mu - sigma / xi) return 1;
          
          const term = 1 + xi * t;
          if (term <= 0) return xi > 0 ? 0 : 1;
          
          return Math.exp(-Math.pow(term, -1/xi));
        }
      }
      
      function gevQuantile(p, mu, sigma, xi) {
        if (p <= 0 || p >= 1) return NaN;
        
        if (xi === 0) {
          // Gumbel case
          return mu - sigma * Math.log(-Math.log(p));
        } else {
          return mu + (sigma / xi) * (Math.pow(-Math.log(p), -xi) - 1);
        }
      }
      
      // 重现期计算
      function calculateReturnPeriod(floodLevel, distribution, params) {
        let exceedanceProbability;
        
        if (distribution === 'gumbel') {
          const cdf = gumbelCDF(floodLevel, params.mu, params.beta);
          exceedanceProbability = 1 - cdf;
        } else if (distribution === 'gev') {
          const cdf = gevCDF(floodLevel, params.mu, params.sigma, params.xi);
          exceedanceProbability = 1 - cdf;
        }
        
        return exceedanceProbability > 0 ? 1 / exceedanceProbability : Infinity;
      }
      
      // 洪水频率分析图表
      let floodPdfChart = null;
      let floodReturnChart = null;
      
      function initializeFloodAnalysis() {
        // 初始化图表
        const pdfCtx = document.getElementById('flood-pdf-chart');
        const returnCtx = document.getElementById('flood-return-chart');
        
        if (pdfCtx && returnCtx) {
          floodPdfChart = new Chart(pdfCtx, {
            type: 'line',
            data: {
              labels: [],
              datasets: [{
                label: '概率密度',
                data: [],
                borderColor: '#00d4ff',
                backgroundColor: 'rgba(0, 212, 255, 0.1)',
                borderWidth: 2,
                fill: true
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  labels: { color: '#ffffff' }
                }
              },
              scales: {
                x: {
                  title: { display: true, text: '洪水位 (m)', color: '#ffffff' },
                  ticks: { color: '#ffffff' },
                  grid: { color: 'rgba(255, 255, 255, 0.1)' }
                },
                y: {
                  title: { display: true, text: '概率密度', color: '#ffffff' },
                  ticks: { color: '#ffffff' },
                  grid: { color: 'rgba(255, 255, 255, 0.1)' }
                }
              }
            }
          });
          
          floodReturnChart = new Chart(returnCtx, {
            type: 'line',
            data: {
              labels: [],
              datasets: [{
                label: '洪水位',
                data: [],
                borderColor: '#ff6b6b',
                backgroundColor: 'rgba(255, 107, 107, 0.1)',
                borderWidth: 2,
                fill: false
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  labels: { color: '#ffffff' }
                }
              },
              scales: {
                x: {
                  type: 'logarithmic',
                  title: { display: true, text: '重现期 (年)', color: '#ffffff' },
                  ticks: { color: '#ffffff' },
                  grid: { color: 'rgba(255, 255, 255, 0.1)' }
                },
                y: {
                  title: { display: true, text: '洪水位 (m)', color: '#ffffff' },
                  ticks: { color: '#ffffff' },
                  grid: { color: 'rgba(255, 255, 255, 0.1)' }
                }
              }
            }
          });
          
          // 设置事件监听器
          setupFloodAnalysisListeners();
          updateFloodCharts();
        }
      }
      
      function setupFloodAnalysisListeners() {
        // 分布类型切换
        const distributionRadios = document.querySelectorAll('input[name="flood-distribution"]');
        distributionRadios.forEach(radio => {
          radio.addEventListener('change', function() {
            toggleDistributionParams(this.value);
            updateFloodCharts();
          });
        });
        
        // 参数输入监听
        const paramInputs = document.querySelectorAll('#gumbel-mu, #gumbel-beta, #gev-mu, #gev-sigma, #gev-xi');
        paramInputs.forEach(input => {
          input.addEventListener('input', updateFloodCharts);
        });
        
        // 洪水位输入监听
        const floodLevelInput = document.getElementById('flood-level-input');
        if (floodLevelInput) {
          floodLevelInput.addEventListener('input', updateReturnPeriodCalculation);
        }
      }
      
      function toggleDistributionParams(distribution) {
        const gumbelParams = document.getElementById('gumbel-params');
        const gevParams = document.getElementById('gev-params');
        
        if (distribution === 'gumbel') {
          gumbelParams.classList.remove('hidden');
          gevParams.classList.add('hidden');
        } else {
          gumbelParams.classList.add('hidden');
          gevParams.classList.remove('hidden');
        }
      }
      
      function updateFloodCharts() {
        const selectedDistribution = document.querySelector('input[name="flood-distribution"]:checked').value;
        
        // 获取参数
        let params;
        if (selectedDistribution === 'gumbel') {
          params = {
            mu: parseFloat(document.getElementById('gumbel-mu').value),
            beta: parseFloat(document.getElementById('gumbel-beta').value)
          };
        } else {
          params = {
            mu: parseFloat(document.getElementById('gev-mu').value),
            sigma: parseFloat(document.getElementById('gev-sigma').value),
            xi: parseFloat(document.getElementById('gev-xi').value)
          };
        }
        
        // 更新PDF图表
        updateFloodPdfChart(selectedDistribution, params);
        
        // 更新重现期图表
        updateFloodReturnChart(selectedDistribution, params);
        
        // 更新重现期计算
        updateReturnPeriodCalculation();
      }
      
      function updateFloodPdfChart(distribution, params) {
        if (!floodPdfChart) return;
        
        const xMin = Math.max(0, params.mu - 4 * (params.beta || params.sigma));
        const xMax = params.mu + 6 * (params.beta || params.sigma);
        const step = (xMax - xMin) / 200;
        
        const xValues = [];
        const yValues = [];
        
        for (let x = xMin; x <= xMax; x += step) {
          xValues.push(x.toFixed(1));
          
          let pdf;
          if (distribution === 'gumbel') {
            pdf = gumbelPDF(x, params.mu, params.beta);
          } else {
            pdf = gevPDF(x, params.mu, params.sigma, params.xi);
          }
          yValues.push(pdf);
        }
        
        floodPdfChart.data.labels = xValues;
        floodPdfChart.data.datasets[0].data = yValues;
        floodPdfChart.data.datasets[0].label = distribution === 'gumbel' ? 'Gumbel分布' : 'GEV分布';
        floodPdfChart.update();
      }
      
      function updateFloodReturnChart(distribution, params) {
        if (!floodReturnChart) return;
        
        const returnPeriods = [2, 5, 10, 20, 50, 100, 200, 500, 1000];
        const floodLevels = [];
        
        returnPeriods.forEach(T => {
          const p = 1 - 1/T; // 非超越概率
          let floodLevel;
          
          if (distribution === 'gumbel') {
            floodLevel = gumbelQuantile(p, params.mu, params.beta);
          } else {
            floodLevel = gevQuantile(p, params.mu, params.sigma, params.xi);
          }
          
          floodLevels.push(floodLevel);
        });
        
        floodReturnChart.data.labels = returnPeriods;
        floodReturnChart.data.datasets[0].data = floodLevels;
        floodReturnChart.update();
      }
      
      function updateReturnPeriodCalculation() {
        const floodLevelInput = document.getElementById('flood-level-input');
        const resultElement = document.getElementById('return-period-result');
        
        if (!floodLevelInput || !resultElement) return;
        
        const floodLevel = parseFloat(floodLevelInput.value);
        const selectedDistribution = document.querySelector('input[name="flood-distribution"]:checked').value;
        
        let params;
        if (selectedDistribution === 'gumbel') {
          params = {
            mu: parseFloat(document.getElementById('gumbel-mu').value),
            beta: parseFloat(document.getElementById('gumbel-beta').value)
          };
        } else {
          params = {
            mu: parseFloat(document.getElementById('gev-mu').value),
            sigma: parseFloat(document.getElementById('gev-sigma').value),
            xi: parseFloat(document.getElementById('gev-xi').value)
          };
        }
        
        const returnPeriod = calculateReturnPeriod(floodLevel, selectedDistribution, params);
        
        if (isFinite(returnPeriod)) {
          resultElement.textContent = returnPeriod.toFixed(1);
        } else {
          resultElement.textContent = '∞';
        }
      }
      
      // 江西工程案例数据
      const jiangxiFloodCases = {
        poyang: {
          name: '鄱阳湖流域2020年特大洪水',
          description: '2020年鄱阳湖流域发生特大洪水，最高水位达22.52m，超过1998年历史最高水位。此次洪水持续时间长，影响范围广，对江西省防洪体系提出了严峻考验。',
          distribution: 'gumbel',
          params: { mu: 16.8, beta: 2.1 },
          historicalData: [
            { year: 2020, level: 22.52 },
            { year: 1998, level: 22.43 },
            { year: 1996, level: 21.18 },
            { year: 1983, level: 20.85 },
            { year: 1973, level: 20.12 }
          ],
          engineering: {
            significance: '鄱阳湖作为中国最大的淡水湖，其洪水频率分析对长江中下游防洪具有重要意义。通过Gumbel分布分析，可以为鄱阳湖区防洪工程设计提供科学依据。',
            applications: [
              '堤防工程设计标准确定（50年一遇、100年一遇）',
              '湖区蓄滞洪区规划与管理',
              '防洪调度方案优化',
              '洪水风险评估与预警系统建设'
            ],
            keyLevels: {
              warning: 19.5,
              danger: 20.0,
              guarantee: 22.5
            }
          }
        },
        ganjiang: {
          name: '赣江南昌段历史洪水',
          description: '赣江是江西省最大河流，南昌段是重要的防洪控制断面。警戒水位19.5m，保证水位22.5m。历史上多次发生超警戒水位洪水，需要科学的频率分析指导防洪工程建设。',
          distribution: 'gev',
          params: { mu: 15.2, sigma: 2.5, xi: -0.1 },
          historicalData: [
            { year: 2020, level: 21.71 },
            { year: 2010, level: 20.85 },
            { year: 1998, level: 22.50 },
            { year: 1995, level: 19.96 },
            { year: 1983, level: 20.12 }
          ],
          engineering: {
            significance: '赣江南昌段洪水频率分析是江西省防洪规划的重要基础。采用GEV分布能更好地拟合极值数据，为城市防洪和河道治理提供技术支撑。',
            applications: [
              '南昌市城市防洪标准制定',
              '赣江干流河道整治工程设计',
              '防洪堤坝加固改造',
              '城市内涝防治系统设计'
            ],
            keyLevels: {
              warning: 19.5,
              danger: 20.5,
              guarantee: 22.5
            }
          }
        },
        reservoir: {
          name: '水库调度防洪案例',
          description: '江西省拥有众多大中型水库，在防洪中发挥重要作用。通过极值分布分析入库洪水，可以优化水库调度方案，提高防洪效益。以柘林水库为例，库容108亿m³，是赣江流域重要的防洪工程。',
          distribution: 'gumbel',
          params: { mu: 18.5, beta: 3.2 },
          historicalData: [
            { year: 2020, level: 24.1 },
            { year: 2016, level: 22.8 },
            { year: 2010, level: 21.5 },
            { year: 1998, level: 25.2 },
            { year: 1991, level: 20.9 }
          ],
          engineering: {
            significance: '水库防洪调度是现代防洪体系的核心。通过洪水频率分析，可以制定科学的调度规则，在保证水库安全的前提下，最大化发挥防洪效益。',
            applications: [
              '水库防洪调度图编制',
              '汛限水位动态控制',
              '预泄调度方案优化',
              '水库群联合调度'
            ],
            keyLevels: {
              normal: 18.0,
              flood_limit: 20.0,
              design_flood: 24.0
            }
          }
        }
      };
      
      function loadFloodCase(caseId) {
        const caseData = jiangxiFloodCases[caseId];
        if (!caseData) return;
        
        // 设置分布类型
        const distributionRadio = document.querySelector(`input[name="flood-distribution"][value="${caseData.distribution}"]`);
        if (distributionRadio) {
          distributionRadio.checked = true;
          toggleDistributionParams(caseData.distribution);
        }
        
        // 设置参数
        if (caseData.distribution === 'gumbel') {
          document.getElementById('gumbel-mu').value = caseData.params.mu;
          document.getElementById('gumbel-beta').value = caseData.params.beta;
        } else {
          document.getElementById('gev-mu').value = caseData.params.mu;
          document.getElementById('gev-sigma').value = caseData.params.sigma;
          document.getElementById('gev-xi').value = caseData.params.xi;
        }
        
        // 更新图表
        updateFloodCharts();
        
        // 显示详细案例信息
        showCaseDetails(caseData);
      }
      
      function showCaseDetails(caseData) {
        // 填充案例信息
        document.getElementById('case-name').textContent = caseData.name;
        document.getElementById('case-description').textContent = caseData.description;
        document.getElementById('case-distribution').textContent = 
          caseData.distribution === 'gumbel' ? 'Gumbel分布' : '广义极值分布(GEV)';
        
        // 填充参数信息
        let paramText = '';
        if (caseData.distribution === 'gumbel') {
          paramText = `位置参数 μ = ${caseData.params.mu}, 尺度参数 β = ${caseData.params.beta}`;
        } else {
          paramText = `位置参数 μ = ${caseData.params.mu}, 尺度参数 σ = ${caseData.params.sigma}, 形状参数 ξ = ${caseData.params.xi}`;
        }
        document.getElementById('case-params').textContent = paramText;
        
        // 填充历史数据表格
        const tableBody = document.getElementById('historical-data-table');
        tableBody.innerHTML = '';
        caseData.historicalData.forEach(data => {
          const row = document.createElement('tr');
          const returnPeriod = calculateReturnPeriod(data.level, caseData.distribution, caseData.params);
          row.innerHTML = `
            <td class="px-4 py-2 border border-gray-600">${data.year}</td>
            <td class="px-4 py-2 border border-gray-600">${data.level.toFixed(2)}m</td>
            <td class="px-4 py-2 border border-gray-600">${returnPeriod.toFixed(1)}年</td>
          `;
          tableBody.appendChild(row);
        });
        
        // 填充工程意义
        if (caseData.engineering) {
          document.getElementById('engineering-significance').textContent = caseData.engineering.significance;
          
          // 填充应用列表
          const applicationsList = document.getElementById('engineering-applications');
          applicationsList.innerHTML = '';
          caseData.engineering.applications.forEach(app => {
            const li = document.createElement('li');
            li.textContent = app;
            li.className = 'mb-1';
            applicationsList.appendChild(li);
          });
          
          // 填充关键水位
          const keyLevelsList = document.getElementById('key-levels');
          keyLevelsList.innerHTML = '';
          Object.entries(caseData.engineering.keyLevels).forEach(([key, value]) => {
            const li = document.createElement('li');
            const levelName = {
              warning: '警戒水位',
              danger: '危险水位', 
              guarantee: '保证水位',
              normal: '正常蓄水位',
              flood_limit: '汛限水位',
              design_flood: '设计洪水位'
            }[key] || key;
            li.textContent = `${levelName}: ${value}m`;
            li.className = 'mb-1';
            keyLevelsList.appendChild(li);
          });
        }
        
        // 显示案例详情面板
        document.getElementById('case-details').style.display = 'block';
      }
      
      function closeCaseDetails() {
        document.getElementById('case-details').style.display = 'none';
      }

      document.addEventListener("DOMContentLoaded", function () {
        createParticles();
        initializeChart();
        selectDistribution("normal");
        setupEventListeners();
        initializeFlipCards(); // 初始化翻转卡片功能
        initializeDistributionMap(); // 初始化可视化关系图谱
        initializeFloodAnalysis(); // 初始化洪水频率分析
        
        // 页面加载完成
        console.log('概率分布可视化页面加载完成');
      });
    </script>

    <!-- 工具箱组件 -->
    <script src="/static/js/toolbox.js"></script>
  </body>
</html>
