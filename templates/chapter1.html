<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>第1章 随机事件与概率</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../static/css/random_variables.css" />
    <!-- KaTeX 样式与脚本（用于 LaTeX 公式渲染） -->
    <link rel="stylesheet" href="../static/libs/katex/css/katex.min.css" />
    <script src="../static/libs/katex/js/katex.min.js"></script>
    <script src="../static/libs/katex/js/auto-render.min.js"></script>
    <link rel="icon" href="../static/images/favicon.ico" />
    <style>
      /* 章节页未来感背景与卡片光效（仅当前页面） */
      body {
        background: radial-gradient(1200px 500px at 10% 0%, rgba(34,211,238,0.06), transparent),
                    radial-gradient(1000px 500px at 90% 0%, rgba(167,139,250,0.06), transparent),
                    linear-gradient(180deg, #0b1220, #121725);
      }
      .fx-holo {
        position: relative; overflow: hidden;
        background: linear-gradient(180deg, rgba(17,24,39,0.75), rgba(31,41,55,0.7));
        border: 1px solid rgba(255,255,255,0.12);
        box-shadow: 0 10px 35px rgba(34,211,238,0.12), 0 16px 40px rgba(167,139,250,0.12);
      }
      .fx-holo::before { /* 边缘色散 */
        content: ""; position: absolute; inset: 0; pointer-events: none;
        background: radial-gradient(800px 300px at 15% 0%, rgba(34,211,238,0.06), transparent),
                    radial-gradient(700px 300px at 85% 0%, rgba(167,139,250,0.06), transparent);
        mix-blend-mode: screen;
      }
      .fx-holo:hover { box-shadow: 0 12px 40px rgba(34,211,238,0.18), 0 20px 55px rgba(167,139,250,0.18); }
      .fx-ambient { backdrop-filter: blur(8px); }
      .fx-title-glow { text-shadow: 0 0 10px rgba(103,232,249,0.35); }

      /* 多色霓虹主题（打破单调） */
      .accent-cyan.fx-holo   { box-shadow: 0 10px 35px rgba(34,211,238,0.20), 0 16px 40px rgba(34,211,238,0.10); }
      .accent-purple.fx-holo { box-shadow: 0 10px 35px rgba(167,139,250,0.20), 0 16px 40px rgba(167,139,250,0.10); }
      .accent-pink.fx-holo   { box-shadow: 0 10px 35px rgba(236,72,153,0.22), 0 16px 40px rgba(236,72,153,0.12); }
      .accent-lime.fx-holo   { box-shadow: 0 10px 35px rgba(163,230,53,0.22), 0 16px 40px rgba(163,230,53,0.12); }
      .accent-amber.fx-holo  { box-shadow: 0 10px 35px rgba(245,158,11,0.22), 0 16px 40px rgba(245,158,11,0.12); }
      .accent-cyan .fx-title-glow   { text-shadow: 0 0 12px rgba(34,211,238,0.45); }
      .accent-purple .fx-title-glow { text-shadow: 0 0 12px rgba(167,139,250,0.45); }
      .accent-pink .fx-title-glow   { text-shadow: 0 0 12px rgba(236,72,153,0.45); }
      .accent-lime .fx-title-glow   { text-shadow: 0 0 12px rgba(163,230,53,0.45); }
      .accent-amber .fx-title-glow  { text-shadow: 0 0 12px rgba(245,158,11,0.45); }
    </style>
    <script>
      // 为导航注入页面级锚点链接（在导航脚本加载前定义）
      window.NAV_CONFIG = {
        active: 'chapter1',
        sectionLinks: [
          { href: '#sec-1-1', label: '1.1 随机事件及其运算' },
          { href: '#sec-1-2', label: '1.2 概率的定义与确定方法' },
          { href: '#sec-1-3', label: '1.3 概率的性质' },
          { href: '#sec-1-4', label: '1.4 条件概率' },
          { href: '#sec-1-5', label: '1.5 独立性' }
        ]
      };
    </script>
  </head>
  <body class="bg-dark-bg text-white">
    <!-- 通过脚本动态注入统一导航栏 -->
    <script src="../static/js/include-navbar.js"></script>

    <div class="min-h-screen bg-gradient-to-b from-dark-bg to-dark-card/50 pt-20">
      <!-- 章节 Hero -->
      <section class="container mx-auto px-4">
        <div class="bg-dark-card border border-gray-800 rounded-2xl p-8 fx-holo fx-ambient accent-cyan">
          <div class="flex items-center mb-6">
            <div class="w-14 h-14 rounded-lg bg-neon-blue/10 flex items-center justify-center mr-4">
              <i class="fa fa-dice text-neon-blue text-2xl"></i>
            </div>
            <div>
              <div class="text-xs text-gray-400">第1章</div>
              <h1 class="text-2xl font-bold fx-title-glow">随机事件与概率</h1>
            </div>
          </div>
          <p class="text-gray-300">从随机试验与样本空间出发，理解事件的代数运算与概率公理，并在具体例子中掌握条件概率与独立性。</p>
        </div>
      </section>

      <main class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
          <!-- 左侧目录 -->
          <aside class="hidden md:block md:col-span-3">
            <div class="bg-dark-card border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-cyan sticky top-24">
              <h3 class="text-sm font-semibold mb-3 fx-title-glow">章节目录</h3>
              <ul class="text-gray-400 text-sm space-y-2">
                <li><a class="hover:text-neon-blue transition-colors" href="#sec-1-1">1.1 随机事件及其运算</a></li>
                <li><a class="hover:text-neon-blue transition-colors" href="#sec-1-2">1.2 概率的定义与确定方法</a></li>
                <li><a class="hover:text-neon-blue transition-colors" href="#sec-1-3">1.3 概率的性质</a></li>
                <li><a class="hover:text-neon-blue transition-colors" href="#sec-1-4">1.4 条件概率</a></li>
                <li><a class="hover:text-neon-blue transition-colors" href="#sec-1-5">1.5 独立性</a></li>
              </ul>
            </div>
          </aside>

          <!-- 右侧内容 -->
          <div class="md:col-span-9 space-y-10">
            <!-- 小节1：随机事件及其运算（对齐 1.1） -->
            <section id="sec-1-1" class="scroll-mt-20">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
                <div class="bg-dark-card border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-cyan h-full flex flex-col">
                  <div class="flex items-center mb-4">
                    <div class="w-10 h-10 rounded-lg bg-neon-blue/10 flex items-center justify-center mr-3">
                      <i class="fa fa-flask text-neon-blue"></i>
                    </div>
                    <h2 class="text-xl font-semibold">1.1 随机事件及其运算</h2>
                  </div>
                  <p class="text-gray-300 text-sm mb-4">随机试验是指在相同条件下可重复进行、结果不确定但具有可统计性的一类试验；其所有可能结果构成样本空间 <span class="text-neon-blue">Ω</span>。</p>
                  <ul class="text-gray-400 text-sm space-y-2">
                    <li>• 掷骰子试验：<span class="text-gray-300">Ω = {1,2,3,4,5,6}</span></li>
                    <li>• 事件的表示：<span class="text-gray-300">A = {偶数点数} = {2,4,6}</span></li>
                    <li>• 频率与概率：大量试验中频率趋近于概率</li>
                  </ul>
                </div>
              </div>
            </section>

            <!-- 小节2：概率的定义与确定方法（对齐 1.2） -->
            <section id="sec-1-2" class="scroll-mt-20">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
                <div class="bg-dark-bg/50 border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-amber h-full flex flex-col">
                  <h3 class="font-semibold mb-3">1.2 频率法：掷骰子模拟</h3>
                  <p class="text-gray-400 text-sm mb-4">点击按钮进行一次试验，观察各点数频次与总次数，理解频率趋近于概率。</p>
                  <div class="grid grid-cols-3 gap-3 text-sm">
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700">总次数：<span id="dice-total" class="text-neon-blue">0</span></div>
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700">最近结果：<span id="dice-last" class="text-neon-blue">-</span></div>
                    <div class="flex items-center gap-2">
                      <button id="dice-roll" class="bg-neon-blue text-dark-bg px-3 py-2 rounded hover:bg-neon-blue/80 transition-colors">掷一次</button>
                      <button id="dice-reset" class="bg-gray-700 text-white px-3 py-2 rounded hover:bg-gray-600 transition-colors">重置</button>
                    </div>
                  </div>
                  <div class="mt-4 grid grid-cols-3 md:grid-cols-6 gap-3 text-sm">
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700 text-center">1：<span id="dice-count-1" class="text-gray-300">0</span></div>
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700 text-center">2：<span id="dice-count-2" class="text-gray-300">0</span></div>
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700 text-center">3：<span id="dice-count-3" class="text-gray-300">0</span></div>
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700 text-center">4：<span id="dice-count-4" class="text-gray-300">0</span></div>
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700 text-center">5：<span id="dice-count-5" class="text-gray-300">0</span></div>
                    <div class="bg-gray-800/50 p-3 rounded border border-gray-700 text-center">6：<span id="dice-count-6" class="text-gray-300">0</span></div>
                  </div>
                </div>
                <div class="bg-dark-card border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-cyan h-full flex flex-col">
                  <h3 class="font-semibold mb-3">1.2 其他确定方法</h3>
                  <ul class="text-gray-400 text-sm space-y-2">
                    <li>• 古典方法：有限样本空间中等可能性假设。</li>
                    <li>• 几何方法：区域面积（体积）比例。</li>
                    <li>• 主观方法：先验信息与专家判断。</li>
                  </ul>
                </div>
              </div>
            </section>

            <!-- 小节3：概率的性质（对齐 1.3） -->
            <section id="sec-1-3" class="scroll-mt-20">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
                <div class="bg-dark-card border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-purple h-full flex flex-col">
                  <div class="flex items-center mb-4">
                    <div class="w-10 h-10 rounded-lg bg-neon-purple/10 flex items-center justify-center mr-3">
                      <i class="fa fa-diagram-project text-neon-purple"></i>
                    </div>
                    <h2 class="text-xl font-semibold">1.3 概率的性质</h2>
                  </div>
                  <p class="text-gray-300 text-sm mb-4">事件之间可做并、交与补运算；概率满足非负性、规范化与可列可加性等基础公理。</p>
                  <ul class="text-gray-400 text-sm space-y-2">
                    <li>• 并集：<span class="text-gray-300">A ∪ B</span> 表示「发生 A 或 B」</li>
                    <li>• 交集：<span class="text-gray-300">A ∩ B</span> 表示「同时发生」</li>
                    <li>• 补集：<span class="text-gray-300">A<sup>c</sup></span> 表示「不发生 A」</li>
                    <li>• 概率公理：<span class="text-gray-300">0 ≤ P(A) ≤ 1，P(Ω)=1</span>；互不相容事件的和率等于概率之和</li>
                  </ul>
                  <div class="bg-gray-800/40 rounded p-3 mt-3 text-center text-gray-300 formula-scroll">$$P(A \cup B) = P(A) + P(B) - P(A \cap B)$$</div>
                </div>
                <div class="bg-dark-bg/50 border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-pink h-full flex flex-col">
                  <h3 class="font-semibold mb-3">课堂要点</h3>
                  <div class="text-gray-400 text-sm space-y-2">
                    <p>• 用韦恩图直观理解并、交、补的空间关系。</p>
                    <p>• 理解互斥与独立的区别：互斥 <span class="text-gray-300">A ∩ B = ∅</span>；独立 <span class="text-gray-300">P(A∩B)=P(A)P(B)</span>。</p>
                    <p>• 练习：给定骰子试验，计算 <span class="text-gray-300">P(偶数)、P(≥4)、P(偶数∩≥4)</span>。</p>
                  </div>
                </div>
              </div>
            </section>

            <!-- 小节4：条件概率（对齐 1.4） -->
            <section id="sec-1-4" class="scroll-mt-20">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
                <div class="bg-dark-card border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-lime h-full flex flex-col">
                  <div class="flex items-center mb-4">
                    <div class="w-10 h-10 rounded-lg bg-neon-green/10 flex items-center justify-center mr-3">
                      <i class="fa fa-diagram-next text-neon-green"></i>
                    </div>
                    <h2 class="text-xl font-semibold">1.4 条件概率</h2>
                  </div>
                  <p class="text-gray-300 text-sm mb-4">条件概率定义为 <span class="text-neon-blue">P(A|B) = \(\frac{P(A\cap B)}{P(B)}\)</span>（<span class="text-gray-400">要求 P(B) &gt; 0</span>）。独立性可理解为「条件概率不改变原概率」。</p>
                  <ul class="text-gray-400 text-sm space-y-2">
                    <li>• 全概率公式：<span class="text-gray-300">P(A)=\(\sum_i P(A|B_i)P(B_i)\)</span></li>
                    <li>• 贝叶斯公式：<span class="text-gray-300">P(B_i|A)=\(\frac{P(A|B_i)P(B_i)}{\sum_j P(A|B_j)P(B_j)}\)</span></li>
                  </ul>
                </div>
                <div class="bg-dark-bg/50 border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-pink h-full flex flex-col">
                  <h3 class="font-semibold mb-3">条件概率计算器</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                    <label class="flex flex-col">
                      <span class="text-gray-400 mb-1">P(A∩B)</span>
                      <input id="pAB" type="number" step="0.0001" min="0" max="1" class="bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white" placeholder="例如 0.25" />
                    </label>
                    <label class="flex flex-col">
                      <span class="text-gray-400 mb-1">P(B)</span>
                      <input id="pB" type="number" step="0.0001" min="0" max="1" class="bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white" placeholder="例如 0.5" />
                    </label>
                    <label class="flex flex-col md:col-span-2">
                      <span class="text-gray-400 mb-1">（可选）P(A)</span>
                      <input id="pA" type="number" step="0.0001" min="0" max="1" class="bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white" placeholder="用于独立性粗判，例如 0.5" />
                    </label>
                    <div class="md:col-span-2 flex items-center gap-2">
                      <button id="cond-calc" class="bg-neon-green text-dark-bg px-3 py-2 rounded hover:bg-neon-green/80 transition-colors">计算</button>
                      <span id="cond-result" class="text-gray-300"></span>
                    </div>
                    <div class="md:col-span-2 text-gray-400" id="ind-result"></div>
                  </div>
                </div>
              </div>
            </section>

            <!-- 小节5：独立性（对齐 1.5） -->
            <section id="sec-1-5" class="scroll-mt-20">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
                <div class="bg-dark-card border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-cyan h-full flex flex-col">
                  <div class="flex items-center mb-4">
                    <div class="w-10 h-10 rounded-lg bg-neon-blue/10 flex items-center justify-center mr-3">
                      <i class="fa fa-shuffle text-neon-blue"></i>
                    </div>
                    <h2 class="text-xl font-semibold">1.5 独立性</h2>
                  </div>
                  <p class="text-gray-300 text-sm mb-4">两个事件的独立性指 <span class="text-gray-300">P(A∩B)=P(A)P(B)</span>。可通过比较 <span class="text-gray-300">P(A|B)</span> 与 <span class="text-gray-300">P(A)</span> 判断是否近似独立。</p>
                  <div class="text-gray-400 text-sm">配合上方计算器给出独立性判断结果。</div>
                </div>
                <div class="bg-dark-bg/50 border border-gray-800 rounded-xl p-6 fx-holo fx-ambient accent-purple h-full flex flex-col">
                  <h3 class="font-semibold mb-3">示例与练习</h3>
                  <ul class="text-gray-400 text-sm space-y-2">
                    <li>• 掷骰子试验中事件「偶数」与「≥4」不独立。</li>
                    <li>• 抽样试验中有放回与无放回对独立性的影响。</li>
                  </ul>
                </div>
              </div>
            </section>
          </div>
        </div>
      </main>
      </main>

      <!-- 页脚占位容器，将由 partial 注入 -->
      <div id="site-footer"></div>
    </div>

    <!-- 页面交互脚本（抽取为独立文件，便于复用） -->
    <script src="../static/js/chapter1.js"></script>

    <!-- 工具脚本接入：URL点击处理、工具箱、页脚注入 -->
    <script src="../static/js/url-click-handler.js"></script>
    <script src="../static/js/toolbox.js"></script>
    <script src="../static/js/include-footer.js"></script>
    <!-- 启动 KaTeX 自动渲染（参考 hypothesis_testing 页面） -->
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        try {
          renderMathInElement(document.body, {
            delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '\\(', right: '\\)', display: false},
              {left: '$', right: '$', display: false}
            ],
            throwOnError: false
          });
        } catch(e) {
          console.warn('KaTeX render init failed:', e);
        }
      });
    </script>
  </body>
</html>