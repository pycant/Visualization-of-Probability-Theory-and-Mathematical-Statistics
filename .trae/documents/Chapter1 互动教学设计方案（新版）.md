## 目标
- 围绕《目录.md》第一章按目录顺序设计互动案例，增强直觉与可玩性。
- 保持页面/脚本风格一致，使用 KaTeX 与轻量图形；落地到 `templates/chapter1.html` 与 `static/js/chapter1.js`。

## 1.1 随机事件及其运算｜事件运算可视化沙盒
- 教学目标：直观理解并集（∪）、交集（∩）、补集（¯）与包含关系；连接样本空间与事件域。
- 玩法：两类事件占比用滑块设定，动态韦恩图显示 `P(A∪B)`、`P(A∩B)`、`P(A¯)`；标签可切换为“吃瓜/发弹幕”“点赞/收藏”。

## 1.2 概率的定义及其确定方法｜骰子到暴击（古典样本空间→频率法）
- 教学目标：从等可能样本空间理解概率，连接到游戏暴击率/连击；频率法收敛与理论值对照。
- 玩法：设定暴击率与攻击次数，展示命中分布与 `P(≥1)=1-(1-p)^n`；提示“独立同分布前提”。

## 1.3 概率的性质｜抽卡/盲盒概率实验台（含保底与补事件）
- 教学目标：用加法与补事件解释基本性质；观察保底规则对概率的影响。
- 玩法：
  - 自设稀有/常规掉率与保底规则；连续抽 N 次，显示稀有命中率与频率收敛曲线。
  - 补事件：`1-(1-p)^n`（独立同分布前提）；保底示例模型（递增保底 `p(n)=min(p0+α·max(n-k,0), p_max)` 或第 `k` 抽必定命中）。
  - 消费梗：单抽默认 `¥16`（可调），累计金额档位展示；如“已消耗 ¥168 ≈ 某热门作品周边”；幸运度标签“SSS/SSR/欧皇”等可配置。
- 展示：三栏布局（左参数/中演示/右讲解面板公式+视频切换）；移动端上下布局、讲解面板折叠。
- 功能框组件：讲解面板使用“公式/代码功能框”（复制 Markdown/LaTeX、视图切换），接口 `initFormulaBox(el, { latex, code, defaultView: 'latex' })`。

## 1.4 条件概率｜Among Us/狼人杀小剧场
- 教学目标：基于证据更新怀疑概率，区分 `P(A|B)` 与 `P(B|A)`；乘法公式与全概率。
- 玩法：设定好人/内鬼比例与证据真伪率，计算 `P(内鬼|证据)`；支持多个证据组合；强调“证据≠结论”。

## 1.4.4 贝叶斯公式｜贝叶斯鉴定台（假阳性陷阱）
- 教学目标：理解先验、似然与后验；揭示假阳性直觉陷阱。
- 玩法：场景可选“外挂检测/粉丝真假/安检/核酸”，设定先验比例与检测误差，展示 `P(真|检出)` 与误判率；分母展开为全概率。

## 1.4.X 条件概率经典｜Monty Hall 门牌梗（策略对比）
- 教学目标：信息揭示与条件概率的影响；展示保持/切换策略的成功率差异。
- 玩法：
  - 三门中藏奖品，主持人按规则揭示一扇无奖门；玩家选择“保持”或“切换”。
  - 多次模拟下显示经验成功率与理论值：`P(赢|切换)=2/3`、`P(赢|保持)=1/3`（在标准主持人规则下）。
  - 梗元素：主持人戏剧化台词/特效，门牌贴热门梗标识；一键切换策略并显示对比条形图。
- 规则参数：可选标准规则（主持人总是揭示非奖门且不揭示玩家选择）或非标准规则（用于展示规则变更会改变概率）。
- 公式展示：条件概率与全概率分解；强调“信息揭示改变后验”。

## 1.5 独立性｜独立性探测器（连抽与活动加成）
- 教学目标：判断独立与相关，展示 `P(A∩B)=P(A)P(B)` 成立的条件与反例。
- 玩法：对比“纯独立抽卡”与“活动加成”机制；一键切换“独立/相关”，观察联动。

## 页面集成与结构
- `chapter1.html` 为每案例新增容器（`#sec-1-1`~`#sec-1-5`），含标题、简述、公式区、控制面板、结果视图。
- 用 `window.NAV_CONFIG.sectionLinks` 把案例锚点加入导航（参考 `templates/chapter1.html:50-61`）。
- 图形反馈优先 DOM/SVG；需图表时用 `static/libs/chart/chart.umd.min.js`。

## 脚本扩展（`static/js/chapter1.js`）
- 维持 IIFE 与 `DOMContentLoaded` 注册（参考 `static/js/chapter1.js:56-60`），新增：
  - `setupEventAlgebraSandbox()`（1.1）
  - `setupCritChance()`（1.2）
  - `setupGachaLab()`（1.3）
  - `setupAmongUsConditional()`（1.4）
  - `setupBayesLab()`（1.4.4）
  - `setupMontyHall()`（1.4.X）
  - `setupIndependenceProbe()`（1.5）

## 公式与文案
- KaTeX 渲染；每案例提供 2–3 个核心公式与简短前提说明（独立/主持人规则/保底模型等）。
- 梗与文化元素作为正反馈或场景命名，文案可配置（如“欧皇/SSR/SSS”）。

## 验证与可维护性
- 自测：边界输入、滑块性能；区分保底与独立模型；Monty Hall 的主持人规则切换对概率的影响。
- E2E 冒烟：锚点存在与无致命控制台错误；不做重型绘图断言。
- 代码一致性：沿用现有风格与模块化，不引入新依赖；功能框为可复用组件。

## 交付内容
- `chapter1.html`：互动区块、控件、公式占位与讲解面板（含视频按钮）。
- `chapter1.js`：初始化函数与基础交互，并在 `DOMContentLoaded` 中调用。
- 每案例 1–2 句使用说明与前提标注（独立/保底/主持人规则等）。

## 可选增强
- Chart.js 折线/条形图；韦恩图运算动画；抽卡结果接入幸运度排位（`localStorage`）。

## 准确性与实现提示（合并你的修改）
- 抽卡保底不是古典等可能模型，表述为“理论概率（给定 p）与频率法对照”；古典法示例放在骰子/均匀样本空间。
- 保底模型给出通用表达（递增或截断几何），避免品牌特定实现不可复用。
- 功能框以组件定义，支持复制与视图切换；三栏布局补充移动端方案与面板切换控件。